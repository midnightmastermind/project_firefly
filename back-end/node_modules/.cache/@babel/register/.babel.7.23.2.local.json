{"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const express = require(\"express\");\nconst cors = require(\"cors\");\nconst dbConfig = require(\"./config/db.config\");\nconst path = require('path');\nconst app = express();\nvar corsOptions = {\n  origin: \"*\"\n};\napp.use(cors(corsOptions));\n\n// parse requests of content-type - application/json\napp.use(express.json());\nif (process.env.NODE_ENV !== 'local') {\n  app.use(express.static(path.join(__dirname, 'front-end', 'build')));\n  app.get('*', function (req, res, next) {\n    if (req.url === '/' || req.url.includes('/api')) return next();\n    res.sendFile(path.join(__dirname, 'front-end/build', 'index.html'));\n  });\n}\n// parse requests of content-type - application/x-www-form-urlencoded\napp.use(express.urlencoded({\n  extended: true\n}));\napp.use(function (req, res, next) {\n  if (req.get('Referrer')) {\n    res.setHeader('Access-Control-Allow-Origin', req.get('Referrer'));\n    res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With,Content-Type');\n    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, DELETE');\n  }\n  next();\n});\nconst db = require(\"./models\");\nlet connection_string = `mongodb://127.0.0.1:${dbConfig.PORT}/${dbConfig.DB}`;\n\n// if (process.env.NODE_ENV !== 'local') {\n//     let DB = `${dbConfig.DB}`;\n//     if (process.env.NODE_ENV === 'dev') {\n//         DB += \"_dev\";\n//     }\n//     connection_string = `mongodb://${dbConfig.USER}:${dbConfig.PASSWORD}@${dbConfig.HOST}:${dbConfig.PORT}/${DB}?authSource=admin&retryWrites=true&w=majority`;\n// }\n\ndb.mongoose.connect(connection_string, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}).then(() => {\n  console.log(\"Successfully connect to MongoDB.\");\n}).catch(err => {\n  console.error(\"Connection error\", err);\n  process.exit();\n});\n\n// routes\n\nrequire(\"./packages/auth/routes/user.routes\")(app);\nrequire(\"./packages/auth/routes/site_permissions.routes\")(app);\nrequire(\"./packages/auth/routes/auth.routes\")(app);\nrequire(\"./packages/site/routes/site.routes\")(app);\nrequire(\"./packages/site/routes/user_site_availability.routes\")(app);\nrequire(\"./packages/site/routes/site_product_availability.routes\")(app);\nrequire(\"./packages/site_builder/routes/page.routes\")(app);\nrequire(\"./packages/site/routes/content.routes\")(app);\nrequire(\"./packages/storage/routes/file.routes\")(app);\nrequire(\"./packages/storage/routes/folder.routes\")(app);\nrequire(\"./packages/scheduling/routes/session.routes\")(app);\nrequire(\"./packages/scheduling/routes/enrollment.routes\")(app);\nrequire(\"./packages/scheduling/routes/attendance.routes\")(app);\nrequire(\"./packages/ecommerce/routes/transaction.routes\")(app);\nrequire(\"./packages/ecommerce/routes/product_permissions.routes\")(app);\nrequire(\"./packages/ecommerce/routes/product.routes\")(app);\n\n// set port, listen for requests\nconst PORT = process.env.PORT || 8080;\napp.listen(PORT, () => {\n  console.log(`Server is running on port ${PORT}.`);\n});\napp.keepAliveTimeout = 60 * 1000 + 1000;\napp.headersTimeout = 60 * 1000 + 2000;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvcnMiLCJkYkNvbmZpZyIsInBhdGgiLCJhcHAiLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsInVzZSIsImpzb24iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJzdGF0aWMiLCJqb2luIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInVybCIsImluY2x1ZGVzIiwic2VuZEZpbGUiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzZXRIZWFkZXIiLCJkYiIsImNvbm5lY3Rpb25fc3RyaW5nIiwiUE9SVCIsIkRCIiwibW9uZ29vc2UiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsImVycm9yIiwiZXhpdCIsImxpc3RlbiIsImtlZXBBbGl2ZVRpbWVvdXQiLCJoZWFkZXJzVGltZW91dCJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIik7XG5jb25zdCBkYkNvbmZpZyA9IHJlcXVpcmUoXCIuL2NvbmZpZy9kYi5jb25maWdcIik7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG52YXIgY29yc09wdGlvbnMgPSB7XG4gICAgb3JpZ2luOiBcIipcIlxufTtcblxuYXBwLnVzZShjb3JzKGNvcnNPcHRpb25zKSk7XG5cbi8vIHBhcnNlIHJlcXVlc3RzIG9mIGNvbnRlbnQtdHlwZSAtIGFwcGxpY2F0aW9uL2pzb25cbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdsb2NhbCcpIHtcbiAgICBhcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICdmcm9udC1lbmQnLCAnYnVpbGQnKSkpO1xuXG4gICAgYXBwLmdldCgnKicsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICBpZiAocmVxLnVybCA9PT0gJy8nIHx8IHJlcS51cmwuaW5jbHVkZXMoJy9hcGknKSkgcmV0dXJuIG5leHQoKTtcbiAgICAgICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsICdmcm9udC1lbmQvYnVpbGQnLCAnaW5kZXguaHRtbCcpKTtcbiAgICB9KTtcbn1cbi8vIHBhcnNlIHJlcXVlc3RzIG9mIGNvbnRlbnQtdHlwZSAtIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogdHJ1ZSB9KSk7XG5cbmFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgaWYgKHJlcS5nZXQoJ1JlZmVycmVyJykgKSB7XG4gICAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCByZXEuZ2V0KCdSZWZlcnJlcicpKVxuICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLVJlcXVlc3RlZC1XaXRoLENvbnRlbnQtVHlwZScpXG4gICAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgT1BUSU9OUywgUFVULCBERUxFVEUnKVxuICAgIH1cbiAgICBuZXh0KCk7XG4gIH0pXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuL21vZGVsc1wiKTtcblxubGV0IGNvbm5lY3Rpb25fc3RyaW5nID0gYG1vbmdvZGI6Ly8xMjcuMC4wLjE6JHtkYkNvbmZpZy5QT1JUfS8ke2RiQ29uZmlnLkRCfWA7XG5cbi8vIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ2xvY2FsJykge1xuLy8gICAgIGxldCBEQiA9IGAke2RiQ29uZmlnLkRCfWA7XG4vLyAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2Jykge1xuLy8gICAgICAgICBEQiArPSBcIl9kZXZcIjtcbi8vICAgICB9XG4vLyAgICAgY29ubmVjdGlvbl9zdHJpbmcgPSBgbW9uZ29kYjovLyR7ZGJDb25maWcuVVNFUn06JHtkYkNvbmZpZy5QQVNTV09SRH1AJHtkYkNvbmZpZy5IT1NUfToke2RiQ29uZmlnLlBPUlR9LyR7REJ9P2F1dGhTb3VyY2U9YWRtaW4mcmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5YDtcbi8vIH1cblxuZGIubW9uZ29vc2VcbiAgICAuY29ubmVjdChjb25uZWN0aW9uX3N0cmluZywge1xuICAgICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gICAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZVxuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NmdWxseSBjb25uZWN0IHRvIE1vbmdvREIuXCIpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb25uZWN0aW9uIGVycm9yXCIsIGVycik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgpO1xuICAgIH0pO1xuXG4vLyByb3V0ZXNcblxucmVxdWlyZShcIi4vcGFja2FnZXMvYXV0aC9yb3V0ZXMvdXNlci5yb3V0ZXNcIikoYXBwKTtcbnJlcXVpcmUoXCIuL3BhY2thZ2VzL2F1dGgvcm91dGVzL3NpdGVfcGVybWlzc2lvbnMucm91dGVzXCIpKGFwcCk7XG5yZXF1aXJlKFwiLi9wYWNrYWdlcy9hdXRoL3JvdXRlcy9hdXRoLnJvdXRlc1wiKShhcHApO1xucmVxdWlyZShcIi4vcGFja2FnZXMvc2l0ZS9yb3V0ZXMvc2l0ZS5yb3V0ZXNcIikoYXBwKTtcblxucmVxdWlyZShcIi4vcGFja2FnZXMvc2l0ZS9yb3V0ZXMvdXNlcl9zaXRlX2F2YWlsYWJpbGl0eS5yb3V0ZXNcIikoYXBwKTtcbnJlcXVpcmUoXCIuL3BhY2thZ2VzL3NpdGUvcm91dGVzL3NpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkucm91dGVzXCIpKGFwcCk7XG5yZXF1aXJlKFwiLi9wYWNrYWdlcy9zaXRlX2J1aWxkZXIvcm91dGVzL3BhZ2Uucm91dGVzXCIpKGFwcCk7XG5yZXF1aXJlKFwiLi9wYWNrYWdlcy9zaXRlL3JvdXRlcy9jb250ZW50LnJvdXRlc1wiKShhcHApO1xuXG5yZXF1aXJlKFwiLi9wYWNrYWdlcy9zdG9yYWdlL3JvdXRlcy9maWxlLnJvdXRlc1wiKShhcHApO1xucmVxdWlyZShcIi4vcGFja2FnZXMvc3RvcmFnZS9yb3V0ZXMvZm9sZGVyLnJvdXRlc1wiKShhcHApO1xuXG5yZXF1aXJlKFwiLi9wYWNrYWdlcy9zY2hlZHVsaW5nL3JvdXRlcy9zZXNzaW9uLnJvdXRlc1wiKShhcHApO1xucmVxdWlyZShcIi4vcGFja2FnZXMvc2NoZWR1bGluZy9yb3V0ZXMvZW5yb2xsbWVudC5yb3V0ZXNcIikoYXBwKTtcbnJlcXVpcmUoXCIuL3BhY2thZ2VzL3NjaGVkdWxpbmcvcm91dGVzL2F0dGVuZGFuY2Uucm91dGVzXCIpKGFwcCk7XG5cbnJlcXVpcmUoXCIuL3BhY2thZ2VzL2Vjb21tZXJjZS9yb3V0ZXMvdHJhbnNhY3Rpb24ucm91dGVzXCIpKGFwcCk7XG5yZXF1aXJlKFwiLi9wYWNrYWdlcy9lY29tbWVyY2Uvcm91dGVzL3Byb2R1Y3RfcGVybWlzc2lvbnMucm91dGVzXCIpKGFwcCk7XG5yZXF1aXJlKFwiLi9wYWNrYWdlcy9lY29tbWVyY2Uvcm91dGVzL3Byb2R1Y3Qucm91dGVzXCIpKGFwcCk7XG5cblxuLy8gc2V0IHBvcnQsIGxpc3RlbiBmb3IgcmVxdWVzdHNcbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDgwODA7XG5hcHAubGlzdGVuKFBPUlQsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9LmApO1xufSk7XG5cbmFwcC5rZWVwQWxpdmVUaW1lb3V0ID0gKDYwICogMTAwMCkgKyAxMDAwO1xuYXBwLmhlYWRlcnNUaW1lb3V0ID0gKDYwICogMTAwMCkgKyAyMDAwO1xuXG5cblxuXG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUUsUUFBUSxHQUFHRixPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDOUMsTUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1JLEdBQUcsR0FBR0wsT0FBTyxDQUFDLENBQUM7QUFFckIsSUFBSU0sV0FBVyxHQUFHO0VBQ2RDLE1BQU0sRUFBRTtBQUNaLENBQUM7QUFFREYsR0FBRyxDQUFDRyxHQUFHLENBQUNOLElBQUksQ0FBQ0ksV0FBVyxDQUFDLENBQUM7O0FBRTFCO0FBQ0FELEdBQUcsQ0FBQ0csR0FBRyxDQUFDUixPQUFPLENBQUNTLElBQUksQ0FBQyxDQUFDLENBQUM7QUFFdkIsSUFBSUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxPQUFPLEVBQUU7RUFDbENQLEdBQUcsQ0FBQ0csR0FBRyxDQUFDUixPQUFPLENBQUNhLE1BQU0sQ0FBQ1QsSUFBSSxDQUFDVSxJQUFJLENBQUNDLFNBQVMsRUFBRSxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztFQUVuRVYsR0FBRyxDQUFDVyxHQUFHLENBQUMsR0FBRyxFQUFFLFVBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDbkMsSUFBSUYsR0FBRyxDQUFDRyxHQUFHLEtBQUssR0FBRyxJQUFJSCxHQUFHLENBQUNHLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU9GLElB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","map":{"version":3,"names":["express","require","cors","dbConfig","path","app","corsOptions","origin","use","json","process","env","NODE_ENV","static","join","__dirname","get","req","res","next","url","includes","sendFile","urlencoded","extended","setHeader","db","connection_string","PORT","DB","mongoose","connect","useNewUrlParser","useUnifiedTopology","then","console","log","catch","err","error","exit","listen","keepAliveTimeout","headersTimeout"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/","sources":["server.js"],"sourcesContent":["const express = require(\"express\");\nconst cors = require(\"cors\");\nconst dbConfig = require(\"./config/db.config\");\nconst path = require('path');\nconst app = express();\n\nvar corsOptions = {\n    origin: \"*\"\n};\n\napp.use(cors(corsOptions));\n\n// parse requests of content-type - application/json\napp.use(express.json());\n\nif (process.env.NODE_ENV !== 'local') {\n    app.use(express.static(path.join(__dirname, 'front-end', 'build')));\n\n    app.get('*', function (req, res, next) {\n        if (req.url === '/' || req.url.includes('/api')) return next();\n        res.sendFile(path.join(__dirname, 'front-end/build', 'index.html'));\n    });\n}\n// parse requests of content-type - application/x-www-form-urlencoded\napp.use(express.urlencoded({ extended: true }));\n\napp.use(function (req, res, next) {\n    if (req.get('Referrer') ) {\n      res.setHeader('Access-Control-Allow-Origin', req.get('Referrer'))\n      res.setHeader('Access-Control-Allow-Headers', 'X-Requested-With,Content-Type')\n      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, DELETE')\n    }\n    next();\n  })\nconst db = require(\"./models\");\n\nlet connection_string = `mongodb://127.0.0.1:${dbConfig.PORT}/${dbConfig.DB}`;\n\n// if (process.env.NODE_ENV !== 'local') {\n//     let DB = `${dbConfig.DB}`;\n//     if (process.env.NODE_ENV === 'dev') {\n//         DB += \"_dev\";\n//     }\n//     connection_string = `mongodb://${dbConfig.USER}:${dbConfig.PASSWORD}@${dbConfig.HOST}:${dbConfig.PORT}/${DB}?authSource=admin&retryWrites=true&w=majority`;\n// }\n\ndb.mongoose\n    .connect(connection_string, {\n        useNewUrlParser: true,\n        useUnifiedTopology: true\n    })\n    .then(() => {\n        console.log(\"Successfully connect to MongoDB.\");\n    })\n    .catch(err => {\n        console.error(\"Connection error\", err);\n        process.exit();\n    });\n\n// routes\n\nrequire(\"./packages/auth/routes/user.routes\")(app);\nrequire(\"./packages/auth/routes/site_permissions.routes\")(app);\nrequire(\"./packages/auth/routes/auth.routes\")(app);\nrequire(\"./packages/site/routes/site.routes\")(app);\n\nrequire(\"./packages/site/routes/user_site_availability.routes\")(app);\nrequire(\"./packages/site/routes/site_product_availability.routes\")(app);\nrequire(\"./packages/site_builder/routes/page.routes\")(app);\nrequire(\"./packages/site/routes/content.routes\")(app);\n\nrequire(\"./packages/storage/routes/file.routes\")(app);\nrequire(\"./packages/storage/routes/folder.routes\")(app);\n\nrequire(\"./packages/scheduling/routes/session.routes\")(app);\nrequire(\"./packages/scheduling/routes/enrollment.routes\")(app);\nrequire(\"./packages/scheduling/routes/attendance.routes\")(app);\n\nrequire(\"./packages/ecommerce/routes/transaction.routes\")(app);\nrequire(\"./packages/ecommerce/routes/product_permissions.routes\")(app);\nrequire(\"./packages/ecommerce/routes/product.routes\")(app);\n\n\n// set port, listen for requests\nconst PORT = process.env.PORT || 8080;\napp.listen(PORT, () => {\n    console.log(`Server is running on port ${PORT}.`);\n});\n\napp.keepAliveTimeout = (60 * 1000) + 1000;\napp.headersTimeout = (60 * 1000) + 2000;\n\n\n\n\n"],"mappings":"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"}},"mtime":1704223588249},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/config/db.config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"module.exports = {\n  HOST: \"127.0.0.1\",\n  PORT: 27017,\n  USER: \"admin\",\n  PASSWORD: \"pd2235OJ\",\n  DB: \"default_db\"\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiSE9TVCIsIlBPUlQiLCJVU0VSIiwiUEFTU1dPUkQiLCJEQiJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9jb25maWcvIiwic291cmNlcyI6WyJkYi5jb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSB7XG4gIEhPU1Q6IFwiMTI3LjAuMC4xXCIsXG4gIFBPUlQ6IDI3MDE3LFxuICBVU0VSOiBcImFkbWluXCIsXG4gIFBBU1NXT1JEOiBcInBkMjIzNU9KXCIsXG4gIERCOiBcImRlZmF1bHRfZGJcIlxufTsiXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNmQyxJQUFJLEVBQUUsV0FBVztFQUNqQkMsSUFBSSxFQUFFLEtBQUs7RUFDWEMsSUFBSSxFQUFFLE9BQU87RUFDYkMsUUFBUSxFQUFFLFVBQVU7RUFDcEJDLEVBQUUsRUFBRTtBQUNOLENBQUMifQ==","map":{"version":3,"names":["module","exports","HOST","PORT","USER","PASSWORD","DB"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/config/","sources":["db.config.js"],"sourcesContent":["module.exports = {\n  HOST: \"127.0.0.1\",\n  PORT: 27017,\n  USER: \"admin\",\n  PASSWORD: \"pd2235OJ\",\n  DB: \"default_db\"\n};"],"mappings":"AAAAA,MAAM,CAACC,OAAO,GAAG;EACfC,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,KAAK;EACXC,IAAI,EAAE,OAAO;EACbC,QAAQ,EAAE,UAAU;EACpBC,EAAE,EAAE;AACN,CAAC"}},"mtime":1697837444323},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/models/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require('mongoose');\nmongoose.Promise = global.Promise;\nconst db = {};\ndb.mongoose = mongoose;\n\n//auth models\ndb.global_permissions = require(\"../packages/auth/models/global_permissions.model\");\ndb.role = require(\"../packages/auth/models/role.model\");\ndb.site_permissions = require(\"../packages/auth/models/site_permissions.model\");\ndb.user = require(\"../packages/auth/models/user.model\");\n\n//blog models\ndb.post = require(\"../packages/blog/models/post.model\");\ndb.post_category = require(\"../packages/blog/models/post_category.model\");\n\n//ecommerce models\ndb.product = require(\"../packages/ecommerce/models/product.model\");\ndb.product_permissions = require(\"../packages/ecommerce/models/product_permissions.model\");\ndb.transaction = require(\"../packages/ecommerce/models/transaction.model\");\ndb.purchase = require(\"../packages/ecommerce/models/purchase.model\");\ndb.commerce_category = require(\"../packages/ecommerce/models/commerce_category.model\");\ndb.shipment = require(\"../packages/ecommerce/models/shipment.model\");\ndb.variation = require(\"../packages/ecommerce/models/variation.model\");\ndb.service = require(\"../packages/ecommerce/models/service.model\");\n\n//scheduling models\ndb.attendance = require(\"../packages/scheduling/models/attendance.model\");\ndb.enrollment = require(\"../packages/scheduling/models/enrollment.model\");\ndb.session = require(\"../packages/scheduling/models/session.model\");\ndb.event = require(\"../packages/scheduling/models/event.model\");\ndb.booking = require(\"../packages/scheduling/models/booking.model\");\n\n//site models\ndb.content = require(\"../packages/site/models/content.model\");\ndb.form = require(\"../packages/site/models/form.model\");\ndb.grouping = require(\"../packages/site/models/grouping.model\");\ndb.option = require(\"../packages/site/models/option.model\");\ndb.question = require(\"../packages/site/models/question.model\");\ndb.site = require(\"../packages/site/models/site.model\");\ndb.site_product_availability = require(\"../packages/site/models/site_product_availability.model\");\ndb.user_form_response = require(\"../packages/site/models/user_form_response.model\");\ndb.user_site_availability = require(\"../packages/site/models/user_site_availability.model\");\ndb.permission = require(\"../packages/site/models/permission.model\");\ndb.navigation = require(\"../packages/site/models/navigation.model\");\ndb.theme = require(\"../packages/site/models/theme.model\");\ndb.style = require(\"../packages/site/models/style.model\");\n\n//storage models\ndb.file = require(\"../packages/storage/models/file.model\");\ndb.folder = require(\"../packages/storage/models/folder.model\");\n\n//site_builder models\ndb.site_object = require(\"../packages/site_builder/models/site_object.model\");\ndb.page = require(\"../packages/site_builder/models/page.model\");\nmodule.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQcm9taXNlIiwiZ2xvYmFsIiwiZGIiLCJnbG9iYWxfcGVybWlzc2lvbnMiLCJyb2xlIiwic2l0ZV9wZXJtaXNzaW9ucyIsInVzZXIiLCJwb3N0IiwicG9zdF9jYXRlZ29yeSIsInByb2R1Y3QiLCJwcm9kdWN0X3Blcm1pc3Npb25zIiwidHJhbnNhY3Rpb24iLCJwdXJjaGFzZSIsImNvbW1lcmNlX2NhdGVnb3J5Iiwic2hpcG1lbnQiLCJ2YXJpYXRpb24iLCJzZXJ2aWNlIiwiYXR0ZW5kYW5jZSIsImVucm9sbG1lbnQiLCJzZXNzaW9uIiwiZXZlbnQiLCJib29raW5nIiwiY29udGVudCIsImZvcm0iLCJncm91cGluZyIsIm9wdGlvbiIsInF1ZXN0aW9uIiwic2l0ZSIsInNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkiLCJ1c2VyX2Zvcm1fcmVzcG9uc2UiLCJ1c2VyX3NpdGVfYXZhaWxhYmlsaXR5IiwicGVybWlzc2lvbiIsIm5hdmlnYXRpb24iLCJ0aGVtZSIsInN0eWxlIiwiZmlsZSIsImZvbGRlciIsInNpdGVfb2JqZWN0IiwicGFnZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvbW9kZWxzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xubW9uZ29vc2UuUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuXG5jb25zdCBkYiA9IHt9O1xuXG5kYi5tb25nb29zZSA9IG1vbmdvb3NlO1xuXG4vL2F1dGggbW9kZWxzXG5kYi5nbG9iYWxfcGVybWlzc2lvbnMgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvYXV0aC9tb2RlbHMvZ2xvYmFsX3Blcm1pc3Npb25zLm1vZGVsXCIpO1xuZGIucm9sZSA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9hdXRoL21vZGVscy9yb2xlLm1vZGVsXCIpO1xuZGIuc2l0ZV9wZXJtaXNzaW9ucyA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9hdXRoL21vZGVscy9zaXRlX3Blcm1pc3Npb25zLm1vZGVsXCIpO1xuZGIudXNlciA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9hdXRoL21vZGVscy91c2VyLm1vZGVsXCIpO1xuXG4vL2Jsb2cgbW9kZWxzXG5kYi5wb3N0ID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL2Jsb2cvbW9kZWxzL3Bvc3QubW9kZWxcIik7XG5kYi5wb3N0X2NhdGVnb3J5ID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL2Jsb2cvbW9kZWxzL3Bvc3RfY2F0ZWdvcnkubW9kZWxcIik7XG5cblxuLy9lY29tbWVyY2UgbW9kZWxzXG5kYi5wcm9kdWN0ID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL2Vjb21tZXJjZS9tb2RlbHMvcHJvZHVjdC5tb2RlbFwiKTtcbmRiLnByb2R1Y3RfcGVybWlzc2lvbnMgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvZWNvbW1lcmNlL21vZGVscy9wcm9kdWN0X3Blcm1pc3Npb25zLm1vZGVsXCIpO1xuZGIudHJhbnNhY3Rpb24gPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvZWNvbW1lcmNlL21vZGVscy90cmFuc2FjdGlvbi5tb2RlbFwiKTtcbmRiLnB1cmNoYXNlID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL2Vjb21tZXJjZS9tb2RlbHMvcHVyY2hhc2UubW9kZWxcIik7XG5kYi5jb21tZXJjZV9jYXRlZ29yeSA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9lY29tbWVyY2UvbW9kZWxzL2NvbW1lcmNlX2NhdGVnb3J5Lm1vZGVsXCIpO1xuZGIuc2hpcG1lbnQgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvZWNvbW1lcmNlL21vZGVscy9zaGlwbWVudC5tb2RlbFwiKTtcbmRiLnZhcmlhdGlvbiA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9lY29tbWVyY2UvbW9kZWxzL3ZhcmlhdGlvbi5tb2RlbFwiKTtcbmRiLnNlcnZpY2UgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvZWNvbW1lcmNlL21vZGVscy9zZXJ2aWNlLm1vZGVsXCIpO1xuXG4vL3NjaGVkdWxpbmcgbW9kZWxzXG5kYi5hdHRlbmRhbmNlID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL3NjaGVkdWxpbmcvbW9kZWxzL2F0dGVuZGFuY2UubW9kZWxcIik7XG5kYi5lbnJvbGxtZW50ID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL3NjaGVkdWxpbmcvbW9kZWxzL2Vucm9sbG1lbnQubW9kZWxcIik7XG5kYi5zZXNzaW9uID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL3NjaGVkdWxpbmcvbW9kZWxzL3Nlc3Npb24ubW9kZWxcIik7XG5kYi5ldmVudCA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zY2hlZHVsaW5nL21vZGVscy9ldmVudC5tb2RlbFwiKTtcbmRiLmJvb2tpbmcgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvc2NoZWR1bGluZy9tb2RlbHMvYm9va2luZy5tb2RlbFwiKTtcblxuLy9zaXRlIG1vZGVsc1xuZGIuY29udGVudCA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlL21vZGVscy9jb250ZW50Lm1vZGVsXCIpO1xuZGIuZm9ybSA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlL21vZGVscy9mb3JtLm1vZGVsXCIpO1xuZGIuZ3JvdXBpbmcgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvc2l0ZS9tb2RlbHMvZ3JvdXBpbmcubW9kZWxcIik7XG5kYi5vcHRpb24gPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvc2l0ZS9tb2RlbHMvb3B0aW9uLm1vZGVsXCIpO1xuZGIucXVlc3Rpb24gPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvc2l0ZS9tb2RlbHMvcXVlc3Rpb24ubW9kZWxcIik7XG5kYi5zaXRlID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL3NpdGUvbW9kZWxzL3NpdGUubW9kZWxcIik7XG5kYi5zaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5ID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL3NpdGUvbW9kZWxzL3NpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkubW9kZWxcIik7XG5kYi51c2VyX2Zvcm1fcmVzcG9uc2UgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvc2l0ZS9tb2RlbHMvdXNlcl9mb3JtX3Jlc3BvbnNlLm1vZGVsXCIpO1xuZGIudXNlcl9zaXRlX2F2YWlsYWJpbGl0eSA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlL21vZGVscy91c2VyX3NpdGVfYXZhaWxhYmlsaXR5Lm1vZGVsXCIpO1xuZGIucGVybWlzc2lvbiA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlL21vZGVscy9wZXJtaXNzaW9uLm1vZGVsXCIpO1xuZGIubmF2aWdhdGlvbiA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlL21vZGVscy9uYXZpZ2F0aW9uLm1vZGVsXCIpO1xuZGIudGhlbWUgPSByZXF1aXJlKFwiLi4vcGFja2FnZXMvc2l0ZS9tb2RlbHMvdGhlbWUubW9kZWxcIik7XG5kYi5zdHlsZSA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlL21vZGVscy9zdHlsZS5tb2RlbFwiKTtcblxuLy9zdG9yYWdlIG1vZGVsc1xuZGIuZmlsZSA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zdG9yYWdlL21vZGVscy9maWxlLm1vZGVsXCIpO1xuZGIuZm9sZGVyID0gcmVxdWlyZShcIi4uL3BhY2thZ2VzL3N0b3JhZ2UvbW9kZWxzL2ZvbGRlci5tb2RlbFwiKTtcblxuLy9zaXRlX2J1aWxkZXIgbW9kZWxzXG5kYi5zaXRlX29iamVjdCA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlX2J1aWxkZXIvbW9kZWxzL3NpdGVfb2JqZWN0Lm1vZGVsXCIpO1xuZGIucGFnZSA9IHJlcXVpcmUoXCIuLi9wYWNrYWdlcy9zaXRlX2J1aWxkZXIvbW9kZWxzL3BhZ2UubW9kZWxcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZGI7Il0sIm1hcHBpbmdzIjoiQUFB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","map":{"version":3,"names":["mongoose","require","Promise","global","db","global_permissions","role","site_permissions","user","post","post_category","product","product_permissions","transaction","purchase","commerce_category","shipment","variation","service","attendance","enrollment","session","event","booking","content","form","grouping","option","question","site","site_product_availability","user_form_response","user_site_availability","permission","navigation","theme","style","file","folder","site_object","page","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/models/","sources":["index.js"],"sourcesContent":["const mongoose = require('mongoose');\nmongoose.Promise = global.Promise;\n\nconst db = {};\n\ndb.mongoose = mongoose;\n\n//auth models\ndb.global_permissions = require(\"../packages/auth/models/global_permissions.model\");\ndb.role = require(\"../packages/auth/models/role.model\");\ndb.site_permissions = require(\"../packages/auth/models/site_permissions.model\");\ndb.user = require(\"../packages/auth/models/user.model\");\n\n//blog models\ndb.post = require(\"../packages/blog/models/post.model\");\ndb.post_category = require(\"../packages/blog/models/post_category.model\");\n\n\n//ecommerce models\ndb.product = require(\"../packages/ecommerce/models/product.model\");\ndb.product_permissions = require(\"../packages/ecommerce/models/product_permissions.model\");\ndb.transaction = require(\"../packages/ecommerce/models/transaction.model\");\ndb.purchase = require(\"../packages/ecommerce/models/purchase.model\");\ndb.commerce_category = require(\"../packages/ecommerce/models/commerce_category.model\");\ndb.shipment = require(\"../packages/ecommerce/models/shipment.model\");\ndb.variation = require(\"../packages/ecommerce/models/variation.model\");\ndb.service = require(\"../packages/ecommerce/models/service.model\");\n\n//scheduling models\ndb.attendance = require(\"../packages/scheduling/models/attendance.model\");\ndb.enrollment = require(\"../packages/scheduling/models/enrollment.model\");\ndb.session = require(\"../packages/scheduling/models/session.model\");\ndb.event = require(\"../packages/scheduling/models/event.model\");\ndb.booking = require(\"../packages/scheduling/models/booking.model\");\n\n//site models\ndb.content = require(\"../packages/site/models/content.model\");\ndb.form = require(\"../packages/site/models/form.model\");\ndb.grouping = require(\"../packages/site/models/grouping.model\");\ndb.option = require(\"../packages/site/models/option.model\");\ndb.question = require(\"../packages/site/models/question.model\");\ndb.site = require(\"../packages/site/models/site.model\");\ndb.site_product_availability = require(\"../packages/site/models/site_product_availability.model\");\ndb.user_form_response = require(\"../packages/site/models/user_form_response.model\");\ndb.user_site_availability = require(\"../packages/site/models/user_site_availability.model\");\ndb.permission = require(\"../packages/site/models/permission.model\");\ndb.navigation = require(\"../packages/site/models/navigation.model\");\ndb.theme = require(\"../packages/site/models/theme.model\");\ndb.style = require(\"../packages/site/models/style.model\");\n\n//storage models\ndb.file = require(\"../packages/storage/models/file.model\");\ndb.folder = require(\"../packages/storage/models/folder.model\");\n\n//site_builder models\ndb.site_object = require(\"../packages/site_builder/models/site_object.model\");\ndb.page = require(\"../packages/site_builder/models/page.model\");\n\nmodule.exports = db;"],"mappings":"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"}},"mtime":1701887205643},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/global_permissions.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Global_Permissions = mongoose.model(\"Global_Permissions\", new mongoose.Schema({\n  roles: [{\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Role\"\n  }],\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Global_Permissions;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJHbG9iYWxfUGVybWlzc2lvbnMiLCJtb2RlbCIsIlNjaGVtYSIsInJvbGVzIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ1c2VyX2lkIiwic3RhdHVzIiwiU3RyaW5nIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9hdXRoL21vZGVscy8iLCJzb3VyY2VzIjpbImdsb2JhbF9wZXJtaXNzaW9ucy5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IEdsb2JhbF9QZXJtaXNzaW9ucyA9IG1vbmdvb3NlLm1vZGVsKFxyXG4gICAgXCJHbG9iYWxfUGVybWlzc2lvbnNcIixcclxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgICAgcm9sZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgICAgICAgICAgcmVmOiBcIlJvbGVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICB1c2VyX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlVzZXJcIiB9LFxyXG4gICAgICAgIHN0YXR1czogU3RyaW5nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9XHJcbiAgICB9KVxyXG4pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHbG9iYWxfUGVybWlzc2lvbnM7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsa0JBQWtCLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUNyQyxvQkFBb0IsRUFDcEIsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDakJDLEtBQUssRUFBRSxDQUNGO0lBQ0lDLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUNwQ0MsR0FBRyxFQUFFO0VBQ1QsQ0FBQyxDQUNKO0VBQ0RDLE9BQU8sRUFBRTtJQUFFSixJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQU8sQ0FBQztFQUM5REUsTUFBTSxFQUFFQyxNQUFNO0VBQ2RDLFNBQVMsRUFBRztJQUFFUCxJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVEsQ0FBQztFQUNsRUssU0FBUyxFQUFHO0lBQUVSLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUTtBQUNyRSxDQUFDLENBQ0wsQ0FBQztBQUVETSxNQUFNLENBQUNDLE9BQU8sR0FBR2Qsa0JBQWtCIn0=","map":{"version":3,"names":["mongoose","require","Global_Permissions","model","Schema","roles","type","Types","ObjectId","ref","user_id","status","String","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/","sources":["global_permissions.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Global_Permissions = mongoose.model(\r\n    \"Global_Permissions\",\r\n    new mongoose.Schema({\r\n       roles: [\r\n            {\r\n                type: mongoose.Schema.Types.ObjectId,\r\n                ref: \"Role\"\r\n            }\r\n        ],\r\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Global_Permissions;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,kBAAkB,GAAGF,QAAQ,CAACG,KAAK,CACrC,oBAAoB,EACpB,IAAIH,QAAQ,CAACI,MAAM,CAAC;EACjBC,KAAK,EAAE,CACF;IACIC,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IACpCC,GAAG,EAAE;EACT,CAAC,CACJ;EACDC,OAAO,EAAE;IAAEJ,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DE,MAAM,EAAEC,MAAM;EACdC,SAAS,EAAG;IAAEP,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEK,SAAS,EAAG;IAAER,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGd,kBAAkB"}},"mtime":1697752512299},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/role.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Role = mongoose.model(\"Role\", new mongoose.Schema({\n  name: String\n}));\nmodule.exports = Role;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJSb2xlIiwibW9kZWwiLCJTY2hlbWEiLCJuYW1lIiwiU3RyaW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9hdXRoL21vZGVscy8iLCJzb3VyY2VzIjpbInJvbGUubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IFJvbGUgPSBtb25nb29zZS5tb2RlbChcbiAgXCJSb2xlXCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIG5hbWU6IFN0cmluZ1xuICB9KVxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBSb2xlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsSUFBSSxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDekIsTUFBTSxFQUNOLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2xCQyxJQUFJLEVBQUVDO0FBQ1IsQ0FBQyxDQUNILENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdOLElBQUkifQ==","map":{"version":3,"names":["mongoose","require","Role","model","Schema","name","String","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/","sources":["role.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\n\nconst Role = mongoose.model(\n  \"Role\",\n  new mongoose.Schema({\n    name: String\n  })\n);\n\nmodule.exports = Role;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,IAAI,GAAGF,QAAQ,CAACG,KAAK,CACzB,MAAM,EACN,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,IAAI,EAAEC;AACR,CAAC,CACH,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGN,IAAI"}},"mtime":1697752512299},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/site_permissions.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Site_Permissions = mongoose.model(\"Site_Permissions\", new mongoose.Schema({\n  roles: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Role\"\n  },\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Site\"\n  },\n  status: String,\n  created_at: {\n    type: Number,\n    default: Date.now\n  }\n}));\nmodule.exports = Site_Permissions;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTaXRlX1Blcm1pc3Npb25zIiwibW9kZWwiLCJTY2hlbWEiLCJyb2xlcyIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidXNlcl9pZCIsInNpdGVfaWQiLCJzdGF0dXMiLCJTdHJpbmciLCJjcmVhdGVkX2F0IiwiTnVtYmVyIiwiZGVmYXVsdCIsIkRhdGUiLCJub3ciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL2F1dGgvbW9kZWxzLyIsInNvdXJjZXMiOlsic2l0ZV9wZXJtaXNzaW9ucy5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IFNpdGVfUGVybWlzc2lvbnMgPSBtb25nb29zZS5tb2RlbChcclxuICAgIFwiU2l0ZV9QZXJtaXNzaW9uc1wiLFxyXG4gICAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICAgICAgcm9sZXM6IHt0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJSb2xlXCJ9LFxyXG4gICAgICAgIHVzZXJfaWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiVXNlclwiIH0sXHJcbiAgICAgICAgc2l0ZV9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJTaXRlXCIgfSxcclxuICAgICAgICBzdGF0dXM6IFN0cmluZyxcclxuICAgICAgICBjcmVhdGVkX2F0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogRGF0ZS5ub3cgfVxyXG4gICAgfSlcclxuKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2l0ZV9QZXJtaXNzaW9uczsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxnQkFBZ0IsR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQ25DLGtCQUFrQixFQUNsQixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNoQkMsS0FBSyxFQUFFO0lBQUNDLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBTSxDQUFDO0VBQzFEQyxPQUFPLEVBQUU7SUFBRUosSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFPLENBQUM7RUFDOURFLE9BQU8sRUFBRTtJQUFFTCxJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQU8sQ0FBQztFQUM5REcsTUFBTSxFQUFFQyxNQUFNO0VBQ2RDLFVBQVUsRUFBRTtJQUFFUixJQUFJLEVBQUVTLE1BQU07SUFBRUMsT0FBTyxFQUFFQyxJQUFJLENBQUNDO0VBQUk7QUFDbEQsQ0FBQyxDQUNMLENBQUM7QUFFREMsTUFBTSxDQUFDQyxPQUFPLEdBQUdsQixnQkFBZ0IifQ==","map":{"version":3,"names":["mongoose","require","Site_Permissions","model","Schema","roles","type","Types","ObjectId","ref","user_id","site_id","status","String","created_at","Number","default","Date","now","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/","sources":["site_permissions.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Site_Permissions = mongoose.model(\r\n    \"Site_Permissions\",\r\n    new mongoose.Schema({\r\n        roles: {type: mongoose.Schema.Types.ObjectId, ref: \"Role\"},\r\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\r\n        site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Site\" },\r\n        status: String,\r\n        created_at: { type: Number, default: Date.now }\r\n    })\r\n);\r\n\r\nmodule.exports = Site_Permissions;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,gBAAgB,GAAGF,QAAQ,CAACG,KAAK,CACnC,kBAAkB,EAClB,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,KAAK,EAAE;IAACC,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAM,CAAC;EAC1DC,OAAO,EAAE;IAAEJ,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DE,OAAO,EAAE;IAAEL,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DG,MAAM,EAAEC,MAAM;EACdC,UAAU,EAAE;IAAER,IAAI,EAAES,MAAM;IAAEC,OAAO,EAAEC,IAAI,CAACC;EAAI;AAClD,CAAC,CACL,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGlB,gBAAgB"}},"mtime":1697752512299},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/user.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst User = mongoose.model(\"User\", new mongoose.Schema({\n  username: String,\n  email: String,\n  password: String,\n  first_name: String,\n  last_name: String,\n  address: String,\n  state: String,\n  country: String,\n  zip: String,\n  profile_image: String,\n  login_type: String\n  /*\n      Student: relationship to user as an enrolled person\n      /????: productAdmin: has control over a product, one or more permissions on a product\n       */\n}));\n\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJVc2VyIiwibW9kZWwiLCJTY2hlbWEiLCJ1c2VybmFtZSIsIlN0cmluZyIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiYWRkcmVzcyIsInN0YXRlIiwiY291bnRyeSIsInppcCIsInByb2ZpbGVfaW1hZ2UiLCJsb2dpbl90eXBlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9hdXRoL21vZGVscy8iLCJzb3VyY2VzIjpbInVzZXIubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbChcbiAgICBcIlVzZXJcIixcbiAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICAgICAgdXNlcm5hbWU6IFN0cmluZyxcbiAgICAgICAgZW1haWw6IFN0cmluZyxcbiAgICAgICAgcGFzc3dvcmQ6IFN0cmluZyxcbiAgICAgICAgZmlyc3RfbmFtZTogU3RyaW5nLFxuICAgICAgICBsYXN0X25hbWU6IFN0cmluZyxcbiAgICAgICAgYWRkcmVzczogU3RyaW5nLFxuICAgICAgICBzdGF0ZTogU3RyaW5nLFxuICAgICAgICBjb3VudHJ5OiBTdHJpbmcsXG4gICAgICAgIHppcDogU3RyaW5nLFxuICAgICAgICBwcm9maWxlX2ltYWdlOiBTdHJpbmcsXG4gICAgICAgIGxvZ2luX3R5cGU6IFN0cmluZ1xuICAgICAgICAvKlxuICAgICAgICAgICAgU3R1ZGVudDogcmVsYXRpb25zaGlwIHRvIHVzZXIgYXMgYW4gZW5yb2xsZWQgcGVyc29uXG4gICAgICAgICAgICAvPz8/PzogcHJvZHVjdEFkbWluOiBoYXMgY29udHJvbCBvdmVyIGEgcHJvZHVjdCwgb25lIG9yIG1vcmUgcGVybWlzc2lvbnMgb24gYSBwcm9kdWN0XG4gICAgXG4gICAgICAgICovXG4gICAgfSlcbik7XG5cbm1vZHVsZS5leHBvcnRzID0gVXNlcjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLElBQUksR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQ3ZCLE1BQU0sRUFDTixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNoQkMsUUFBUSxFQUFFQyxNQUFNO0VBQ2hCQyxLQUFLLEVBQUVELE1BQU07RUFDYkUsUUFBUSxFQUFFRixNQUFNO0VBQ2hCRyxVQUFVLEVBQUVILE1BQU07RUFDbEJJLFNBQVMsRUFBRUosTUFBTTtFQUNqQkssT0FBTyxFQUFFTCxNQUFNO0VBQ2ZNLEtBQUssRUFBRU4sTUFBTTtFQUNiTyxPQUFPLEVBQUVQLE1BQU07RUFDZlEsR0FBRyxFQUFFUixNQUFNO0VBQ1hTLGFBQWEsRUFBRVQsTUFBTTtFQUNyQlUsVUFBVSxFQUFFVjtFQUNaO0FBQ1I7QUFDQTtBQUNBO0FBRUksQ0FBQyxDQUNMLENBQUM7O0FBRURXLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHaEIsSUFBSSJ9","map":{"version":3,"names":["mongoose","require","User","model","Schema","username","String","email","password","first_name","last_name","address","state","country","zip","profile_image","login_type","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/models/","sources":["user.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\n\nconst User = mongoose.model(\n    \"User\",\n    new mongoose.Schema({\n        username: String,\n        email: String,\n        password: String,\n        first_name: String,\n        last_name: String,\n        address: String,\n        state: String,\n        country: String,\n        zip: String,\n        profile_image: String,\n        login_type: String\n        /*\n            Student: relationship to user as an enrolled person\n            /????: productAdmin: has control over a product, one or more permissions on a product\n    \n        */\n    })\n);\n\nmodule.exports = User;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,IAAI,GAAGF,QAAQ,CAACG,KAAK,CACvB,MAAM,EACN,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,QAAQ,EAAEC,MAAM;EAChBC,KAAK,EAAED,MAAM;EACbE,QAAQ,EAAEF,MAAM;EAChBG,UAAU,EAAEH,MAAM;EAClBI,SAAS,EAAEJ,MAAM;EACjBK,OAAO,EAAEL,MAAM;EACfM,KAAK,EAAEN,MAAM;EACbO,OAAO,EAAEP,MAAM;EACfQ,GAAG,EAAER,MAAM;EACXS,aAAa,EAAET,MAAM;EACrBU,UAAU,EAAEV;EACZ;AACR;AACA;AACA;AAEI,CAAC,CACL,CAAC;;AAEDW,MAAM,CAACC,OAAO,GAAGhB,IAAI"}},"mtime":1697752512299},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/blog/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/blog/models/post.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Post.js\nconst mongoose = require(\"mongoose\");\nconst Post = mongoose.model(\"Post\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Post;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQb3N0IiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImNvbnRlbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL2Jsb2cvbW9kZWxzLyIsInNvdXJjZXMiOlsicG9zdC5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvUG9zdC5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IFBvc3QgPSBtb25nb29zZS5tb2RlbChcbiAgXCJQb3N0XCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHRpdGxlOiBTdHJpbmcsXG4gICAgY29udGVudDogU3RyaW5nLFxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICB9KVxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQb3N0O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxJQUFJLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUN6QixNQUFNLEVBQ04sSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDbEJDLEtBQUssRUFBRUMsTUFBTTtFQUNiQyxPQUFPLEVBQUVEO0VBQ1Q7QUFDRixDQUFDLENBQ0gsQ0FBQzs7QUFFREUsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLElBQUkifQ==","map":{"version":3,"names":["mongoose","require","Post","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/blog/models/","sources":["post.model.js"],"sourcesContent":["// models/Post.js\nconst mongoose = require(\"mongoose\");\n\nconst Post = mongoose.model(\n  \"Post\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Post;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,IAAI,GAAGF,QAAQ,CAACG,KAAK,CACzB,MAAM,EACN,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,IAAI"}},"mtime":1701882818639},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/blog/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/blog/models/post_category.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/PostCategory.js\nconst mongoose = require(\"mongoose\");\nconst PostCategory = mongoose.model(\"PostCategory\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = PostCategory;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQb3N0Q2F0ZWdvcnkiLCJtb2RlbCIsIlNjaGVtYSIsInRpdGxlIiwiU3RyaW5nIiwiY29udGVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvYmxvZy9tb2RlbHMvIiwic291cmNlcyI6WyJwb3N0X2NhdGVnb3J5Lm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9Qb3N0Q2F0ZWdvcnkuanNcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuXG5jb25zdCBQb3N0Q2F0ZWdvcnkgPSBtb25nb29zZS5tb2RlbChcbiAgXCJQb3N0Q2F0ZWdvcnlcIixcbiAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgdGl0bGU6IFN0cmluZyxcbiAgICBjb250ZW50OiBTdHJpbmcsXG4gICAgLy8gQWRkIGFueSBvdGhlciBmaWVsZHMgYXMgbmVlZGVkXG4gIH0pXG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvc3RDYXRlZ29yeTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsWUFBWSxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDakMsY0FBYyxFQUNkLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2xCQyxLQUFLLEVBQUVDLE1BQU07RUFDYkMsT0FBTyxFQUFFRDtFQUNUO0FBQ0YsQ0FBQyxDQUNILENBQUM7O0FBRURFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxZQUFZIn0=","map":{"version":3,"names":["mongoose","require","PostCategory","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/blog/models/","sources":["post_category.model.js"],"sourcesContent":["// models/PostCategory.js\nconst mongoose = require(\"mongoose\");\n\nconst PostCategory = mongoose.model(\n  \"PostCategory\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = PostCategory;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,YAAY,GAAGF,QAAQ,CAACG,KAAK,CACjC,cAAc,EACd,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,YAAY"}},"mtime":1701882804619},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/product.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst productSchema = new mongoose.Schema({\n  name: String,\n  description: String,\n  price: Number,\n  availability: Boolean,\n  category: [],\n  // e.g., 'Apparel',\n  variants: [{\n    attributes: [{\n      name: String,\n      // e.g., 'color'\n      value: String // e.g., 'red'\n    }, {\n      name: String,\n      // e.g., 'size'\n      value: String // e.g., 'medium'\n    }, {\n      name: String,\n      // e.g., 'image'\n      value: String // e.g., src of image\n    }],\n\n    stock: Number\n  }],\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nconst Product = mongoose.model('Product', productSchema);\nmodule.exports = Product;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJwcm9kdWN0U2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsIlN0cmluZyIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJOdW1iZXIiLCJhdmFpbGFiaWxpdHkiLCJCb29sZWFuIiwiY2F0ZWdvcnkiLCJ2YXJpYW50cyIsImF0dHJpYnV0ZXMiLCJ2YWx1ZSIsInN0b2NrIiwiY3JlYXRlZEF0IiwidHlwZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0IiwiUHJvZHVjdCIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9lY29tbWVyY2UvbW9kZWxzLyIsInNvdXJjZXMiOlsicHJvZHVjdC5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IHByb2R1Y3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBuYW1lOiBTdHJpbmcsXHJcbiAgZGVzY3JpcHRpb246IFN0cmluZyxcclxuICBwcmljZTogTnVtYmVyLFxyXG4gIGF2YWlsYWJpbGl0eTogQm9vbGVhbixcclxuICBjYXRlZ29yeTogW10sIC8vIGUuZy4sICdBcHBhcmVsJyxcclxuICB2YXJpYW50czogW1xyXG4gICAge1xyXG4gICAgICBhdHRyaWJ1dGVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogU3RyaW5nLCAvLyBlLmcuLCAnY29sb3InXHJcbiAgICAgICAgICB2YWx1ZTogU3RyaW5nLCAvLyBlLmcuLCAncmVkJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogU3RyaW5nLCAvLyBlLmcuLCAnc2l6ZSdcclxuICAgICAgICAgIHZhbHVlOiBTdHJpbmcsIC8vIGUuZy4sICdtZWRpdW0nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBuYW1lOiBTdHJpbmcsIC8vIGUuZy4sICdpbWFnZSdcclxuICAgICAgICAgIHZhbHVlOiBTdHJpbmcsIC8vIGUuZy4sIHNyYyBvZiBpbWFnZVxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIHN0b2NrOiBOdW1iZXIsXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXHJcbiAgdXBkYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXHJcbn0pO1xyXG5cclxuY29uc3QgUHJvZHVjdCA9IG1vbmdvb3NlLm1vZGVsKCdQcm9kdWN0JywgcHJvZHVjdFNjaGVtYSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByb2R1Y3Q7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsYUFBYSxHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBTSxDQUFDO0VBQ3hDQyxJQUFJLEVBQUVDLE1BQU07RUFDWkMsV0FBVyxFQUFFRCxNQUFNO0VBQ25CRSxLQUFLLEVBQUVDLE1BQU07RUFDYkMsWUFBWSxFQUFFQyxPQUFPO0VBQ3JCQyxRQUFRLEVBQUUsRUFBRTtFQUFFO0VBQ2RDLFFBQVEsRUFBRSxDQUNSO0lBQ0VDLFVBQVUsRUFBRSxDQUNWO01BQ0VULElBQUksRUFBRUMsTUFBTTtNQUFFO01BQ2RTLEtBQUssRUFBRVQsTUFBTSxDQUFFO0lBQ2pCLENBQUMsRUFDRDtNQUNFRCxJQUFJLEVBQUVDLE1BQU07TUFBRTtNQUNkUyxLQUFLLEVBQUVULE1BQU0sQ0FBRTtJQUNqQixDQUFDLEVBQ0Q7TUFDRUQsSUFBSSxFQUFFQyxNQUFNO01BQUU7TUFDZFMsS0FBSyxFQUFFVCxNQUFNLENBQUU7SUFDakIsQ0FBQyxDQUNGOztJQUNEVSxLQUFLLEVBQUVQO0VBQ1QsQ0FBQyxDQUNGO0VBQ0RRLFNBQVMsRUFBRTtJQUFFQyxJQUFJLEVBQUVDLElBQUk7SUFBRUMsT0FBTyxFQUFFRCxJQUFJLENBQUNFO0VBQUksQ0FBQztFQUM1Q0MsU0FBUyxFQUFFO0lBQUVKLElBQUksRUFBRUMsSUFBSTtJQUFFQyxPQUFPLEVBQUVELElBQUksQ0FBQ0U7RUFBSTtBQUM3QyxDQUFDLENBQUM7QUFFRixNQUFNRSxPQUFPLEdBQUd0QixRQUFRLENBQUN1QixLQUFLLENBQUMsU0FBUyxFQUFFckIsYUFBYSxDQUFDO0FBRXhEc0IsTUFBTSxDQUFDQyxPQUFPLEdBQUdILE9BQU8ifQ==","map":{"version":3,"names":["mongoose","require","productSchema","Schema","name","String","description","price","Number","availability","Boolean","category","variants","attributes","value","stock","createdAt","type","Date","default","now","updatedAt","Product","model","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["product.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst productSchema = new mongoose.Schema({\r\n  name: String,\r\n  description: String,\r\n  price: Number,\r\n  availability: Boolean,\r\n  category: [], // e.g., 'Apparel',\r\n  variants: [\r\n    {\r\n      attributes: [\r\n        {\r\n          name: String, // e.g., 'color'\r\n          value: String, // e.g., 'red'\r\n        },\r\n        {\r\n          name: String, // e.g., 'size'\r\n          value: String, // e.g., 'medium'\r\n        },\r\n        {\r\n          name: String, // e.g., 'image'\r\n          value: String, // e.g., src of image\r\n        },\r\n      ],\r\n      stock: Number,\r\n    },\r\n  ],\r\n  createdAt: { type: Date, default: Date.now },\r\n  updatedAt: { type: Date, default: Date.now },\r\n});\r\n\r\nconst Product = mongoose.model('Product', productSchema);\r\n\r\nmodule.exports = Product;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,aAAa,GAAG,IAAIF,QAAQ,CAACG,MAAM,CAAC;EACxCC,IAAI,EAAEC,MAAM;EACZC,WAAW,EAAED,MAAM;EACnBE,KAAK,EAAEC,MAAM;EACbC,YAAY,EAAEC,OAAO;EACrBC,QAAQ,EAAE,EAAE;EAAE;EACdC,QAAQ,EAAE,CACR;IACEC,UAAU,EAAE,CACV;MACET,IAAI,EAAEC,MAAM;MAAE;MACdS,KAAK,EAAET,MAAM,CAAE;IACjB,CAAC,EACD;MACED,IAAI,EAAEC,MAAM;MAAE;MACdS,KAAK,EAAET,MAAM,CAAE;IACjB,CAAC,EACD;MACED,IAAI,EAAEC,MAAM;MAAE;MACdS,KAAK,EAAET,MAAM,CAAE;IACjB,CAAC,CACF;;IACDU,KAAK,EAAEP;EACT,CAAC,CACF;EACDQ,SAAS,EAAE;IAAEC,IAAI,EAAEC,IAAI;IAAEC,OAAO,EAAED,IAAI,CAACE;EAAI,CAAC;EAC5CC,SAAS,EAAE;IAAEJ,IAAI,EAAEC,IAAI;IAAEC,OAAO,EAAED,IAAI,CAACE;EAAI;AAC7C,CAAC,CAAC;AAEF,MAAME,OAAO,GAAGtB,QAAQ,CAACuB,KAAK,CAAC,SAAS,EAAErB,aAAa,CAAC;AAExDsB,MAAM,CAACC,OAAO,GAAGH,OAAO"}},"mtime":1700505751464},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/product_permissions.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Product_Permissions = mongoose.model(\"Product_Permissions\", new mongoose.Schema({\n  notes: String,\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  product_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Product\"\n  },\n  permissions: String,\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Product_Permissions;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQcm9kdWN0X1Blcm1pc3Npb25zIiwibW9kZWwiLCJTY2hlbWEiLCJub3RlcyIsIlN0cmluZyIsInVzZXJfaWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInByb2R1Y3RfaWQiLCJwZXJtaXNzaW9ucyIsInN0YXR1cyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvZWNvbW1lcmNlL21vZGVscy8iLCJzb3VyY2VzIjpbInByb2R1Y3RfcGVybWlzc2lvbnMubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XHJcblxyXG5jb25zdCBQcm9kdWN0X1Blcm1pc3Npb25zID0gbW9uZ29vc2UubW9kZWwoXHJcbiAgICBcIlByb2R1Y3RfUGVybWlzc2lvbnNcIixcclxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgICAgIG5vdGVzOiBTdHJpbmcsXHJcbiAgICAgICAgdXNlcl9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJVc2VyXCIgfSxcclxuICAgICAgICBwcm9kdWN0X2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlByb2R1Y3RcIiB9LFxyXG4gICAgICAgIHBlcm1pc3Npb25zOiBTdHJpbmcsXHJcbiAgICAgICAgc3RhdHVzOiBTdHJpbmcsXHJcbiAgICAgICAgY3JlYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH0sXHJcbiAgICAgICAgdXBkYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH1cclxuICAgIH0pXHJcbik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByb2R1Y3RfUGVybWlzc2lvbnM7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsbUJBQW1CLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUN0QyxxQkFBcUIsRUFDckIsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDaEJDLEtBQUssRUFBRUMsTUFBTTtFQUNiQyxPQUFPLEVBQUU7SUFBRUMsSUFBSSxFQUFFUixRQUFRLENBQUNJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFPLENBQUM7RUFDOURDLFVBQVUsRUFBRTtJQUFFSixJQUFJLEVBQUVSLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVUsQ0FBQztFQUNwRUUsV0FBVyxFQUFFUCxNQUFNO0VBQ25CUSxNQUFNLEVBQUVSLE1BQU07RUFDZFMsU0FBUyxFQUFHO0lBQUVQLElBQUksRUFBRVIsUUFBUSxDQUFDSSxNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUSxDQUFDO0VBQ2xFSyxTQUFTLEVBQUc7SUFBRVIsSUFBSSxFQUFFUixRQUFRLENBQUNJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRO0FBQ3JFLENBQUMsQ0FDTCxDQUFDO0FBRURNLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHaEIsbUJBQW1CIn0=","map":{"version":3,"names":["mongoose","require","Product_Permissions","model","Schema","notes","String","user_id","type","Types","ObjectId","ref","product_id","permissions","status","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["product_permissions.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Product_Permissions = mongoose.model(\r\n    \"Product_Permissions\",\r\n    new mongoose.Schema({\r\n        notes: String,\r\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\r\n        product_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Product\" },\r\n        permissions: String,\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Product_Permissions;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,mBAAmB,GAAGF,QAAQ,CAACG,KAAK,CACtC,qBAAqB,EACrB,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAE;IAAEC,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DC,UAAU,EAAE;IAAEJ,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAU,CAAC;EACpEE,WAAW,EAAEP,MAAM;EACnBQ,MAAM,EAAER,MAAM;EACdS,SAAS,EAAG;IAAEP,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEK,SAAS,EAAG;IAAER,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGhB,mBAAmB"}},"mtime":1697752512311},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/transaction.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Transaction.js\nconst mongoose = require(\"mongoose\");\nconst Transaction = mongoose.model(\"Transaction\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Transaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJUcmFuc2FjdGlvbiIsIm1vZGVsIiwiU2NoZW1hIiwidGl0bGUiLCJTdHJpbmciLCJjb250ZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9lY29tbWVyY2UvbW9kZWxzLyIsInNvdXJjZXMiOlsidHJhbnNhY3Rpb24ubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbW9kZWxzL1RyYW5zYWN0aW9uLmpzXHJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5cclxuY29uc3QgVHJhbnNhY3Rpb24gPSBtb25nb29zZS5tb2RlbChcclxuICBcIlRyYW5zYWN0aW9uXCIsXHJcbiAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICB0aXRsZTogU3RyaW5nLFxyXG4gICAgY29udGVudDogU3RyaW5nLFxyXG4gICAgLy8gQWRkIGFueSBvdGhlciBmaWVsZHMgYXMgbmVlZGVkXHJcbiAgfSlcclxuKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb247XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsV0FBVyxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDaEMsYUFBYSxFQUNiLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2xCQyxLQUFLLEVBQUVDLE1BQU07RUFDYkMsT0FBTyxFQUFFRDtFQUNUO0FBQ0YsQ0FBQyxDQUNILENBQUM7O0FBRURFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHUCxXQUFXIn0=","map":{"version":3,"names":["mongoose","require","Transaction","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["transaction.model.js"],"sourcesContent":["// models/Transaction.js\r\nconst mongoose = require(\"mongoose\");\r\n\r\nconst Transaction = mongoose.model(\r\n  \"Transaction\",\r\n  new mongoose.Schema({\r\n    title: String,\r\n    content: String,\r\n    // Add any other fields as needed\r\n  })\r\n);\r\n\r\nmodule.exports = Transaction;\r\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,WAAW,GAAGF,QAAQ,CAACG,KAAK,CAChC,aAAa,EACb,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,WAAW"}},"mtime":1701882963600},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/purchase.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Purchase.js\nconst mongoose = require(\"mongoose\");\nconst Purchase = mongoose.model(\"Purchase\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Purchase;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQdXJjaGFzZSIsIm1vZGVsIiwiU2NoZW1hIiwidGl0bGUiLCJTdHJpbmciLCJjb250ZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9lY29tbWVyY2UvbW9kZWxzLyIsInNvdXJjZXMiOlsicHVyY2hhc2UubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbW9kZWxzL1B1cmNoYXNlLmpzXG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcblxuY29uc3QgUHVyY2hhc2UgPSBtb25nb29zZS5tb2RlbChcbiAgXCJQdXJjaGFzZVwiLFxuICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICB0aXRsZTogU3RyaW5nLFxuICAgIGNvbnRlbnQ6IFN0cmluZyxcbiAgICAvLyBBZGQgYW55IG90aGVyIGZpZWxkcyBhcyBuZWVkZWRcbiAgfSlcbik7XG5cbm1vZHVsZS5leHBvcnRzID0gUHVyY2hhc2U7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLFFBQVEsR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQzdCLFVBQVUsRUFDVixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNsQkMsS0FBSyxFQUFFQyxNQUFNO0VBQ2JDLE9BQU8sRUFBRUQ7RUFDVDtBQUNGLENBQUMsQ0FDSCxDQUFDOztBQUVERSxNQUFNLENBQUNDLE9BQU8sR0FBR1AsUUFBUSJ9","map":{"version":3,"names":["mongoose","require","Purchase","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["purchase.model.js"],"sourcesContent":["// models/Purchase.js\nconst mongoose = require(\"mongoose\");\n\nconst Purchase = mongoose.model(\n  \"Purchase\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Purchase;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,KAAK,CAC7B,UAAU,EACV,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,QAAQ"}},"mtime":1701882890659},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/commerce_category.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/CommerceCategory.js\nconst mongoose = require(\"mongoose\");\nconst CommerceCategory = mongoose.model(\"CommerceCategory\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = CommerceCategory;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJDb21tZXJjZUNhdGVnb3J5IiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImNvbnRlbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL2Vjb21tZXJjZS9tb2RlbHMvIiwic291cmNlcyI6WyJjb21tZXJjZV9jYXRlZ29yeS5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvQ29tbWVyY2VDYXRlZ29yeS5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IENvbW1lcmNlQ2F0ZWdvcnkgPSBtb25nb29zZS5tb2RlbChcbiAgXCJDb21tZXJjZUNhdGVnb3J5XCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHRpdGxlOiBTdHJpbmcsXG4gICAgY29udGVudDogU3RyaW5nLFxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICB9KVxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb21tZXJjZUNhdGVnb3J5O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxnQkFBZ0IsR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQ3JDLGtCQUFrQixFQUNsQixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNsQkMsS0FBSyxFQUFFQyxNQUFNO0VBQ2JDLE9BQU8sRUFBRUQ7RUFDVDtBQUNGLENBQUMsQ0FDSCxDQUFDOztBQUVERSxNQUFNLENBQUNDLE9BQU8sR0FBR1AsZ0JBQWdCIn0=","map":{"version":3,"names":["mongoose","require","CommerceCategory","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["commerce_category.model.js"],"sourcesContent":["// models/CommerceCategory.js\nconst mongoose = require(\"mongoose\");\n\nconst CommerceCategory = mongoose.model(\n  \"CommerceCategory\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = CommerceCategory;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,gBAAgB,GAAGF,QAAQ,CAACG,KAAK,CACrC,kBAAkB,EAClB,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,gBAAgB"}},"mtime":1701882863335},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/shipment.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Shipment.js\nconst mongoose = require(\"mongoose\");\nconst Shipment = mongoose.model(\"Shipment\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Shipment;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTaGlwbWVudCIsIm1vZGVsIiwiU2NoZW1hIiwidGl0bGUiLCJTdHJpbmciLCJjb250ZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9lY29tbWVyY2UvbW9kZWxzLyIsInNvdXJjZXMiOlsic2hpcG1lbnQubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbW9kZWxzL1NoaXBtZW50LmpzXG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcblxuY29uc3QgU2hpcG1lbnQgPSBtb25nb29zZS5tb2RlbChcbiAgXCJTaGlwbWVudFwiLFxuICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICB0aXRsZTogU3RyaW5nLFxuICAgIGNvbnRlbnQ6IFN0cmluZyxcbiAgICAvLyBBZGQgYW55IG90aGVyIGZpZWxkcyBhcyBuZWVkZWRcbiAgfSlcbik7XG5cbm1vZHVsZS5leHBvcnRzID0gU2hpcG1lbnQ7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLFFBQVEsR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQzdCLFVBQVUsRUFDVixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNsQkMsS0FBSyxFQUFFQyxNQUFNO0VBQ2JDLE9BQU8sRUFBRUQ7RUFDVDtBQUNGLENBQUMsQ0FDSCxDQUFDOztBQUVERSxNQUFNLENBQUNDLE9BQU8sR0FBR1AsUUFBUSJ9","map":{"version":3,"names":["mongoose","require","Shipment","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["shipment.model.js"],"sourcesContent":["// models/Shipment.js\nconst mongoose = require(\"mongoose\");\n\nconst Shipment = mongoose.model(\n  \"Shipment\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Shipment;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,KAAK,CAC7B,UAAU,EACV,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,QAAQ"}},"mtime":1701882942836},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/variation.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Variation.js\nconst mongoose = require(\"mongoose\");\nconst Variation = mongoose.model(\"Variation\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Variation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJWYXJpYXRpb24iLCJtb2RlbCIsIlNjaGVtYSIsInRpdGxlIiwiU3RyaW5nIiwiY29udGVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvZWNvbW1lcmNlL21vZGVscy8iLCJzb3VyY2VzIjpbInZhcmlhdGlvbi5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvVmFyaWF0aW9uLmpzXG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcblxuY29uc3QgVmFyaWF0aW9uID0gbW9uZ29vc2UubW9kZWwoXG4gIFwiVmFyaWF0aW9uXCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHRpdGxlOiBTdHJpbmcsXG4gICAgY29udGVudDogU3RyaW5nLFxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICB9KVxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWYXJpYXRpb247XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLFNBQVMsR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQzlCLFdBQVcsRUFDWCxJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNsQkMsS0FBSyxFQUFFQyxNQUFNO0VBQ2JDLE9BQU8sRUFBRUQ7RUFDVDtBQUNGLENBQUMsQ0FDSCxDQUFDOztBQUVERSxNQUFNLENBQUNDLE9BQU8sR0FBR1AsU0FBUyJ9","map":{"version":3,"names":["mongoose","require","Variation","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["variation.model.js"],"sourcesContent":["// models/Variation.js\nconst mongoose = require(\"mongoose\");\n\nconst Variation = mongoose.model(\n  \"Variation\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Variation;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,SAAS,GAAGF,QAAQ,CAACG,KAAK,CAC9B,WAAW,EACX,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,SAAS"}},"mtime":1701882975520},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/service.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Service.js\nconst mongoose = require(\"mongoose\");\nconst Service = mongoose.model(\"Service\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Service;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTZXJ2aWNlIiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImNvbnRlbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL2Vjb21tZXJjZS9tb2RlbHMvIiwic291cmNlcyI6WyJzZXJ2aWNlLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9TZXJ2aWNlLmpzXG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcblxuY29uc3QgU2VydmljZSA9IG1vbmdvb3NlLm1vZGVsKFxuICBcIlNlcnZpY2VcIixcbiAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgdGl0bGU6IFN0cmluZyxcbiAgICBjb250ZW50OiBTdHJpbmcsXG4gICAgLy8gQWRkIGFueSBvdGhlciBmaWVsZHMgYXMgbmVlZGVkXG4gIH0pXG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLE9BQU8sR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQzVCLFNBQVMsRUFDVCxJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNsQkMsS0FBSyxFQUFFQyxNQUFNO0VBQ2JDLE9BQU8sRUFBRUQ7RUFDVDtBQUNGLENBQUMsQ0FDSCxDQUFDOztBQUVERSxNQUFNLENBQUNDLE9BQU8sR0FBR1AsT0FBTyJ9","map":{"version":3,"names":["mongoose","require","Service","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/models/","sources":["service.model.js"],"sourcesContent":["// models/Service.js\nconst mongoose = require(\"mongoose\");\n\nconst Service = mongoose.model(\n  \"Service\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Service;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,OAAO,GAAGF,QAAQ,CAACG,KAAK,CAC5B,SAAS,EACT,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,OAAO"}},"mtime":1701882907320},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/attendance.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Attendance = mongoose.model(\"Attendance\", new mongoose.Schema({\n  notes: String,\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  session_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Session\"\n  },\n  attendance_start: Number,\n  attendance_end: Number,\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Attendance;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJBdHRlbmRhbmNlIiwibW9kZWwiLCJTY2hlbWEiLCJub3RlcyIsIlN0cmluZyIsInVzZXJfaWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInNlc3Npb25faWQiLCJhdHRlbmRhbmNlX3N0YXJ0IiwiTnVtYmVyIiwiYXR0ZW5kYW5jZV9lbmQiLCJzdGF0dXMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NjaGVkdWxpbmcvbW9kZWxzLyIsInNvdXJjZXMiOlsiYXR0ZW5kYW5jZS5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IEF0dGVuZGFuY2UgPSBtb25nb29zZS5tb2RlbChcclxuICAgIFwiQXR0ZW5kYW5jZVwiLFxyXG4gICAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICAgICAgbm90ZXM6IFN0cmluZyxcclxuICAgICAgICB1c2VyX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlVzZXJcIiB9LFxyXG4gICAgICAgIHNlc3Npb25faWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiU2Vzc2lvblwiIH0sXHJcbiAgICAgICAgYXR0ZW5kYW5jZV9zdGFydDogTnVtYmVyLFxyXG4gICAgICAgIGF0dGVuZGFuY2VfZW5kOiBOdW1iZXIsXHJcbiAgICAgICAgc3RhdHVzOiBTdHJpbmcsXHJcbiAgICAgICAgY3JlYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH0sXHJcbiAgICAgICAgdXBkYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH1cclxuICAgIH0pXHJcbik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEF0dGVuZGFuY2U7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsVUFBVSxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDN0IsWUFBWSxFQUNaLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxLQUFLLEVBQUVDLE1BQU07RUFDYkMsT0FBTyxFQUFFO0lBQUVDLElBQUksRUFBRVIsUUFBUSxDQUFDSSxNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBTyxDQUFDO0VBQzlEQyxVQUFVLEVBQUU7SUFBRUosSUFBSSxFQUFFUixRQUFRLENBQUNJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFVLENBQUM7RUFDcEVFLGdCQUFnQixFQUFFQyxNQUFNO0VBQ3hCQyxjQUFjLEVBQUVELE1BQU07RUFDdEJFLE1BQU0sRUFBRVYsTUFBTTtFQUNkVyxTQUFTLEVBQUc7SUFBRVQsSUFBSSxFQUFFUixRQUFRLENBQUNJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUM7RUFDbEVPLFNBQVMsRUFBRztJQUFFVixJQUFJLEVBQUVSLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVE7QUFDckUsQ0FBQyxDQUNMLENBQUM7QUFFRFEsTUFBTSxDQUFDQyxPQUFPLEdBQUdsQixVQUFVIn0=","map":{"version":3,"names":["mongoose","require","Attendance","model","Schema","notes","String","user_id","type","Types","ObjectId","ref","session_id","attendance_start","Number","attendance_end","status","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/","sources":["attendance.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Attendance = mongoose.model(\r\n    \"Attendance\",\r\n    new mongoose.Schema({\r\n        notes: String,\r\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\r\n        session_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Session\" },\r\n        attendance_start: Number,\r\n        attendance_end: Number,\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Attendance;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,UAAU,GAAGF,QAAQ,CAACG,KAAK,CAC7B,YAAY,EACZ,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAE;IAAEC,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DC,UAAU,EAAE;IAAEJ,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAU,CAAC;EACpEE,gBAAgB,EAAEC,MAAM;EACxBC,cAAc,EAAED,MAAM;EACtBE,MAAM,EAAEV,MAAM;EACdW,SAAS,EAAG;IAAET,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEO,SAAS,EAAG;IAAEV,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDQ,MAAM,CAACC,OAAO,GAAGlB,UAAU"}},"mtime":1697752512315},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/enrollment.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Enrollment = mongoose.model(\"Enrollment\", new mongoose.Schema({\n  enrolled: Boolean,\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  product_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Product\"\n  },\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Enrollment;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJFbnJvbGxtZW50IiwibW9kZWwiLCJTY2hlbWEiLCJlbnJvbGxlZCIsIkJvb2xlYW4iLCJ1c2VyX2lkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJwcm9kdWN0X2lkIiwic3RhdHVzIiwiU3RyaW5nIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zY2hlZHVsaW5nL21vZGVscy8iLCJzb3VyY2VzIjpbImVucm9sbG1lbnQubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XHJcblxyXG5jb25zdCBFbnJvbGxtZW50ID0gbW9uZ29vc2UubW9kZWwoXHJcbiAgICBcIkVucm9sbG1lbnRcIixcclxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgICAgIGVucm9sbGVkOiBCb29sZWFuLFxyXG4gICAgICAgIHVzZXJfaWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiVXNlclwiIH0sXHJcbiAgICAgICAgcHJvZHVjdF9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJQcm9kdWN0XCIgfSxcclxuICAgICAgICBzdGF0dXM6IFN0cmluZyxcclxuICAgICAgICBjcmVhdGVkQXQ6ICB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkV2ZW50XCIgfSxcclxuICAgICAgICB1cGRhdGVkQXQ6ICB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkV2ZW50XCIgfVxyXG4gICAgfSlcclxuKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRW5yb2xsbWVudDsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUM3QixZQUFZLEVBQ1osSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDaEJDLFFBQVEsRUFBRUMsT0FBTztFQUNqQkMsT0FBTyxFQUFFO0lBQUVDLElBQUksRUFBRVIsUUFBUSxDQUFDSSxNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBTyxDQUFDO0VBQzlEQyxVQUFVLEVBQUU7SUFBRUosSUFBSSxFQUFFUixRQUFRLENBQUNJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFVLENBQUM7RUFDcEVFLE1BQU0sRUFBRUMsTUFBTTtFQUNkQyxTQUFTLEVBQUc7SUFBRVAsSUFBSSxFQUFFUixRQUFRLENBQUNJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUM7RUFDbEVLLFNBQVMsRUFBRztJQUFFUixJQUFJLEVBQUVSLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVE7QUFDckUsQ0FBQyxDQUNMLENBQUM7QUFFRE0sTUFBTSxDQUFDQyxPQUFPLEdBQUdoQixVQUFVIn0=","map":{"version":3,"names":["mongoose","require","Enrollment","model","Schema","enrolled","Boolean","user_id","type","Types","ObjectId","ref","product_id","status","String","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/","sources":["enrollment.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Enrollment = mongoose.model(\r\n    \"Enrollment\",\r\n    new mongoose.Schema({\r\n        enrolled: Boolean,\r\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\r\n        product_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Product\" },\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Enrollment;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,UAAU,GAAGF,QAAQ,CAACG,KAAK,CAC7B,YAAY,EACZ,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,QAAQ,EAAEC,OAAO;EACjBC,OAAO,EAAE;IAAEC,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DC,UAAU,EAAE;IAAEJ,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAU,CAAC;EACpEE,MAAM,EAAEC,MAAM;EACdC,SAAS,EAAG;IAAEP,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEK,SAAS,EAAG;IAAER,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGhB,UAAU"}},"mtime":1697752512319},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/session.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Session = mongoose.model(\"Session\", new mongoose.Schema({\n  title: String,\n  notes: String,\n  product_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Product\"\n  },\n  active: Boolean,\n  start: String,\n  end: String,\n  actual_start: Number,\n  actual_end: Number,\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Session;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTZXNzaW9uIiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsIm5vdGVzIiwicHJvZHVjdF9pZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiYWN0aXZlIiwiQm9vbGVhbiIsInN0YXJ0IiwiZW5kIiwiYWN0dWFsX3N0YXJ0IiwiTnVtYmVyIiwiYWN0dWFsX2VuZCIsInN0YXR1cyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2NoZWR1bGluZy9tb2RlbHMvIiwic291cmNlcyI6WyJzZXNzaW9uLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5cclxuY29uc3QgU2Vzc2lvbiA9IG1vbmdvb3NlLm1vZGVsKFxyXG4gICAgXCJTZXNzaW9uXCIsXHJcbiAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgICAgICB0aXRsZTogU3RyaW5nLFxyXG4gICAgICAgIG5vdGVzOiBTdHJpbmcsXHJcbiAgICAgICAgcHJvZHVjdF9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJQcm9kdWN0XCIgfSxcclxuICAgICAgICBhY3RpdmU6IEJvb2xlYW4sXHJcbiAgICAgICAgc3RhcnQ6IFN0cmluZyxcclxuICAgICAgICBlbmQ6IFN0cmluZyxcclxuICAgICAgICBhY3R1YWxfc3RhcnQ6IE51bWJlcixcclxuICAgICAgICBhY3R1YWxfZW5kOiBOdW1iZXIsXHJcbiAgICAgICAgc3RhdHVzOiBTdHJpbmcsXHJcbiAgICAgICAgY3JlYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH0sXHJcbiAgICAgICAgdXBkYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH1cclxuICAgIH0pXHJcbik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNlc3Npb247Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsT0FBTyxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDMUIsU0FBUyxFQUNULElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxLQUFLLEVBQUVDLE1BQU07RUFDYkMsS0FBSyxFQUFFRCxNQUFNO0VBQ2JFLFVBQVUsRUFBRTtJQUFFQyxJQUFJLEVBQUVULFFBQVEsQ0FBQ0ksTUFBTSxDQUFDTSxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVUsQ0FBQztFQUNwRUMsTUFBTSxFQUFFQyxPQUFPO0VBQ2ZDLEtBQUssRUFBRVQsTUFBTTtFQUNiVSxHQUFHLEVBQUVWLE1BQU07RUFDWFcsWUFBWSxFQUFFQyxNQUFNO0VBQ3BCQyxVQUFVLEVBQUVELE1BQU07RUFDbEJFLE1BQU0sRUFBRWQsTUFBTTtFQUNkZSxTQUFTLEVBQUc7SUFBRVosSUFBSSxFQUFFVCxRQUFRLENBQUNJLE1BQU0sQ0FBQ00sS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUM7RUFDbEVVLFNBQVMsRUFBRztJQUFFYixJQUFJLEVBQUVULFFBQVEsQ0FBQ0ksTUFBTSxDQUFDTSxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVE7QUFDckUsQ0FBQyxDQUNMLENBQUM7QUFFRFcsTUFBTSxDQUFDQyxPQUFPLEdBQUd0QixPQUFPIn0=","map":{"version":3,"names":["mongoose","require","Session","model","Schema","title","String","notes","product_id","type","Types","ObjectId","ref","active","Boolean","start","end","actual_start","Number","actual_end","status","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/","sources":["session.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Session = mongoose.model(\r\n    \"Session\",\r\n    new mongoose.Schema({\r\n        title: String,\r\n        notes: String,\r\n        product_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Product\" },\r\n        active: Boolean,\r\n        start: String,\r\n        end: String,\r\n        actual_start: Number,\r\n        actual_end: Number,\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Session;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,OAAO,GAAGF,QAAQ,CAACG,KAAK,CAC1B,SAAS,EACT,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,KAAK,EAAEC,MAAM;EACbC,KAAK,EAAED,MAAM;EACbE,UAAU,EAAE;IAAEC,IAAI,EAAET,QAAQ,CAACI,MAAM,CAACM,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAU,CAAC;EACpEC,MAAM,EAAEC,OAAO;EACfC,KAAK,EAAET,MAAM;EACbU,GAAG,EAAEV,MAAM;EACXW,YAAY,EAAEC,MAAM;EACpBC,UAAU,EAAED,MAAM;EAClBE,MAAM,EAAEd,MAAM;EACde,SAAS,EAAG;IAAEZ,IAAI,EAAET,QAAQ,CAACI,MAAM,CAACM,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEU,SAAS,EAAG;IAAEb,IAAI,EAAET,QAAQ,CAACI,MAAM,CAACM,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDW,MAAM,CAACC,OAAO,GAAGtB,OAAO"}},"mtime":1697752512319},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/event.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Event.js\nconst mongoose = require(\"mongoose\");\nconst Event = mongoose.model(\"Event\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Event;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJFdmVudCIsIm1vZGVsIiwiU2NoZW1hIiwidGl0bGUiLCJTdHJpbmciLCJjb250ZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zY2hlZHVsaW5nL21vZGVscy8iLCJzb3VyY2VzIjpbImV2ZW50Lm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9FdmVudC5qc1xyXG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IEV2ZW50ID0gbW9uZ29vc2UubW9kZWwoXHJcbiAgXCJFdmVudFwiLFxyXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgdGl0bGU6IFN0cmluZyxcclxuICAgIGNvbnRlbnQ6IFN0cmluZyxcclxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxyXG4gIH0pXHJcbik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLEtBQUssR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQzFCLE9BQU8sRUFDUCxJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNsQkMsS0FBSyxFQUFFQyxNQUFNO0VBQ2JDLE9BQU8sRUFBRUQ7RUFDVDtBQUNGLENBQUMsQ0FDSCxDQUFDOztBQUVERSxNQUFNLENBQUNDLE9BQU8sR0FBR1AsS0FBSyJ9","map":{"version":3,"names":["mongoose","require","Event","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/","sources":["event.model.js"],"sourcesContent":["// models/Event.js\r\nconst mongoose = require(\"mongoose\");\r\n\r\nconst Event = mongoose.model(\r\n  \"Event\",\r\n  new mongoose.Schema({\r\n    title: String,\r\n    content: String,\r\n    // Add any other fields as needed\r\n  })\r\n);\r\n\r\nmodule.exports = Event;\r\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,KAAK,GAAGF,QAAQ,CAACG,KAAK,CAC1B,OAAO,EACP,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,KAAK"}},"mtime":1701883015793},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/booking.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Booking.js\nconst mongoose = require(\"mongoose\");\nconst Booking = mongoose.model(\"Booking\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Booking;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJCb29raW5nIiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImNvbnRlbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NjaGVkdWxpbmcvbW9kZWxzLyIsInNvdXJjZXMiOlsiYm9va2luZy5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvQm9va2luZy5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IEJvb2tpbmcgPSBtb25nb29zZS5tb2RlbChcbiAgXCJCb29raW5nXCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHRpdGxlOiBTdHJpbmcsXG4gICAgY29udGVudDogU3RyaW5nLFxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICB9KVxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCb29raW5nO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxPQUFPLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUM1QixTQUFTLEVBQ1QsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDbEJDLEtBQUssRUFBRUMsTUFBTTtFQUNiQyxPQUFPLEVBQUVEO0VBQ1Q7QUFDRixDQUFDLENBQ0gsQ0FBQzs7QUFFREUsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLE9BQU8ifQ==","map":{"version":3,"names":["mongoose","require","Booking","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/models/","sources":["booking.model.js"],"sourcesContent":["// models/Booking.js\nconst mongoose = require(\"mongoose\");\n\nconst Booking = mongoose.model(\n  \"Booking\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Booking;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,OAAO,GAAGF,QAAQ,CAACG,KAAK,CAC5B,SAAS,EACT,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,OAAO"}},"mtime":1701883000181},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/content.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Content = mongoose.model(\"Content\", new mongoose.Schema({\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Content\"\n  },\n  primary_color: String,\n  secondary_color: String,\n  front_page_image: String,\n  description: String,\n  site_image: String,\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Content;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJDb250ZW50IiwibW9kZWwiLCJTY2hlbWEiLCJzaXRlX2lkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJwcmltYXJ5X2NvbG9yIiwiU3RyaW5nIiwic2Vjb25kYXJ5X2NvbG9yIiwiZnJvbnRfcGFnZV9pbWFnZSIsImRlc2NyaXB0aW9uIiwic2l0ZV9pbWFnZSIsInN0YXR1cyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9tb2RlbHMvIiwic291cmNlcyI6WyJjb250ZW50Lm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5cclxuY29uc3QgQ29udGVudCA9IG1vbmdvb3NlLm1vZGVsKFxyXG4gICAgXCJDb250ZW50XCIsXHJcbiAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgICAgICBzaXRlX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkNvbnRlbnRcIiB9LFxyXG4gICAgICAgIHByaW1hcnlfY29sb3I6IFN0cmluZyxcclxuICAgICAgICBzZWNvbmRhcnlfY29sb3I6IFN0cmluZyxcclxuICAgICAgICBmcm9udF9wYWdlX2ltYWdlOiBTdHJpbmcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFN0cmluZyxcclxuICAgICAgICBzaXRlX2ltYWdlOiBTdHJpbmcsXHJcbiAgICAgICAgc3RhdHVzOiBTdHJpbmcsXHJcbiAgICAgICAgY3JlYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH0sXHJcbiAgICAgICAgdXBkYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH1cclxuICAgIH0pXHJcbik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRlbnQ7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsT0FBTyxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDMUIsU0FBUyxFQUNULElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxPQUFPLEVBQUU7SUFBRUMsSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFVLENBQUM7RUFDakVDLGFBQWEsRUFBRUMsTUFBTTtFQUNyQkMsZUFBZSxFQUFFRCxNQUFNO0VBQ3ZCRSxnQkFBZ0IsRUFBRUYsTUFBTTtFQUN4QkcsV0FBVyxFQUFFSCxNQUFNO0VBQ25CSSxVQUFVLEVBQUVKLE1BQU07RUFDbEJLLE1BQU0sRUFBRUwsTUFBTTtFQUNkTSxTQUFTLEVBQUc7SUFBRVgsSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUM7RUFDbEVTLFNBQVMsRUFBRztJQUFFWixJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVE7QUFDckUsQ0FBQyxDQUNMLENBQUM7QUFFRFUsTUFBTSxDQUFDQyxPQUFPLEdBQUdsQixPQUFPIn0=","map":{"version":3,"names":["mongoose","require","Content","model","Schema","site_id","type","Types","ObjectId","ref","primary_color","String","secondary_color","front_page_image","description","site_image","status","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["content.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Content = mongoose.model(\r\n    \"Content\",\r\n    new mongoose.Schema({\r\n        site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Content\" },\r\n        primary_color: String,\r\n        secondary_color: String,\r\n        front_page_image: String,\r\n        description: String,\r\n        site_image: String,\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Content;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,OAAO,GAAGF,QAAQ,CAACG,KAAK,CAC1B,SAAS,EACT,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,OAAO,EAAE;IAAEC,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAU,CAAC;EACjEC,aAAa,EAAEC,MAAM;EACrBC,eAAe,EAAED,MAAM;EACvBE,gBAAgB,EAAEF,MAAM;EACxBG,WAAW,EAAEH,MAAM;EACnBI,UAAU,EAAEJ,MAAM;EAClBK,MAAM,EAAEL,MAAM;EACdM,SAAS,EAAG;IAAEX,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClES,SAAS,EAAG;IAAEZ,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDU,MAAM,CAACC,OAAO,GAAGlB,OAAO"}},"mtime":1697752512327},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/form.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Form = mongoose.model(\"Form\", new mongoose.Schema({\n  type: String,\n  groupings: [{\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Grouping\"\n  }],\n  content: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Form;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJGb3JtIiwibW9kZWwiLCJTY2hlbWEiLCJ0eXBlIiwiU3RyaW5nIiwiZ3JvdXBpbmdzIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImNvbnRlbnQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NpdGUvbW9kZWxzLyIsInNvdXJjZXMiOlsiZm9ybS5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IEZvcm0gPSBtb25nb29zZS5tb2RlbChcclxuICAgIFwiRm9ybVwiLFxyXG4gICAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIGdyb3VwaW5nczogW3sgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiR3JvdXBpbmdcIiB9XSxcclxuICAgICAgICBjb250ZW50OiBTdHJpbmcsXHJcbiAgICAgICAgY3JlYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH0sXHJcbiAgICAgICAgdXBkYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH1cclxuICAgIH0pXHJcbik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEZvcm07Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsSUFBSSxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDdkIsTUFBTSxFQUNOLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxJQUFJLEVBQUVDLE1BQU07RUFDWkMsU0FBUyxFQUFFLENBQUM7SUFBRUYsSUFBSSxFQUFFTCxRQUFRLENBQUNJLE1BQU0sQ0FBQ0ksS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFXLENBQUMsQ0FBQztFQUN0RUMsT0FBTyxFQUFFTCxNQUFNO0VBQ2ZNLFNBQVMsRUFBRztJQUFFUCxJQUFJLEVBQUVMLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSSxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVEsQ0FBQztFQUNsRUcsU0FBUyxFQUFHO0lBQUVSLElBQUksRUFBRUwsUUFBUSxDQUFDSSxNQUFNLENBQUNJLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUTtBQUNyRSxDQUFDLENBQ0wsQ0FBQztBQUVESSxNQUFNLENBQUNDLE9BQU8sR0FBR2IsSUFBSSJ9","map":{"version":3,"names":["mongoose","require","Form","model","Schema","type","String","groupings","Types","ObjectId","ref","content","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["form.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Form = mongoose.model(\r\n    \"Form\",\r\n    new mongoose.Schema({\r\n        type: String,\r\n        groupings: [{ type: mongoose.Schema.Types.ObjectId, ref: \"Grouping\" }],\r\n        content: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Form;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,IAAI,GAAGF,QAAQ,CAACG,KAAK,CACvB,MAAM,EACN,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,IAAI,EAAEC,MAAM;EACZC,SAAS,EAAE,CAAC;IAAEF,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAW,CAAC,CAAC;EACtEC,OAAO,EAAEL,MAAM;EACfM,SAAS,EAAG;IAAEP,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEG,SAAS,EAAG;IAAER,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGb,IAAI"}},"mtime":1697752512327},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/grouping.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Grouping = mongoose.model(\"Grouping\", new mongoose.Schema({\n  type: String,\n  questions: [{\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Question\"\n  }],\n  content: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Grouping;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJHcm91cGluZyIsIm1vZGVsIiwiU2NoZW1hIiwidHlwZSIsIlN0cmluZyIsInF1ZXN0aW9ucyIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJjb250ZW50IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL21vZGVscy8iLCJzb3VyY2VzIjpbImdyb3VwaW5nLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5cclxuY29uc3QgR3JvdXBpbmcgPSBtb25nb29zZS5tb2RlbChcclxuICAgIFwiR3JvdXBpbmdcIixcclxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICBxdWVzdGlvbnM6IFt7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlF1ZXN0aW9uXCIgfV0sXHJcbiAgICAgICAgY29udGVudDogU3RyaW5nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9XHJcbiAgICB9KVxyXG4pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cGluZzsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxRQUFRLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUMzQixVQUFVLEVBQ1YsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDaEJDLElBQUksRUFBRUMsTUFBTTtFQUNaQyxTQUFTLEVBQUUsQ0FBQztJQUFFRixJQUFJLEVBQUVMLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSSxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVcsQ0FBQyxDQUFDO0VBQ3RFQyxPQUFPLEVBQUVMLE1BQU07RUFDZk0sU0FBUyxFQUFHO0lBQUVQLElBQUksRUFBRUwsUUFBUSxDQUFDSSxNQUFNLENBQUNJLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUSxDQUFDO0VBQ2xFRyxTQUFTLEVBQUc7SUFBRVIsSUFBSSxFQUFFTCxRQUFRLENBQUNJLE1BQU0sQ0FBQ0ksS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRO0FBQ3JFLENBQUMsQ0FDTCxDQUFDO0FBRURJLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHYixRQUFRIn0=","map":{"version":3,"names":["mongoose","require","Grouping","model","Schema","type","String","questions","Types","ObjectId","ref","content","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["grouping.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Grouping = mongoose.model(\r\n    \"Grouping\",\r\n    new mongoose.Schema({\r\n        type: String,\r\n        questions: [{ type: mongoose.Schema.Types.ObjectId, ref: \"Question\" }],\r\n        content: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Grouping;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,KAAK,CAC3B,UAAU,EACV,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,IAAI,EAAEC,MAAM;EACZC,SAAS,EAAE,CAAC;IAAEF,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAW,CAAC,CAAC;EACtEC,OAAO,EAAEL,MAAM;EACfM,SAAS,EAAG;IAAEP,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEG,SAAS,EAAG;IAAER,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGb,QAAQ"}},"mtime":1697752512327},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/option.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Option = mongoose.model(\"Option\", new mongoose.Schema({\n  type: String,\n  content: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Option;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJPcHRpb24iLCJtb2RlbCIsIlNjaGVtYSIsInR5cGUiLCJTdHJpbmciLCJjb250ZW50IiwiY3JlYXRlZEF0IiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInVwZGF0ZWRBdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9tb2RlbHMvIiwic291cmNlcyI6WyJvcHRpb24ubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XHJcblxyXG5jb25zdCBPcHRpb24gPSBtb25nb29zZS5tb2RlbChcclxuICAgIFwiT3B0aW9uXCIsXHJcbiAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgY29udGVudDogU3RyaW5nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9XHJcbiAgICB9KVxyXG4pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBPcHRpb247Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsTUFBTSxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDekIsUUFBUSxFQUNSLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxJQUFJLEVBQUVDLE1BQU07RUFDWkMsT0FBTyxFQUFFRCxNQUFNO0VBQ2ZFLFNBQVMsRUFBRztJQUFFSCxJQUFJLEVBQUVMLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVEsQ0FBQztFQUNsRUMsU0FBUyxFQUFHO0lBQUVQLElBQUksRUFBRUwsUUFBUSxDQUFDSSxNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUTtBQUNyRSxDQUFDLENBQ0wsQ0FBQztBQUVERSxNQUFNLENBQUNDLE9BQU8sR0FBR1osTUFBTSJ9","map":{"version":3,"names":["mongoose","require","Option","model","Schema","type","String","content","createdAt","Types","ObjectId","ref","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["option.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Option = mongoose.model(\r\n    \"Option\",\r\n    new mongoose.Schema({\r\n        type: String,\r\n        content: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Option;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,MAAM,GAAGF,QAAQ,CAACG,KAAK,CACzB,QAAQ,EACR,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,IAAI,EAAEC,MAAM;EACZC,OAAO,EAAED,MAAM;EACfE,SAAS,EAAG;IAAEH,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEC,SAAS,EAAG;IAAEP,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDE,MAAM,CAACC,OAAO,GAAGZ,MAAM"}},"mtime":1697752512327},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/question.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Question = mongoose.model(\"Question\", new mongoose.Schema({\n  type: String,\n  options: [{\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Option\"\n  }],\n  content: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Question;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJRdWVzdGlvbiIsIm1vZGVsIiwiU2NoZW1hIiwidHlwZSIsIlN0cmluZyIsIm9wdGlvbnMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiY29udGVudCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9tb2RlbHMvIiwic291cmNlcyI6WyJxdWVzdGlvbi5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcclxuXHJcbmNvbnN0IFF1ZXN0aW9uID0gbW9uZ29vc2UubW9kZWwoXHJcbiAgICBcIlF1ZXN0aW9uXCIsXHJcbiAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgb3B0aW9uczogW3sgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiT3B0aW9uXCIgfV0sXHJcbiAgICAgICAgY29udGVudDogU3RyaW5nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9XHJcbiAgICB9KVxyXG4pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBRdWVzdGlvbjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxRQUFRLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUMzQixVQUFVLEVBQ1YsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDaEJDLElBQUksRUFBRUMsTUFBTTtFQUNaQyxPQUFPLEVBQUUsQ0FBQztJQUFFRixJQUFJLEVBQUVMLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSSxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVMsQ0FBQyxDQUFDO0VBQ2xFQyxPQUFPLEVBQUVMLE1BQU07RUFDZk0sU0FBUyxFQUFHO0lBQUVQLElBQUksRUFBRUwsUUFBUSxDQUFDSSxNQUFNLENBQUNJLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUSxDQUFDO0VBQ2xFRyxTQUFTLEVBQUc7SUFBRVIsSUFBSSxFQUFFTCxRQUFRLENBQUNJLE1BQU0sQ0FBQ0ksS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRO0FBQ3JFLENBQUMsQ0FDTCxDQUFDO0FBRURJLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHYixRQUFRIn0=","map":{"version":3,"names":["mongoose","require","Question","model","Schema","type","String","options","Types","ObjectId","ref","content","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["question.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Question = mongoose.model(\r\n    \"Question\",\r\n    new mongoose.Schema({\r\n        type: String,\r\n        options: [{ type: mongoose.Schema.Types.ObjectId, ref: \"Option\" }],\r\n        content: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Question;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,KAAK,CAC3B,UAAU,EACV,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,IAAI,EAAEC,MAAM;EACZC,OAAO,EAAE,CAAC;IAAEF,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAS,CAAC,CAAC;EAClEC,OAAO,EAAEL,MAAM;EACfM,SAAS,EAAG;IAAEP,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEG,SAAS,EAAG;IAAER,IAAI,EAAEL,QAAQ,CAACI,MAAM,CAACI,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAGb,QAAQ"}},"mtime":1697752512331},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/site.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Site = mongoose.model(\"Site\", new mongoose.Schema({\n  title: String,\n  domain: String,\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  folder_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Site;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTaXRlIiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImRvbWFpbiIsInN0YXR1cyIsImNyZWF0ZWRBdCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidXBkYXRlZEF0IiwiZm9sZGVyX2lkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL21vZGVscy8iLCJzb3VyY2VzIjpbInNpdGUubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XHJcblxyXG5jb25zdCBTaXRlID0gbW9uZ29vc2UubW9kZWwoXHJcbiAgICBcIlNpdGVcIixcclxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgICAgIHRpdGxlOiBTdHJpbmcsXHJcbiAgICAgICAgZG9tYWluOiBTdHJpbmcsXHJcbiAgICAgICAgc3RhdHVzOiBTdHJpbmcsXHJcbiAgICAgICAgY3JlYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH0sXHJcbiAgICAgICAgdXBkYXRlZEF0OiAgeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJFdmVudFwiIH0sXHJcbiAgICAgICAgZm9sZGVyX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkV2ZW50XCIgfSxcclxuICAgIH0pXHJcbik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNpdGU7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsSUFBSSxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDdkIsTUFBTSxFQUNOLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxLQUFLLEVBQUVDLE1BQU07RUFDYkMsTUFBTSxFQUFFRCxNQUFNO0VBQ2RFLE1BQU0sRUFBRUYsTUFBTTtFQUNkRyxTQUFTLEVBQUc7SUFBRUMsSUFBSSxFQUFFVixRQUFRLENBQUNJLE1BQU0sQ0FBQ08sS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUM7RUFDbEVDLFNBQVMsRUFBRztJQUFFSixJQUFJLEVBQUVWLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDTyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVEsQ0FBQztFQUNsRUUsU0FBUyxFQUFFO0lBQUVMLElBQUksRUFBRVYsUUFBUSxDQUFDSSxNQUFNLENBQUNPLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUTtBQUNwRSxDQUFDLENBQ0wsQ0FBQztBQUVERyxNQUFNLENBQUNDLE9BQU8sR0FBR2YsSUFBSSJ9","map":{"version":3,"names":["mongoose","require","Site","model","Schema","title","String","domain","status","createdAt","type","Types","ObjectId","ref","updatedAt","folder_id","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["site.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Site = mongoose.model(\r\n    \"Site\",\r\n    new mongoose.Schema({\r\n        title: String,\r\n        domain: String,\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        folder_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n    })\r\n);\r\n\r\nmodule.exports = Site;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,IAAI,GAAGF,QAAQ,CAACG,KAAK,CACvB,MAAM,EACN,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,KAAK,EAAEC,MAAM;EACbC,MAAM,EAAED,MAAM;EACdE,MAAM,EAAEF,MAAM;EACdG,SAAS,EAAG;IAAEC,IAAI,EAAEV,QAAQ,CAACI,MAAM,CAACO,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEC,SAAS,EAAG;IAAEJ,IAAI,EAAEV,QAAQ,CAACI,MAAM,CAACO,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEE,SAAS,EAAE;IAAEL,IAAI,EAAEV,QAAQ,CAACI,MAAM,CAACO,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACpE,CAAC,CACL,CAAC;AAEDG,MAAM,CAACC,OAAO,GAAGf,IAAI"}},"mtime":1697752512331},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/site_product_availability.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst Site_Product_Availability = mongoose.model(\"Site_Product_Availability\", new mongoose.Schema({\n  product_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Product\"\n  },\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Site\"\n  },\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = Site_Product_Availability;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTaXRlX1Byb2R1Y3RfQXZhaWxhYmlsaXR5IiwibW9kZWwiLCJTY2hlbWEiLCJwcm9kdWN0X2lkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJzaXRlX2lkIiwic3RhdHVzIiwiU3RyaW5nIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL21vZGVscy8iLCJzb3VyY2VzIjpbInNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XHJcblxyXG5jb25zdCBTaXRlX1Byb2R1Y3RfQXZhaWxhYmlsaXR5ID0gbW9uZ29vc2UubW9kZWwoXHJcbiAgICBcIlNpdGVfUHJvZHVjdF9BdmFpbGFiaWxpdHlcIixcclxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgICAgIHByb2R1Y3RfaWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiUHJvZHVjdFwiIH0sXHJcbiAgICAgICAgc2l0ZV9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJTaXRlXCIgfSxcclxuICAgICAgICBzdGF0dXM6IFN0cmluZyxcclxuICAgICAgICBjcmVhdGVkQXQ6ICB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkV2ZW50XCIgfSxcclxuICAgICAgICB1cGRhdGVkQXQ6ICB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkV2ZW50XCIgfVxyXG4gICAgfSlcclxuKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2l0ZV9Qcm9kdWN0X0F2YWlsYWJpbGl0eTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyx5QkFBeUIsR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQzVDLDJCQUEyQixFQUMzQixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNoQkMsVUFBVSxFQUFFO0lBQUVDLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBVSxDQUFDO0VBQ3BFQyxPQUFPLEVBQUU7SUFBRUosSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFPLENBQUM7RUFDOURFLE1BQU0sRUFBRUMsTUFBTTtFQUNkQyxTQUFTLEVBQUc7SUFBRVAsSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUM7RUFDbEVLLFNBQVMsRUFBRztJQUFFUixJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVE7QUFDckUsQ0FBQyxDQUNMLENBQUM7QUFFRE0sTUFBTSxDQUFDQyxPQUFPLEdBQUdkLHlCQUF5QiJ9","map":{"version":3,"names":["mongoose","require","Site_Product_Availability","model","Schema","product_id","type","Types","ObjectId","ref","site_id","status","String","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["site_product_availability.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst Site_Product_Availability = mongoose.model(\r\n    \"Site_Product_Availability\",\r\n    new mongoose.Schema({\r\n        product_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Product\" },\r\n        site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Site\" },\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = Site_Product_Availability;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,yBAAyB,GAAGF,QAAQ,CAACG,KAAK,CAC5C,2BAA2B,EAC3B,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,UAAU,EAAE;IAAEC,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAU,CAAC;EACpEC,OAAO,EAAE;IAAEJ,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DE,MAAM,EAAEC,MAAM;EACdC,SAAS,EAAG;IAAEP,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEK,SAAS,EAAG;IAAER,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGd,yBAAyB"}},"mtime":1697752512331},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/user_form_response.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst UserFormResponse = mongoose.model(\"UserFormResponse\", new mongoose.Schema({\n  form_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Form\"\n  },\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  question_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Question\"\n  },\n  option_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Option\"\n  },\n  response: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = UserFormResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJVc2VyRm9ybVJlc3BvbnNlIiwibW9kZWwiLCJTY2hlbWEiLCJmb3JtX2lkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ1c2VyX2lkIiwicXVlc3Rpb25faWQiLCJvcHRpb25faWQiLCJyZXNwb25zZSIsIlN0cmluZyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9tb2RlbHMvIiwic291cmNlcyI6WyJ1c2VyX2Zvcm1fcmVzcG9uc2UubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XHJcblxyXG5jb25zdCBVc2VyRm9ybVJlc3BvbnNlID0gbW9uZ29vc2UubW9kZWwoXHJcbiAgICBcIlVzZXJGb3JtUmVzcG9uc2VcIixcclxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gICAgICAgIGZvcm1faWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRm9ybVwiIH0sXHJcbiAgICAgICAgdXNlcl9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJVc2VyXCIgfSxcclxuICAgICAgICBxdWVzdGlvbl9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJRdWVzdGlvblwiIH0sXHJcbiAgICAgICAgb3B0aW9uX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIk9wdGlvblwiIH0sXHJcbiAgICAgICAgcmVzcG9uc2U6IFN0cmluZyxcclxuICAgICAgICBjcmVhdGVkQXQ6ICB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkV2ZW50XCIgfSxcclxuICAgICAgICB1cGRhdGVkQXQ6ICB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIkV2ZW50XCIgfVxyXG4gICAgfSlcclxuKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXNlckZvcm1SZXNwb25zZTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxnQkFBZ0IsR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQ25DLGtCQUFrQixFQUNsQixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNoQkMsT0FBTyxFQUFFO0lBQUVDLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBTyxDQUFDO0VBQzlEQyxPQUFPLEVBQUU7SUFBRUosSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFPLENBQUM7RUFDOURFLFdBQVcsRUFBRTtJQUFFTCxJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVcsQ0FBQztFQUN0RUcsU0FBUyxFQUFFO0lBQUVOLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUyxDQUFDO0VBQ2xFSSxRQUFRLEVBQUVDLE1BQU07RUFDaEJDLFNBQVMsRUFBRztJQUFFVCxJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVEsQ0FBQztFQUNsRU8sU0FBUyxFQUFHO0lBQUVWLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUTtBQUNyRSxDQUFDLENBQ0wsQ0FBQztBQUVEUSxNQUFNLENBQUNDLE9BQU8sR0FBR2hCLGdCQUFnQiJ9","map":{"version":3,"names":["mongoose","require","UserFormResponse","model","Schema","form_id","type","Types","ObjectId","ref","user_id","question_id","option_id","response","String","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["user_form_response.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst UserFormResponse = mongoose.model(\r\n    \"UserFormResponse\",\r\n    new mongoose.Schema({\r\n        form_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Form\" },\r\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\r\n        question_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Question\" },\r\n        option_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Option\" },\r\n        response: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = UserFormResponse;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,gBAAgB,GAAGF,QAAQ,CAACG,KAAK,CACnC,kBAAkB,EAClB,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,OAAO,EAAE;IAAEC,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DC,OAAO,EAAE;IAAEJ,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DE,WAAW,EAAE;IAAEL,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAW,CAAC;EACtEG,SAAS,EAAE;IAAEN,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAS,CAAC;EAClEI,QAAQ,EAAEC,MAAM;EAChBC,SAAS,EAAG;IAAET,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEO,SAAS,EAAG;IAAEV,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDQ,MAAM,CAACC,OAAO,GAAGhB,gBAAgB"}},"mtime":1697752512331},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/user_site_availability.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst User_Site_Availability = mongoose.model(\"User_Site_Availability\", new mongoose.Schema({\n  availability: Boolean,\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Site\"\n  },\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}));\nmodule.exports = User_Site_Availability;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJVc2VyX1NpdGVfQXZhaWxhYmlsaXR5IiwibW9kZWwiLCJTY2hlbWEiLCJhdmFpbGFiaWxpdHkiLCJCb29sZWFuIiwidXNlcl9pZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwic2l0ZV9pZCIsInN0YXR1cyIsIlN0cmluZyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9tb2RlbHMvIiwic291cmNlcyI6WyJ1c2VyX3NpdGVfYXZhaWxhYmlsaXR5Lm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5cclxuY29uc3QgVXNlcl9TaXRlX0F2YWlsYWJpbGl0eSA9IG1vbmdvb3NlLm1vZGVsKFxyXG4gICAgXCJVc2VyX1NpdGVfQXZhaWxhYmlsaXR5XCIsXHJcbiAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgICAgICBhdmFpbGFiaWxpdHk6IEJvb2xlYW4sXHJcbiAgICAgICAgdXNlcl9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJVc2VyXCIgfSxcclxuICAgICAgICBzaXRlX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlNpdGVcIiB9LFxyXG4gICAgICAgIHN0YXR1czogU3RyaW5nLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9XHJcbiAgICB9KVxyXG4pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVc2VyX1NpdGVfQXZhaWxhYmlsaXR5OyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLHNCQUFzQixHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDekMsd0JBQXdCLEVBQ3hCLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxZQUFZLEVBQUVDLE9BQU87RUFDckJDLE9BQU8sRUFBRTtJQUFFQyxJQUFJLEVBQUVSLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQU8sQ0FBQztFQUM5REMsT0FBTyxFQUFFO0lBQUVKLElBQUksRUFBRVIsUUFBUSxDQUFDSSxNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBTyxDQUFDO0VBQzlERSxNQUFNLEVBQUVDLE1BQU07RUFDZEMsU0FBUyxFQUFHO0lBQUVQLElBQUksRUFBRVIsUUFBUSxDQUFDSSxNQUFNLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBUSxDQUFDO0VBQ2xFSyxTQUFTLEVBQUc7SUFBRVIsSUFBSSxFQUFFUixRQUFRLENBQUNJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRO0FBQ3JFLENBQUMsQ0FDTCxDQUFDO0FBRURNLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHaEIsc0JBQXNCIn0=","map":{"version":3,"names":["mongoose","require","User_Site_Availability","model","Schema","availability","Boolean","user_id","type","Types","ObjectId","ref","site_id","status","String","createdAt","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["user_site_availability.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\r\n\r\nconst User_Site_Availability = mongoose.model(\r\n    \"User_Site_Availability\",\r\n    new mongoose.Schema({\r\n        availability: Boolean,\r\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\r\n        site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Site\" },\r\n        status: String,\r\n        createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\r\n        updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" }\r\n    })\r\n);\r\n\r\nmodule.exports = User_Site_Availability;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,sBAAsB,GAAGF,QAAQ,CAACG,KAAK,CACzC,wBAAwB,EACxB,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,YAAY,EAAEC,OAAO;EACrBC,OAAO,EAAE;IAAEC,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DC,OAAO,EAAE;IAAEJ,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DE,MAAM,EAAEC,MAAM;EACdC,SAAS,EAAG;IAAEP,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEK,SAAS,EAAG;IAAER,IAAI,EAAER,QAAQ,CAACI,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACrE,CAAC,CACL,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGhB,sBAAsB"}},"mtime":1697752512331},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/permission.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Permission.js\nconst mongoose = require(\"mongoose\");\nconst Permission = mongoose.model(\"Permission\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Permission;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQZXJtaXNzaW9uIiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImNvbnRlbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NpdGUvbW9kZWxzLyIsInNvdXJjZXMiOlsicGVybWlzc2lvbi5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvUGVybWlzc2lvbi5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IFBlcm1pc3Npb24gPSBtb25nb29zZS5tb2RlbChcbiAgXCJQZXJtaXNzaW9uXCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHRpdGxlOiBTdHJpbmcsXG4gICAgY29udGVudDogU3RyaW5nLFxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICB9KVxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQZXJtaXNzaW9uO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUMvQixZQUFZLEVBQ1osSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDbEJDLEtBQUssRUFBRUMsTUFBTTtFQUNiQyxPQUFPLEVBQUVEO0VBQ1Q7QUFDRixDQUFDLENBQ0gsQ0FBQzs7QUFFREUsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLFVBQVUifQ==","map":{"version":3,"names":["mongoose","require","Permission","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["permission.model.js"],"sourcesContent":["// models/Permission.js\nconst mongoose = require(\"mongoose\");\n\nconst Permission = mongoose.model(\n  \"Permission\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Permission;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,UAAU,GAAGF,QAAQ,CAACG,KAAK,CAC/B,YAAY,EACZ,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,UAAU"}},"mtime":1701881867956},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/navigation.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Navigation.js\nconst mongoose = require(\"mongoose\");\nconst Navigation = mongoose.model(\"Navigation\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Navigation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJOYXZpZ2F0aW9uIiwibW9kZWwiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImNvbnRlbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NpdGUvbW9kZWxzLyIsInNvdXJjZXMiOlsibmF2aWdhdGlvbi5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvTmF2aWdhdGlvbi5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IE5hdmlnYXRpb24gPSBtb25nb29zZS5tb2RlbChcbiAgXCJOYXZpZ2F0aW9uXCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHRpdGxlOiBTdHJpbmcsXG4gICAgY29udGVudDogU3RyaW5nLFxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICB9KVxuKTtcblxubW9kdWxlLmV4cG9ydHMgPSBOYXZpZ2F0aW9uO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUMvQixZQUFZLEVBQ1osSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDbEJDLEtBQUssRUFBRUMsTUFBTTtFQUNiQyxPQUFPLEVBQUVEO0VBQ1Q7QUFDRixDQUFDLENBQ0gsQ0FBQzs7QUFFREUsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLFVBQVUifQ==","map":{"version":3,"names":["mongoose","require","Navigation","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["navigation.model.js"],"sourcesContent":["// models/Navigation.js\nconst mongoose = require(\"mongoose\");\n\nconst Navigation = mongoose.model(\n  \"Navigation\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Navigation;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,UAAU,GAAGF,QAAQ,CAACG,KAAK,CAC/B,YAAY,EACZ,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,UAAU"}},"mtime":1701885990987},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/theme.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Theme.js\nconst mongoose = require(\"mongoose\");\nconst Theme = mongoose.model(\"Theme\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Theme;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJUaGVtZSIsIm1vZGVsIiwiU2NoZW1hIiwidGl0bGUiLCJTdHJpbmciLCJjb250ZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL21vZGVscy8iLCJzb3VyY2VzIjpbInRoZW1lLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9UaGVtZS5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IFRoZW1lID0gbW9uZ29vc2UubW9kZWwoXG4gIFwiVGhlbWVcIixcbiAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgdGl0bGU6IFN0cmluZyxcbiAgICBjb250ZW50OiBTdHJpbmcsXG4gICAgLy8gQWRkIGFueSBvdGhlciBmaWVsZHMgYXMgbmVlZGVkXG4gIH0pXG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRoZW1lO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxLQUFLLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUMxQixPQUFPLEVBQ1AsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDbEJDLEtBQUssRUFBRUMsTUFBTTtFQUNiQyxPQUFPLEVBQUVEO0VBQ1Q7QUFDRixDQUFDLENBQ0gsQ0FBQzs7QUFFREUsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLEtBQUsifQ==","map":{"version":3,"names":["mongoose","require","Theme","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["theme.model.js"],"sourcesContent":["// models/Theme.js\nconst mongoose = require(\"mongoose\");\n\nconst Theme = mongoose.model(\n  \"Theme\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Theme;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,KAAK,GAAGF,QAAQ,CAACG,KAAK,CAC1B,OAAO,EACP,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,KAAK"}},"mtime":1701886219806},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/style.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Style.js\nconst mongoose = require(\"mongoose\");\nconst Style = mongoose.model(\"Style\", new mongoose.Schema({\n  title: String,\n  content: String\n  // Add any other fields as needed\n}));\n\nmodule.exports = Style;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTdHlsZSIsIm1vZGVsIiwiU2NoZW1hIiwidGl0bGUiLCJTdHJpbmciLCJjb250ZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL21vZGVscy8iLCJzb3VyY2VzIjpbInN0eWxlLm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1vZGVscy9TdHlsZS5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IFN0eWxlID0gbW9uZ29vc2UubW9kZWwoXG4gIFwiU3R5bGVcIixcbiAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgdGl0bGU6IFN0cmluZyxcbiAgICBjb250ZW50OiBTdHJpbmcsXG4gICAgLy8gQWRkIGFueSBvdGhlciBmaWVsZHMgYXMgbmVlZGVkXG4gIH0pXG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0eWxlO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxLQUFLLEdBQUdGLFFBQVEsQ0FBQ0csS0FBSyxDQUMxQixPQUFPLEVBQ1AsSUFBSUgsUUFBUSxDQUFDSSxNQUFNLENBQUM7RUFDbEJDLEtBQUssRUFBRUMsTUFBTTtFQUNiQyxPQUFPLEVBQUVEO0VBQ1Q7QUFDRixDQUFDLENBQ0gsQ0FBQzs7QUFFREUsTUFBTSxDQUFDQyxPQUFPLEdBQUdQLEtBQUsifQ==","map":{"version":3,"names":["mongoose","require","Style","model","Schema","title","String","content","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/models/","sources":["style.model.js"],"sourcesContent":["// models/Style.js\nconst mongoose = require(\"mongoose\");\n\nconst Style = mongoose.model(\n  \"Style\",\n  new mongoose.Schema({\n    title: String,\n    content: String,\n    // Add any other fields as needed\n  })\n);\n\nmodule.exports = Style;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,KAAK,GAAGF,QAAQ,CAACG,KAAK,CAC1B,OAAO,EACP,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAED;EACT;AACF,CAAC,CACH,CAAC;;AAEDE,MAAM,CAACC,OAAO,GAAGP,KAAK"}},"mtime":1701886192337},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/models/file.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\n\n// Files Schema\nconst Files = mongoose.model(\"File\", new mongoose.Schema({\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Site\"\n  },\n  // Reference to the \"Site\" model\n  type: String,\n  name: String,\n  size: Number,\n  uploadProgress: Number,\n  source: String,\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  // Creation date of the file\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  } // Last updated date of the file\n}).pre('save', function (next) {\n  // Check if uploadProgress is not explicitly set (to allow manual updates)\n  if (this.isNew && !this.uploadProgress) {\n    this.uploadProgress = 0;\n  }\n  next();\n}));\nmodule.exports = Files;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJGaWxlcyIsIm1vZGVsIiwiU2NoZW1hIiwic2l0ZV9pZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiU3RyaW5nIiwibmFtZSIsInNpemUiLCJOdW1iZXIiLCJ1cGxvYWRQcm9ncmVzcyIsInNvdXJjZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0IiwicHJlIiwibmV4dCIsImlzTmV3IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zdG9yYWdlL21vZGVscy8iLCJzb3VyY2VzIjpbImZpbGUubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbi8vIEZpbGVzIFNjaGVtYVxuY29uc3QgRmlsZXMgPSBtb25nb29zZS5tb2RlbChcbiAgICBcIkZpbGVcIixcbiAgICBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICAgICAgc2l0ZV9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJTaXRlXCIgfSwgLy8gUmVmZXJlbmNlIHRvIHRoZSBcIlNpdGVcIiBtb2RlbFxuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIG5hbWU6IFN0cmluZyxcbiAgICAgICAgc2l6ZTogTnVtYmVyLFxuICAgICAgICB1cGxvYWRQcm9ncmVzczogTnVtYmVyLFxuICAgICAgICBzb3VyY2U6IFN0cmluZyxcbiAgICAgICAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sIC8vIENyZWF0aW9uIGRhdGUgb2YgdGhlIGZpbGVcbiAgICAgICAgdXBkYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0gLy8gTGFzdCB1cGRhdGVkIGRhdGUgb2YgdGhlIGZpbGVcbiAgICB9KS5wcmUoJ3NhdmUnLCBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICAvLyBDaGVjayBpZiB1cGxvYWRQcm9ncmVzcyBpcyBub3QgZXhwbGljaXRseSBzZXQgKHRvIGFsbG93IG1hbnVhbCB1cGRhdGVzKVxuICAgICAgICBpZiAodGhpcy5pc05ldyAmJiAhdGhpcy51cGxvYWRQcm9ncmVzcykge1xuICAgICAgICAgICAgdGhpcy51cGxvYWRQcm9ncmVzcyA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCgpO1xuICAgIH0pXG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZpbGVzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7O0FBRXBDO0FBQ0EsTUFBTUMsS0FBSyxHQUFHRixRQUFRLENBQUNHLEtBQUssQ0FDeEIsTUFBTSxFQUNOLElBQUlILFFBQVEsQ0FBQ0ksTUFBTSxDQUFDO0VBQ2hCQyxPQUFPLEVBQUU7SUFBRUMsSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFPLENBQUM7RUFBRTtFQUNoRUgsSUFBSSxFQUFFSSxNQUFNO0VBQ1pDLElBQUksRUFBRUQsTUFBTTtFQUNaRSxJQUFJLEVBQUVDLE1BQU07RUFDWkMsY0FBYyxFQUFFRCxNQUFNO0VBQ3RCRSxNQUFNLEVBQUVMLE1BQU07RUFDZE0sU0FBUyxFQUFFO0lBQUVWLElBQUksRUFBRVcsSUFBSTtJQUFFQyxPQUFPLEVBQUVELElBQUksQ0FBQ0U7RUFBSSxDQUFDO0VBQUU7RUFDOUNDLFNBQVMsRUFBRTtJQUFFZCxJQUFJLEVBQUVXLElBQUk7SUFBRUMsT0FBTyxFQUFFRCxJQUFJLENBQUNFO0VBQUksQ0FBQyxDQUFDO0FBQ2pELENBQUMsQ0FBQyxDQUFDRSxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQVVDLElBQUksRUFBRTtFQUMzQjtFQUNBLElBQUksSUFBSSxDQUFDQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUNULGNBQWMsRUFBRTtJQUNwQyxJQUFJLENBQUNBLGNBQWMsR0FBRyxDQUFDO0VBQzNCO0VBQ0FRLElBQUksQ0FBQyxDQUFDO0FBQ1YsQ0FBQyxDQUNMLENBQUM7QUFFREUsTUFBTSxDQUFDQyxPQUFPLEdBQUd2QixLQUFLIn0=","map":{"version":3,"names":["mongoose","require","Files","model","Schema","site_id","type","Types","ObjectId","ref","String","name","size","Number","uploadProgress","source","createdAt","Date","default","now","updatedAt","pre","next","isNew","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/models/","sources":["file.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\n\n// Files Schema\nconst Files = mongoose.model(\n    \"File\",\n    new mongoose.Schema({\n        site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Site\" }, // Reference to the \"Site\" model\n        type: String,\n        name: String,\n        size: Number,\n        uploadProgress: Number,\n        source: String,\n        createdAt: { type: Date, default: Date.now }, // Creation date of the file\n        updatedAt: { type: Date, default: Date.now } // Last updated date of the file\n    }).pre('save', function (next) {\n        // Check if uploadProgress is not explicitly set (to allow manual updates)\n        if (this.isNew && !this.uploadProgress) {\n            this.uploadProgress = 0;\n        }\n        next();\n    })\n);\n\nmodule.exports = Files;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;;AAEpC;AACA,MAAMC,KAAK,GAAGF,QAAQ,CAACG,KAAK,CACxB,MAAM,EACN,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,OAAO,EAAE;IAAEC,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAAE;EAChEH,IAAI,EAAEI,MAAM;EACZC,IAAI,EAAED,MAAM;EACZE,IAAI,EAAEC,MAAM;EACZC,cAAc,EAAED,MAAM;EACtBE,MAAM,EAAEL,MAAM;EACdM,SAAS,EAAE;IAAEV,IAAI,EAAEW,IAAI;IAAEC,OAAO,EAAED,IAAI,CAACE;EAAI,CAAC;EAAE;EAC9CC,SAAS,EAAE;IAAEd,IAAI,EAAEW,IAAI;IAAEC,OAAO,EAAED,IAAI,CAACE;EAAI,CAAC,CAAC;AACjD,CAAC,CAAC,CAACE,GAAG,CAAC,MAAM,EAAE,UAAUC,IAAI,EAAE;EAC3B;EACA,IAAI,IAAI,CAACC,KAAK,IAAI,CAAC,IAAI,CAACT,cAAc,EAAE;IACpC,IAAI,CAACA,cAAc,GAAG,CAAC;EAC3B;EACAQ,IAAI,CAAC,CAAC;AACV,CAAC,CACL,CAAC;AAEDE,MAAM,CAACC,OAAO,GAAGvB,KAAK"}},"mtime":1701369866091},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/models/folder.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\n\n// Folders Schema\nconst Folders = mongoose.model(\"Folder\", new mongoose.Schema({\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Site\"\n  },\n  // Reference to the \"Site\" model\n  user_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"User\"\n  },\n  name: String,\n  // Name of the folder\n  files: [{\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"File\"\n  }],\n  // Array of file references\n  folders: [{\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Folder\"\n  }],\n  // Array of file references        \n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  // Creation date of the folder\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  } // Last updated date of the folder\n}));\n\nmodule.exports = Folders;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJGb2xkZXJzIiwibW9kZWwiLCJTY2hlbWEiLCJzaXRlX2lkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ1c2VyX2lkIiwibmFtZSIsIlN0cmluZyIsImZpbGVzIiwiZm9sZGVycyIsImNyZWF0ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zdG9yYWdlL21vZGVscy8iLCJzb3VyY2VzIjpbImZvbGRlci5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcblxuLy8gRm9sZGVycyBTY2hlbWFcbmNvbnN0IEZvbGRlcnMgPSBtb25nb29zZS5tb2RlbChcbiAgICBcIkZvbGRlclwiLFxuICAgIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgICAgICBzaXRlX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlNpdGVcIiB9LCAvLyBSZWZlcmVuY2UgdG8gdGhlIFwiU2l0ZVwiIG1vZGVsXG4gICAgICAgIHVzZXJfaWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiVXNlclwiIH0sXG4gICAgICAgIG5hbWU6IFN0cmluZywgLy8gTmFtZSBvZiB0aGUgZm9sZGVyXG4gICAgICAgIGZpbGVzOiBbeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJGaWxlXCIgfV0sIC8vIEFycmF5IG9mIGZpbGUgcmVmZXJlbmNlc1xuICAgICAgICBmb2xkZXJzOiBbeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJGb2xkZXJcIiB9XSwgLy8gQXJyYXkgb2YgZmlsZSByZWZlcmVuY2VzICAgICAgICBcbiAgICAgICAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sIC8vIENyZWF0aW9uIGRhdGUgb2YgdGhlIGZvbGRlclxuICAgICAgICB1cGRhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSAvLyBMYXN0IHVwZGF0ZWQgZGF0ZSBvZiB0aGUgZm9sZGVyXG4gICAgfSlcbik7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBGb2xkZXJzOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDOztBQUVwQztBQUNBLE1BQU1DLE9BQU8sR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQzFCLFFBQVEsRUFDUixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNoQkMsT0FBTyxFQUFFO0lBQUVDLElBQUksRUFBRU4sUUFBUSxDQUFDSSxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUU7RUFBTyxDQUFDO0VBQUU7RUFDaEVDLE9BQU8sRUFBRTtJQUFFSixJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQU8sQ0FBQztFQUM5REUsSUFBSSxFQUFFQyxNQUFNO0VBQUU7RUFDZEMsS0FBSyxFQUFFLENBQUM7SUFBRVAsSUFBSSxFQUFFTixRQUFRLENBQUNJLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFPLENBQUMsQ0FBQztFQUFFO0VBQ2hFSyxPQUFPLEVBQUUsQ0FBQztJQUFFUixJQUFJLEVBQUVOLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVMsQ0FBQyxDQUFDO0VBQUU7RUFDcEVNLFNBQVMsRUFBRTtJQUFFVCxJQUFJLEVBQUVVLElBQUk7SUFBRUMsT0FBTyxFQUFFRCxJQUFJLENBQUNFO0VBQUksQ0FBQztFQUFFO0VBQzlDQyxTQUFTLEVBQUU7SUFBRWIsSUFBSSxFQUFFVSxJQUFJO0lBQUVDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRTtFQUFJLENBQUMsQ0FBQztBQUNqRCxDQUFDLENBQ0wsQ0FBQzs7QUFHREUsTUFBTSxDQUFDQyxPQUFPLEdBQUduQixPQUFPIn0=","map":{"version":3,"names":["mongoose","require","Folders","model","Schema","site_id","type","Types","ObjectId","ref","user_id","name","String","files","folders","createdAt","Date","default","now","updatedAt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/models/","sources":["folder.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\n\n// Folders Schema\nconst Folders = mongoose.model(\n    \"Folder\",\n    new mongoose.Schema({\n        site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Site\" }, // Reference to the \"Site\" model\n        user_id: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\n        name: String, // Name of the folder\n        files: [{ type: mongoose.Schema.Types.ObjectId, ref: \"File\" }], // Array of file references\n        folders: [{ type: mongoose.Schema.Types.ObjectId, ref: \"Folder\" }], // Array of file references        \n        createdAt: { type: Date, default: Date.now }, // Creation date of the folder\n        updatedAt: { type: Date, default: Date.now } // Last updated date of the folder\n    })\n);\n\n\nmodule.exports = Folders;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;;AAEpC;AACA,MAAMC,OAAO,GAAGF,QAAQ,CAACG,KAAK,CAC1B,QAAQ,EACR,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAChBC,OAAO,EAAE;IAAEC,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAAE;EAChEC,OAAO,EAAE;IAAEJ,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DE,IAAI,EAAEC,MAAM;EAAE;EACdC,KAAK,EAAE,CAAC;IAAEP,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC,CAAC;EAAE;EAChEK,OAAO,EAAE,CAAC;IAAER,IAAI,EAAEN,QAAQ,CAACI,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAS,CAAC,CAAC;EAAE;EACpEM,SAAS,EAAE;IAAET,IAAI,EAAEU,IAAI;IAAEC,OAAO,EAAED,IAAI,CAACE;EAAI,CAAC;EAAE;EAC9CC,SAAS,EAAE;IAAEb,IAAI,EAAEU,IAAI;IAAEC,OAAO,EAAED,IAAI,CAACE;EAAI,CAAC,CAAC;AACjD,CAAC,CACL,CAAC;;AAGDE,MAAM,CAACC,OAAO,GAAGnB,OAAO"}},"mtime":1701284756229},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/models/site_object.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst {\n  Schema\n} = mongoose;\nconst SiteObjects = mongoose.model(\"Site_Object\", new mongoose.Schema({\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Site\"\n  },\n  id: String,\n  type: String,\n  //Page, Row, Column, Component\n  object_properties: Object,\n  children: [this],\n  status: String,\n  createdAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  },\n  updatedAt: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Event\"\n  }\n}).set('toJSON', {\n  transform: function (doc, ret, options) {\n    ret.id = ret._id;\n    delete ret.__v;\n  }\n}));\nmodule.exports = SiteObjects;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTY2hlbWEiLCJTaXRlT2JqZWN0cyIsIm1vZGVsIiwic2l0ZV9pZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiaWQiLCJTdHJpbmciLCJvYmplY3RfcHJvcGVydGllcyIsIk9iamVjdCIsImNoaWxkcmVuIiwic3RhdHVzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic2V0IiwidHJhbnNmb3JtIiwiZG9jIiwicmV0Iiwib3B0aW9ucyIsIl9pZCIsIl9fdiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZV9idWlsZGVyL21vZGVscy8iLCJzb3VyY2VzIjpbInNpdGVfb2JqZWN0Lm1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuY29uc3QgeyBTY2hlbWEgfSA9IG1vbmdvb3NlO1xuXG5cblxuY29uc3QgU2l0ZU9iamVjdHMgPSBtb25nb29zZS5tb2RlbChcbiAgICBcIlNpdGVfT2JqZWN0XCIsXG4gICAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gICAgc2l0ZV9pZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJTaXRlXCIgfSxcbiAgICBpZDogU3RyaW5nLFxuICAgIHR5cGU6IFN0cmluZywgLy9QYWdlLCBSb3csIENvbHVtbiwgQ29tcG9uZW50XG4gICAgb2JqZWN0X3Byb3BlcnRpZXM6IE9iamVjdCxcbiAgICBjaGlsZHJlbjogW3RoaXNdLFxuICAgIHN0YXR1czogU3RyaW5nLFxuICAgIGNyZWF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9LFxuICAgIHVwZGF0ZWRBdDogIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiRXZlbnRcIiB9LFxuICAgIH0pLnNldCgndG9KU09OJywge1xuICAgICAgICB0cmFuc2Zvcm06IGZ1bmN0aW9uIChkb2MsIHJldCwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0LmlkID0gcmV0Ll9pZDtcbiAgICAgICAgICAgIGRlbGV0ZSByZXQuX192O1xuICAgIH19KVxuKTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFNpdGVPYmplY3RzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTTtFQUFFQztBQUFPLENBQUMsR0FBR0YsUUFBUTtBQUkzQixNQUFNRyxXQUFXLEdBQUdILFFBQVEsQ0FBQ0ksS0FBSyxDQUM5QixhQUFhLEVBQ2IsSUFBSUosUUFBUSxDQUFDRSxNQUFNLENBQUM7RUFDcEJHLE9BQU8sRUFBRTtJQUFFQyxJQUFJLEVBQUVOLFFBQVEsQ0FBQ0UsTUFBTSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQU8sQ0FBQztFQUM5REMsRUFBRSxFQUFFQyxNQUFNO0VBQ1ZMLElBQUksRUFBRUssTUFBTTtFQUFFO0VBQ2RDLGlCQUFpQixFQUFFQyxNQUFNO0VBQ3pCQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUM7RUFDaEJDLE1BQU0sRUFBRUosTUFBTTtFQUNkSyxTQUFTLEVBQUc7SUFBRVYsSUFBSSxFQUFFTixRQUFRLENBQUNFLE1BQU0sQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUM7RUFDbEVRLFNBQVMsRUFBRztJQUFFWCxJQUFJLEVBQUVOLFFBQVEsQ0FBQ0UsTUFBTSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQVE7QUFDakUsQ0FBQyxDQUFDLENBQUNTLEdBQUcsQ0FBQyxRQUFRLEVBQUU7RUFDYkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxPQUFPLEVBQUU7SUFDcENELEdBQUcsQ0FBQ1gsRUFBRSxHQUFHVyxHQUFHLENBQUNFLEdBQUc7SUFDaEIsT0FBT0YsR0FBRyxDQUFDRyxHQUFHO0VBQ3RCO0FBQUMsQ0FBQyxDQUNOLENBQUM7QUFHREMsTUFBTSxDQUFDQyxPQUFPLEdBQUd2QixXQUFXIn0=","map":{"version":3,"names":["mongoose","require","Schema","SiteObjects","model","site_id","type","Types","ObjectId","ref","id","String","object_properties","Object","children","status","createdAt","updatedAt","set","transform","doc","ret","options","_id","__v","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/models/","sources":["site_object.model.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\n\n\nconst SiteObjects = mongoose.model(\n    \"Site_Object\",\n    new mongoose.Schema({\n    site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Site\" },\n    id: String,\n    type: String, //Page, Row, Column, Component\n    object_properties: Object,\n    children: [this],\n    status: String,\n    createdAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\n    updatedAt:  { type: mongoose.Schema.Types.ObjectId, ref: \"Event\" },\n    }).set('toJSON', {\n        transform: function (doc, ret, options) {\n            ret.id = ret._id;\n            delete ret.__v;\n    }})\n);\n\n\nmodule.exports = SiteObjects;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAM;EAAEC;AAAO,CAAC,GAAGF,QAAQ;AAI3B,MAAMG,WAAW,GAAGH,QAAQ,CAACI,KAAK,CAC9B,aAAa,EACb,IAAIJ,QAAQ,CAACE,MAAM,CAAC;EACpBG,OAAO,EAAE;IAAEC,IAAI,EAAEN,QAAQ,CAACE,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DC,EAAE,EAAEC,MAAM;EACVL,IAAI,EAAEK,MAAM;EAAE;EACdC,iBAAiB,EAAEC,MAAM;EACzBC,QAAQ,EAAE,CAAC,IAAI,CAAC;EAChBC,MAAM,EAAEJ,MAAM;EACdK,SAAS,EAAG;IAAEV,IAAI,EAAEN,QAAQ,CAACE,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ,CAAC;EAClEQ,SAAS,EAAG;IAAEX,IAAI,EAAEN,QAAQ,CAACE,MAAM,CAACK,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAQ;AACjE,CAAC,CAAC,CAACS,GAAG,CAAC,QAAQ,EAAE;EACbC,SAAS,EAAE,SAAAA,CAAUC,GAAG,EAAEC,GAAG,EAAEC,OAAO,EAAE;IACpCD,GAAG,CAACX,EAAE,GAAGW,GAAG,CAACE,GAAG;IAChB,OAAOF,GAAG,CAACG,GAAG;EACtB;AAAC,CAAC,CACN,CAAC;AAGDC,MAAM,CAACC,OAAO,GAAGvB,WAAW"}},"mtime":1698252234312},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/models/page.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// models/Page.js\nconst mongoose = require(\"mongoose\");\nconst Page = mongoose.model(\"Page\", new mongoose.Schema({\n  name: String,\n  route: String,\n  layout: Array,\n  style: Object,\n  site_id: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Site\"\n  },\n  status: Boolean\n  // Add any other fields as needed\n}, {\n  minimize: false\n}));\nmodule.exports = Page;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQYWdlIiwibW9kZWwiLCJTY2hlbWEiLCJuYW1lIiwiU3RyaW5nIiwicm91dGUiLCJsYXlvdXQiLCJBcnJheSIsInN0eWxlIiwiT2JqZWN0Iiwic2l0ZV9pZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwic3RhdHVzIiwiQm9vbGVhbiIsIm1pbmltaXplIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlX2J1aWxkZXIvbW9kZWxzLyIsInNvdXJjZXMiOlsicGFnZS5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBtb2RlbHMvUGFnZS5qc1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IFBhZ2UgPSBtb25nb29zZS5tb2RlbChcbiAgXCJQYWdlXCIsXG4gIG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIG5hbWU6IFN0cmluZyxcbiAgICByb3V0ZTogU3RyaW5nLFxuICAgIGxheW91dDogQXJyYXksXG4gICAgc3R5bGU6IE9iamVjdCxcbiAgICBzaXRlX2lkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlNpdGVcIiB9LFxuICAgIHN0YXR1czogQm9vbGVhblxuICAgIC8vIEFkZCBhbnkgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxuICB9LHsgbWluaW1pemU6IGZhbHNlIH0pXG4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBhZ2U7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRXBDLE1BQU1DLElBQUksR0FBR0YsUUFBUSxDQUFDRyxLQUFLLENBQ3pCLE1BQU0sRUFDTixJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNsQkMsSUFBSSxFQUFFQyxNQUFNO0VBQ1pDLEtBQUssRUFBRUQsTUFBTTtFQUNiRSxNQUFNLEVBQUVDLEtBQUs7RUFDYkMsS0FBSyxFQUFFQyxNQUFNO0VBQ2JDLE9BQU8sRUFBRTtJQUFFQyxJQUFJLEVBQUViLFFBQVEsQ0FBQ0ksTUFBTSxDQUFDVSxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFO0VBQU8sQ0FBQztFQUM5REMsTUFBTSxFQUFFQztFQUNSO0FBQ0YsQ0FBQyxFQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFNLENBQUMsQ0FDdkIsQ0FBQztBQUVEQyxNQUFNLENBQUNDLE9BQU8sR0FBR25CLElBQUkifQ==","map":{"version":3,"names":["mongoose","require","Page","model","Schema","name","String","route","layout","Array","style","Object","site_id","type","Types","ObjectId","ref","status","Boolean","minimize","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/models/","sources":["page.model.js"],"sourcesContent":["// models/Page.js\nconst mongoose = require(\"mongoose\");\n\nconst Page = mongoose.model(\n  \"Page\",\n  new mongoose.Schema({\n    name: String,\n    route: String,\n    layout: Array,\n    style: Object,\n    site_id: { type: mongoose.Schema.Types.ObjectId, ref: \"Site\" },\n    status: Boolean\n    // Add any other fields as needed\n  },{ minimize: false })\n);\n\nmodule.exports = Page;\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,IAAI,GAAGF,QAAQ,CAACG,KAAK,CACzB,MAAM,EACN,IAAIH,QAAQ,CAACI,MAAM,CAAC;EAClBC,IAAI,EAAEC,MAAM;EACZC,KAAK,EAAED,MAAM;EACbE,MAAM,EAAEC,KAAK;EACbC,KAAK,EAAEC,MAAM;EACbC,OAAO,EAAE;IAAEC,IAAI,EAAEb,QAAQ,CAACI,MAAM,CAACU,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO,CAAC;EAC9DC,MAAM,EAAEC;EACR;AACF,CAAC,EAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CACvB,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGnB,IAAI"}},"mtime":1704386750610},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code is the routes for the user controller.\n * The first route is for getting all users, the second is for getting all superUsers, the third is for getting all users for the site, the fourth is for getting a specific user by id, and the fifth is for updating a specific user by id.\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/user.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/user\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getUsers);\n  app.get(\"/api/user/superUsers\", controller.getSuperUsers);\n  app.get(\"/api/user/for-site\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getUsersForSite);\n  app.get(\"/api/user/:id\", [authJwt.verifyToken], controller.getUser);\n  app.post(\"/api/user\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createUser);\n  app.put(\"/api/user/:id\", [authJwt.verifyToken], controller.updateUser);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTdXBlclVzZXIiLCJnZXRVc2VycyIsImdldFN1cGVyVXNlcnMiLCJnZXRVc2Vyc0ZvclNpdGUiLCJnZXRVc2VyIiwicG9zdCIsImlzU2l0ZUFkbWluIiwiY3JlYXRlVXNlciIsInB1dCIsInVwZGF0ZVVzZXIiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvYXV0aC9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2VyLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgY29kZSBpcyB0aGUgcm91dGVzIGZvciB0aGUgdXNlciBjb250cm9sbGVyLlxuICogVGhlIGZpcnN0IHJvdXRlIGlzIGZvciBnZXR0aW5nIGFsbCB1c2VycywgdGhlIHNlY29uZCBpcyBmb3IgZ2V0dGluZyBhbGwgc3VwZXJVc2VycywgdGhlIHRoaXJkIGlzIGZvciBnZXR0aW5nIGFsbCB1c2VycyBmb3IgdGhlIHNpdGUsIHRoZSBmb3VydGggaXMgZm9yIGdldHRpbmcgYSBzcGVjaWZpYyB1c2VyIGJ5IGlkLCBhbmQgdGhlIGZpZnRoIGlzIGZvciB1cGRhdGluZyBhIHNwZWNpZmljIHVzZXIgYnkgaWQuXG4gKi9cbmNvbnN0IHsgYXV0aEp3dCB9ID0gcmVxdWlyZShcIi4uLy4uLy4uL21pZGRsZXdhcmVzXCIpO1xuY29uc3QgY29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy91c2VyLmNvbnRyb2xsZXJcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XG4gICAgYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICByZXMuaGVhZGVyKFxuICAgICAgICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXG4gICAgICAgICAgICBcIngtYWNjZXNzLXRva2VuLCBPcmlnaW4sIENvbnRlbnQtVHlwZSwgQWNjZXB0XCJcbiAgICAgICAgKTtcbiAgICAgICAgbmV4dCgpO1xuICAgIH0pO1xuXG4gICAgYXBwLmdldChcIi9hcGkvdXNlclwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc1N1cGVyVXNlcl0sIGNvbnRyb2xsZXIuZ2V0VXNlcnMpO1xuICAgIGFwcC5nZXQoXCIvYXBpL3VzZXIvc3VwZXJVc2Vyc1wiLCBjb250cm9sbGVyLmdldFN1cGVyVXNlcnMpO1xuICAgIGFwcC5nZXQoXCIvYXBpL3VzZXIvZm9yLXNpdGVcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTdXBlclVzZXJdLCBjb250cm9sbGVyLmdldFVzZXJzRm9yU2l0ZSk7XG4gICAgYXBwLmdldChcIi9hcGkvdXNlci86aWRcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW5dLCBjb250cm9sbGVyLmdldFVzZXIpO1xuICAgIGFwcC5wb3N0KFwiL2FwaS91c2VyXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU2l0ZUFkbWluXSwgY29udHJvbGxlci5jcmVhdGVVc2VyKTtcbiAgICBhcHAucHV0KFwiL2FwaS91c2VyLzppZFwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbl0sIGNvbnRyb2xsZXIudXBkYXRlVXNlcik7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07RUFBRUE7QUFBUSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNuRCxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQztBQUU1REUsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBU0MsR0FBRyxFQUFFO0VBQzNCQSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxVQUFTQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0lBQzdCRCxHQUFHLENBQUNFLE1BQU0sQ0FDTiw4QkFBOEIsRUFDOUIsOENBQ0osQ0FBQztJQUNERCxJQUFJLENBQUMsQ0FBQztFQUNWLENBQUMsQ0FBQztFQUVGSixHQUFHLENBQUNNLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQ1gsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2EsV0FBVyxDQUFDLEVBQUVYLFVBQVUsQ0FBQ1ksUUFBUSxDQUFDO0VBQ3JGVCxHQUFHLENBQUNNLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRVQsVUFBVSxDQUFDYSxhQUFhLENBQUM7RUFDekRWLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLG9CQUFvQixFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxFQUFFWixPQUFPLENBQUNhLFdBQVcsQ0FBQyxFQUFFWCxVQUFVLENBQUNjLGVBQWUsQ0FBQztFQUNyR1gsR0FBRyxDQUFDTSxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxDQUFDLEVBQUVWLFVBQVUsQ0FBQ2UsT0FBTyxDQUFDO0VBQ25FWixHQUFHLENBQUNhLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQ2xCLE9BQU8sQ0FBQ1ksV0FBVyxFQUFFWixPQUFPLENBQUNtQixXQUFXLENBQUMsRUFBRWpCLFVBQVUsQ0FBQ2tCLFVBQVUsQ0FBQztFQUN4RmYsR0FBRyxDQUFDZ0IsR0FBRyxDQUFDLGVBQWUsRUFBRSxDQUFDckIsT0FBTyxDQUFDWSxXQUFXLENBQUMsRUFBRVYsVUFBVSxDQUFDb0IsVUFBVSxDQUFDO0FBQzFFLENBQUMifQ==","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSuperUser","getUsers","getSuperUsers","getUsersForSite","getUser","post","isSiteAdmin","createUser","put","updateUser"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/","sources":["user.routes.js"],"sourcesContent":["/**\n * This code is the routes for the user controller.\n * The first route is for getting all users, the second is for getting all superUsers, the third is for getting all users for the site, the fourth is for getting a specific user by id, and the fifth is for updating a specific user by id.\n */\nconst { authJwt } = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/user.controller\");\n\nmodule.exports = function(app) {\n    app.use(function(req, res, next) {\n        res.header(\n            \"Access-Control-Allow-Headers\",\n            \"x-access-token, Origin, Content-Type, Accept\"\n        );\n        next();\n    });\n\n    app.get(\"/api/user\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getUsers);\n    app.get(\"/api/user/superUsers\", controller.getSuperUsers);\n    app.get(\"/api/user/for-site\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getUsersForSite);\n    app.get(\"/api/user/:id\", [authJwt.verifyToken], controller.getUser);\n    app.post(\"/api/user\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createUser);\n    app.put(\"/api/user/:id\", [authJwt.verifyToken], controller.updateUser);\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAE5DE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC3BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC7BD,GAAG,CAACE,MAAM,CACN,8BAA8B,EAC9B,8CACJ,CAAC;IACDD,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,WAAW,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,QAAQ,CAAC;EACrFT,GAAG,CAACM,GAAG,CAAC,sBAAsB,EAAET,UAAU,CAACa,aAAa,CAAC;EACzDV,GAAG,CAACM,GAAG,CAAC,oBAAoB,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACc,eAAe,CAAC;EACrGX,GAAG,CAACM,GAAG,CAAC,eAAe,EAAE,CAACX,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACe,OAAO,CAAC;EACnEZ,GAAG,CAACa,IAAI,CAAC,WAAW,EAAE,CAAClB,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACmB,WAAW,CAAC,EAAEjB,UAAU,CAACkB,UAAU,CAAC;EACxFf,GAAG,CAACgB,GAAG,CAAC,eAAe,EAAE,CAACrB,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACoB,UAAU,CAAC;AAC1E,CAAC"}},"mtime":1697752512303},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/middlewares/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const authJwt = require(\"./authJwt\");\nconst verifySignUp = require(\"./verifySignUp\");\nmodule.exports = {\n  authJwt,\n  verifySignUp\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsInZlcmlmeVNpZ25VcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhdXRoSnd0ID0gcmVxdWlyZShcIi4vYXV0aEp3dFwiKTtcbmNvbnN0IHZlcmlmeVNpZ25VcCA9IHJlcXVpcmUoXCIuL3ZlcmlmeVNpZ25VcFwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGF1dGhKd3QsXG4gIHZlcmlmeVNpZ25VcFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1DLFlBQVksR0FBR0QsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBRTlDRSxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNmSixPQUFPO0VBQ1BFO0FBQ0YsQ0FBQyJ9","map":{"version":3,"names":["authJwt","require","verifySignUp","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/middlewares/","sources":["index.js"],"sourcesContent":["const authJwt = require(\"./authJwt\");\nconst verifySignUp = require(\"./verifySignUp\");\n\nmodule.exports = {\n  authJwt,\n  verifySignUp\n};\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,WAAW,CAAC;AACpC,MAAMC,YAAY,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAE9CE,MAAM,CAACC,OAAO,GAAG;EACfJ,OAAO;EACPE;AACF,CAAC"}},"mtime":1697837260225},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/middlewares/authJwt.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const jwt = require(\"jsonwebtoken\");\nconst config = require(\"../config/auth.config.js\");\nconst db = require(\"../models\");\nconst Site_Permissions = db.site_permissions;\nconst Global_Permissions = db.global_permissions;\nconst User = db.user;\nconst Role = db.role;\nconst Site = db.site;\nconst siteHelper = require(\"../helper/site\");\nconst verifyToken = (req, res, next) => {\n  let token = req.headers[\"x-access-token\"];\n  if (!token) {\n    return res.status(403).send({\n      message: \"No token provided!\"\n    });\n  }\n  jwt.verify(token, config.secret, (err, decoded) => {\n    if (err) {\n      return res.status(401).send({\n        message: \"Unauthorized!\"\n      });\n    }\n    req.userId = decoded.id;\n    next();\n  });\n};\nconst isSiteAdmin = (req, res, next) => {\n  User.findById(req.userId).exec((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    const site_name = siteHelper.getSiteName(req);\n    Site.findOne({\n      domain: site_name\n    }).exec((err, site) => {\n      if (err) {\n        return err;\n      }\n      Site_Permissions.findOne({\n        user_id: user._id,\n        site_id: site._id\n      }).exec((err, site_permissions) => {\n        Global_Permissions.findOne({\n          user_id: user._id\n        }).exec((err, global_permissions) => {\n          if (err) {\n            return err;\n          }\n          let all_roles = [];\n          if (site_permissions) {\n            all_roles = all_roles.concat(site_permissions.roles);\n          }\n          if (global_permissions) {\n            all_roles = all_roles.concat(global_permissions.roles);\n          }\n          Role.find({\n            _id: {\n              $in: all_roles\n            }\n          }, (err, roles) => {\n            if (err) {\n              res.status(500).send({\n                message: err\n              });\n              return;\n            }\n            for (let i = 0; i < roles.length; i++) {\n              if (roles[i].name === \"admin\" || roles[i].name === \"global_admin\") {\n                next();\n                return;\n              }\n            }\n            res.status(403).send({\n              message: \"Require Admin Role!\"\n            });\n            return;\n          });\n        });\n      });\n    });\n  });\n};\nconst isSuperUser = (req, res, next) => {\n  User.findById(req.userId).exec((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    const site_name = siteHelper.getSiteName(req);\n    Site.findOne({\n      domain: site_name\n    }).exec((err, site) => {\n      if (err) {\n        return err;\n      }\n      Site_Permissions.findOne({\n        user_id: user._id,\n        site_id: site._id\n      }).exec((err, site_permissions) => {\n        Global_Permissions.findOne({\n          user_id: user._id\n        }).exec((err, global_permissions) => {\n          if (err) {\n            return err;\n          }\n          let all_roles = [];\n          if (site_permissions) {\n            all_roles = all_roles.concat(site_permissions.roles);\n          }\n          if (global_permissions) {\n            all_roles = all_roles.concat(global_permissions.roles);\n          }\n          Role.find({\n            _id: {\n              $in: all_roles\n            }\n          }, (err, roles) => {\n            if (err) {\n              res.status(500).send({\n                message: err\n              });\n              return;\n            }\n            for (let i = 0; i < roles.length; i++) {\n              if (roles[i].name === \"superUser\" || roles[i].name === \"admin\" || roles[i].name === \"global_admin\") {\n                next();\n                return;\n              }\n            }\n            res.status(403).send({\n              message: \"Require SuperUser Role!\"\n            });\n            return;\n          });\n        });\n      });\n    });\n  });\n};\nconst isGlobalAdmin = (req, res, next) => {\n  User.findById(req.userId).exec((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    const site_name = siteHelper.getSiteName(req);\n    Site.findOne({\n      domain: site_name\n    }).exec((err, site) => {\n      if (err) {\n        return err;\n      }\n      Site_Permissions.findOne({\n        user_id: user._id,\n        site_id: site._id\n      }).exec((err, site_permissions) => {\n        Global_Permissions.findOne({\n          user_id: user._id\n        }).exec((err, global_permissions) => {\n          if (err) {\n            return err;\n          }\n          let all_roles = [];\n          if (site_permissions) {\n            all_roles = all_roles.concat(site_permissions.roles);\n          }\n          if (global_permissions) {\n            all_roles = all_roles.concat(global_permissions.roles);\n          }\n          Role.find({\n            _id: {\n              $in: all_roles\n            }\n          }, (err, roles) => {\n            if (err) {\n              res.status(500).send({\n                message: err\n              });\n              return;\n            }\n            for (let i = 0; i < roles.length; i++) {\n              if (roles[i].name === \"global_admin\") {\n                next();\n                return;\n              }\n            }\n            res.status(403).send({\n              message: \"Require Global Admin Role!\"\n            });\n            return;\n          });\n        });\n      });\n    });\n  });\n};\nconst authJwt = {\n  verifyToken,\n  isSiteAdmin,\n  isSuperUser,\n  isGlobalAdmin\n};\nmodule.exports = authJwt;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiY29uZmlnIiwiZGIiLCJTaXRlX1Blcm1pc3Npb25zIiwic2l0ZV9wZXJtaXNzaW9ucyIsIkdsb2JhbF9QZXJtaXNzaW9ucyIsImdsb2JhbF9wZXJtaXNzaW9ucyIsIlVzZXIiLCJ1c2VyIiwiUm9sZSIsInJvbGUiLCJTaXRlIiwic2l0ZSIsInNpdGVIZWxwZXIiLCJ2ZXJpZnlUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJ0b2tlbiIsImhlYWRlcnMiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsInZlcmlmeSIsInNlY3JldCIsImVyciIsImRlY29kZWQiLCJ1c2VySWQiLCJpZCIsImlzU2l0ZUFkbWluIiwiZmluZEJ5SWQiLCJleGVjIiwic2l0ZV9uYW1lIiwiZ2V0U2l0ZU5hbWUiLCJmaW5kT25lIiwiZG9tYWluIiwidXNlcl9pZCIsIl9pZCIsInNpdGVfaWQiLCJhbGxfcm9sZXMiLCJjb25jYXQiLCJyb2xlcyIsImZpbmQiLCIkaW4iLCJpIiwibGVuZ3RoIiwibmFtZSIsImlzU3VwZXJVc2VyIiwiaXNHbG9iYWxBZG1pbiIsImF1dGhKd3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiYXV0aEp3dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xuY29uc3QgY29uZmlnID0gcmVxdWlyZShcIi4uL2NvbmZpZy9hdXRoLmNvbmZpZy5qc1wiKTtcbmNvbnN0IGRiID0gcmVxdWlyZShcIi4uL21vZGVsc1wiKTtcbmNvbnN0IFNpdGVfUGVybWlzc2lvbnMgPSBkYi5zaXRlX3Blcm1pc3Npb25zO1xuY29uc3QgR2xvYmFsX1Blcm1pc3Npb25zID0gZGIuZ2xvYmFsX3Blcm1pc3Npb25zO1xuY29uc3QgVXNlciA9IGRiLnVzZXI7XG5jb25zdCBSb2xlID0gZGIucm9sZTtcbmNvbnN0IFNpdGUgPSBkYi5zaXRlO1xuY29uc3Qgc2l0ZUhlbHBlciA9IHJlcXVpcmUoXCIuLi9oZWxwZXIvc2l0ZVwiKTtcblxuY29uc3QgdmVyaWZ5VG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBsZXQgdG9rZW4gPSByZXEuaGVhZGVyc1tcIngtYWNjZXNzLXRva2VuXCJdO1xuXG4gICAgaWYgKCF0b2tlbikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLnNlbmQoeyBtZXNzYWdlOiBcIk5vIHRva2VuIHByb3ZpZGVkIVwiIH0pO1xuICAgIH1cbiAgICBcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBjb25maWcuc2VjcmV0LCAoZXJyLCBkZWNvZGVkKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6IFwiVW5hdXRob3JpemVkIVwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlcS51c2VySWQgPSBkZWNvZGVkLmlkO1xuICAgICAgICBuZXh0KCk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBpc1NpdGVBZG1pbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIFVzZXIuZmluZEJ5SWQocmVxLnVzZXJJZCkuZXhlYygoZXJyLCB1c2VyKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcblxuICAgICAgICBTaXRlLmZpbmRPbmUoe1xuICAgICAgICAgICAgZG9tYWluOiBzaXRlX25hbWVcbiAgICAgICAgfSkuZXhlYygoZXJyLCBzaXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU2l0ZV9QZXJtaXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQsIHNpdGVfaWQ6IHNpdGUuX2lkIH0pLmV4ZWMoKGVyciwgc2l0ZV9wZXJtaXNzaW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIEdsb2JhbF9QZXJtaXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQgfSkuZXhlYygoZXJyLCBnbG9iYWxfcGVybWlzc2lvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxldCBhbGxfcm9sZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2l0ZV9wZXJtaXNzaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3JvbGVzID0gYWxsX3JvbGVzLmNvbmNhdChzaXRlX3Blcm1pc3Npb25zLnJvbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnbG9iYWxfcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9yb2xlcyA9IGFsbF9yb2xlcy5jb25jYXQoZ2xvYmFsX3Blcm1pc3Npb25zLnJvbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIFJvbGUuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IHsgJGluOiBhbGxfcm9sZXMgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChlcnIsIHJvbGVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9sZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGVzW2ldLm5hbWUgPT09IFwiYWRtaW5cIiB8fCByb2xlc1tpXS5uYW1lID09PSBcImdsb2JhbF9hZG1pblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuc2VuZCh7IG1lc3NhZ2U6IFwiUmVxdWlyZSBBZG1pbiBSb2xlIVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGlzU3VwZXJVc2VyID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgVXNlci5maW5kQnlJZChyZXEudXNlcklkKS5leGVjKChlcnIsIHVzZXIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2l0ZV9uYW1lID0gc2l0ZUhlbHBlci5nZXRTaXRlTmFtZShyZXEpO1xuXG4gICAgICAgIFNpdGUuZmluZE9uZSh7XG4gICAgICAgICAgICBkb21haW46IHNpdGVfbmFtZVxuICAgICAgICB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgU2l0ZV9QZXJtaXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQsIHNpdGVfaWQ6IHNpdGUuX2lkIH0pLmV4ZWMoKGVyciwgc2l0ZV9wZXJtaXNzaW9ucykgPT4ge1xuICAgICAgICAgICAgICAgIEdsb2JhbF9QZXJtaXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQgfSkuZXhlYygoZXJyLCBnbG9iYWxfcGVybWlzc2lvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxldCBhbGxfcm9sZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2l0ZV9wZXJtaXNzaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3JvbGVzID0gYWxsX3JvbGVzLmNvbmNhdChzaXRlX3Blcm1pc3Npb25zLnJvbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnbG9iYWxfcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9yb2xlcyA9IGFsbF9yb2xlcy5jb25jYXQoZ2xvYmFsX3Blcm1pc3Npb25zLnJvbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIFJvbGUuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IHsgJGluOiBhbGxfcm9sZXMgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChlcnIsIHJvbGVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9sZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGVzW2ldLm5hbWUgPT09IFwic3VwZXJVc2VyXCIgfHwgcm9sZXNbaV0ubmFtZSA9PT0gXCJhZG1pblwiIHx8IHJvbGVzW2ldLm5hbWUgPT09IFwiZ2xvYmFsX2FkbWluXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAzKS5zZW5kKHsgbWVzc2FnZTogXCJSZXF1aXJlIFN1cGVyVXNlciBSb2xlIVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGlzR2xvYmFsQWRtaW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBVc2VyLmZpbmRCeUlkKHJlcS51c2VySWQpLmV4ZWMoKGVyciwgdXNlcikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaXRlX25hbWUgPSBzaXRlSGVscGVyLmdldFNpdGVOYW1lKHJlcSk7XG5cbiAgICAgICAgU2l0ZS5maW5kT25lKHtcbiAgICAgICAgICAgIGRvbWFpbjogc2l0ZV9uYW1lXG4gICAgICAgIH0pLmV4ZWMoKGVyciwgc2l0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNpdGVfUGVybWlzc2lvbnMuZmluZE9uZSh7IHVzZXJfaWQ6IHVzZXIuX2lkLCBzaXRlX2lkOiBzaXRlLl9pZCB9KS5leGVjKChlcnIsIHNpdGVfcGVybWlzc2lvbnMpID0+IHtcbiAgICAgICAgICAgICAgICBHbG9iYWxfUGVybWlzc2lvbnMuZmluZE9uZSh7IHVzZXJfaWQ6IHVzZXIuX2lkIH0pLmV4ZWMoKGVyciwgZ2xvYmFsX3Blcm1pc3Npb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsZXQgYWxsX3JvbGVzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGVfcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9yb2xlcyA9IGFsbF9yb2xlcy5jb25jYXQoc2l0ZV9wZXJtaXNzaW9ucy5yb2xlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsX3Blcm1pc3Npb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxfcm9sZXMgPSBhbGxfcm9sZXMuY29uY2F0KGdsb2JhbF9wZXJtaXNzaW9ucy5yb2xlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBSb2xlLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiB7ICRpbjogYWxsX3JvbGVzIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAoZXJyLCByb2xlcykgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9sZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvbGVzW2ldLm5hbWUgPT09IFwiZ2xvYmFsX2FkbWluXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAzKS5zZW5kKHsgbWVzc2FnZTogXCJSZXF1aXJlIEdsb2JhbCBBZG1pbiBSb2xlIVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGF1dGhKd3QgPSB7XG4gICAgdmVyaWZ5VG9rZW4sXG4gICAgaXNTaXRlQWRtaW4sXG4gICAgaXNTdXBlclVzZXIsXG4gICAgaXNHbG9iYWxBZG1pblxufTtcbm1vZHVsZS5leHBvcnRzID0gYXV0aEp3dDtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ25DLE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLDBCQUEwQixDQUFDO0FBQ2xELE1BQU1FLEVBQUUsR0FBR0YsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUMvQixNQUFNRyxnQkFBZ0IsR0FBR0QsRUFBRSxDQUFDRSxnQkFBZ0I7QUFDNUMsTUFBTUMsa0JBQWtCLEdBQUdILEVBQUUsQ0FBQ0ksa0JBQWtCO0FBQ2hELE1BQU1DLElBQUksR0FBR0wsRUFBRSxDQUFDTSxJQUFJO0FBQ3BCLE1BQU1DLElBQUksR0FBR1AsRUFBRSxDQUFDUSxJQUFJO0FBQ3BCLE1BQU1DLElBQUksR0FBR1QsRUFBRSxDQUFDVSxJQUFJO0FBQ3BCLE1BQU1DLFVBQVUsR0FBR2IsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBRTVDLE1BQU1jLFdBQVcsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNw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","map":{"version":3,"names":["jwt","require","config","db","Site_Permissions","site_permissions","Global_Permissions","global_permissions","User","user","Role","role","Site","site","siteHelper","verifyToken","req","res","next","token","headers","status","send","message","verify","secret","err","decoded","userId","id","isSiteAdmin","findById","exec","site_name","getSiteName","findOne","domain","user_id","_id","site_id","all_roles","concat","roles","find","$in","i","length","name","isSuperUser","isGlobalAdmin","authJwt","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/middlewares/","sources":["authJwt.js"],"sourcesContent":["const jwt = require(\"jsonwebtoken\");\nconst config = require(\"../config/auth.config.js\");\nconst db = require(\"../models\");\nconst Site_Permissions = db.site_permissions;\nconst Global_Permissions = db.global_permissions;\nconst User = db.user;\nconst Role = db.role;\nconst Site = db.site;\nconst siteHelper = require(\"../helper/site\");\n\nconst verifyToken = (req, res, next) => {\n    let token = req.headers[\"x-access-token\"];\n\n    if (!token) {\n        return res.status(403).send({ message: \"No token provided!\" });\n    }\n    \n    jwt.verify(token, config.secret, (err, decoded) => {\n        if (err) {\n            return res.status(401).send({ message: \"Unauthorized!\" });\n        }\n        req.userId = decoded.id;\n        next();\n    });\n};\n\nconst isSiteAdmin = (req, res, next) => {\n    User.findById(req.userId).exec((err, user) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n        const site_name = siteHelper.getSiteName(req);\n\n        Site.findOne({\n            domain: site_name\n        }).exec((err, site) => {\n            if (err) {\n                return err;\n            }\n\n            Site_Permissions.findOne({ user_id: user._id, site_id: site._id }).exec((err, site_permissions) => {\n                Global_Permissions.findOne({ user_id: user._id }).exec((err, global_permissions) => {\n                    if (err) {\n                        return err;\n                    }\n\n                    let all_roles = [];\n\n                    if (site_permissions) {\n                        all_roles = all_roles.concat(site_permissions.roles);\n                    }\n\n                    if (global_permissions) {\n                        all_roles = all_roles.concat(global_permissions.roles);\n                    }\n\n                    Role.find(\n                        {\n                            _id: { $in: all_roles }\n                        },\n                        (err, roles) => {\n                            if (err) {\n                                res.status(500).send({ message: err });\n                                return;\n                            }\n\n                            for (let i = 0; i < roles.length; i++) {\n                                if (roles[i].name === \"admin\" || roles[i].name === \"global_admin\") {\n                                    next();\n                                    return;\n                                }\n                            }\n\n                            res.status(403).send({ message: \"Require Admin Role!\" });\n                            return;\n                        }\n                    );\n                });\n            });\n        });\n    });\n};\n\nconst isSuperUser = (req, res, next) => {\n    User.findById(req.userId).exec((err, user) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n        const site_name = siteHelper.getSiteName(req);\n\n        Site.findOne({\n            domain: site_name\n        }).exec((err, site) => {\n            if (err) {\n                return err;\n            }\n            Site_Permissions.findOne({ user_id: user._id, site_id: site._id }).exec((err, site_permissions) => {\n                Global_Permissions.findOne({ user_id: user._id }).exec((err, global_permissions) => {\n                    if (err) {\n                        return err;\n                    }\n\n                    let all_roles = [];\n\n                    if (site_permissions) {\n                        all_roles = all_roles.concat(site_permissions.roles);\n                    }\n\n                    if (global_permissions) {\n                        all_roles = all_roles.concat(global_permissions.roles);\n                    }\n\n                    Role.find(\n                        {\n                            _id: { $in: all_roles }\n                        },\n                        (err, roles) => {\n                            if (err) {\n                                res.status(500).send({ message: err });\n                                return;\n                            }\n\n                            for (let i = 0; i < roles.length; i++) {\n                                if (roles[i].name === \"superUser\" || roles[i].name === \"admin\" || roles[i].name === \"global_admin\") {\n                                    next();\n                                    return;\n                                }\n                            }\n\n                            res.status(403).send({ message: \"Require SuperUser Role!\" });\n                            return;\n                        }\n                    );\n                });\n            });\n        });\n    });\n};\n\nconst isGlobalAdmin = (req, res, next) => {\n    User.findById(req.userId).exec((err, user) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n        const site_name = siteHelper.getSiteName(req);\n\n        Site.findOne({\n            domain: site_name\n        }).exec((err, site) => {\n            if (err) {\n                return err;\n            }\n\n            Site_Permissions.findOne({ user_id: user._id, site_id: site._id }).exec((err, site_permissions) => {\n                Global_Permissions.findOne({ user_id: user._id }).exec((err, global_permissions) => {\n                    if (err) {\n                        return err;\n                    }\n\n                    let all_roles = [];\n\n                    if (site_permissions) {\n                        all_roles = all_roles.concat(site_permissions.roles);\n                    }\n\n                    if (global_permissions) {\n                        all_roles = all_roles.concat(global_permissions.roles);\n                    }\n\n                    Role.find(\n                        {\n                            _id: { $in: all_roles }\n                        },\n                        (err, roles) => {\n\n                            if (err) {\n                                res.status(500).send({ message: err });\n                                return;\n                            }\n\n                            for (let i = 0; i < roles.length; i++) {\n                                if (roles[i].name === \"global_admin\") {\n                                    next();\n                                    return;\n                                }\n                            }\n\n                            res.status(403).send({ message: \"Require Global Admin Role!\" });\n                            return;\n                        }\n                    );\n                });\n            });\n        });\n    });\n};\n\nconst authJwt = {\n    verifyToken,\n    isSiteAdmin,\n    isSuperUser,\n    isGlobalAdmin\n};\nmodule.exports = authJwt;\n"],"mappings":"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"}},"mtime":1697837260225},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/config/auth.config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"module.exports = {\n  secret: \"wdq@JXQ8rme!wta1rmb\"\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwic2VjcmV0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL2NvbmZpZy8iLCJzb3VyY2VzIjpbImF1dGguY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0ge1xuICBzZWNyZXQ6IFwid2RxQEpYUThybWUhd3RhMXJtYlwiXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDZkMsTUFBTSxFQUFFO0FBQ1YsQ0FBQyJ9","map":{"version":3,"names":["module","exports","secret"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/config/","sources":["auth.config.js"],"sourcesContent":["module.exports = {\n  secret: \"wdq@JXQ8rme!wta1rmb\"\n};\n"],"mappings":"AAAAA,MAAM,CAACC,OAAO,GAAG;EACfC,MAAM,EAAE;AACV,CAAC"}},"mtime":1697752558258},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/helper/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/helper/site.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const url = require(\"node:url\");\nconst filterFromList = (objects, list, object_type_name) => {\n  if (Array.isArray(objects)) {\n    objects = objects.filter(object => {\n      if (list.filter(list_item => list_item[object_type_name].toString() === object._id.toString())) {\n        return object;\n      }\n    });\n  } else {\n    if (!list.includes(objects._id)) {\n      objects = null;\n    }\n  }\n  return objects;\n};\nconst getSiteName = req => {\n  let site_url = req.get('referer');\n  let site_array = url.parse(site_url);\n  let site_name = site_array['hostname'].split(\".\")[0];\n  if (site_name == \"localhost\") {\n    site_name = \"main\";\n  }\n  return site_name;\n};\nconst siteHelper = {\n  filterFromList,\n  getSiteName\n};\nmodule.exports = siteHelper;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1cmwiLCJyZXF1aXJlIiwiZmlsdGVyRnJvbUxpc3QiLCJvYmplY3RzIiwibGlzdCIsIm9iamVjdF90eXBlX25hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJvYmplY3QiLCJsaXN0X2l0ZW0iLCJ0b1N0cmluZyIsIl9pZCIsImluY2x1ZGVzIiwiZ2V0U2l0ZU5hbWUiLCJyZXEiLCJzaXRlX3VybCIsImdldCIsInNpdGVfYXJyYXkiLCJwYXJzZSIsInNpdGVfbmFtZSIsInNwbGl0Iiwic2l0ZUhlbHBlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvaGVscGVyLyIsInNvdXJjZXMiOlsic2l0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB1cmwgPSByZXF1aXJlKFwibm9kZTp1cmxcIik7XHJcblxyXG5jb25zdCBmaWx0ZXJGcm9tTGlzdCA9IChvYmplY3RzLCBsaXN0LCBvYmplY3RfdHlwZV9uYW1lKSA9PiB7XHJcbiAgICBpZihBcnJheS5pc0FycmF5KG9iamVjdHMpKSB7XHJcbiAgICAgICAgb2JqZWN0cyA9IG9iamVjdHMuZmlsdGVyKG9iamVjdCA9PiB7XHJcbiAgICAgICAgICAgIGlmKGxpc3QuZmlsdGVyKGxpc3RfaXRlbSA9PiBsaXN0X2l0ZW1bb2JqZWN0X3R5cGVfbmFtZV0udG9TdHJpbmcoKSA9PT0gb2JqZWN0Ll9pZC50b1N0cmluZygpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZighbGlzdC5pbmNsdWRlcyhvYmplY3RzLl9pZCkpIHtcclxuICAgICAgICAgICAgb2JqZWN0cyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvYmplY3RzO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0U2l0ZU5hbWUgPSAocmVxKSA9PiB7XHJcbiAgICBsZXQgc2l0ZV91cmwgPSByZXEuZ2V0KCdyZWZlcmVyJyk7XHJcbiAgICBsZXQgc2l0ZV9hcnJheSA9IHVybC5wYXJzZShzaXRlX3VybCk7XHJcbiAgICBsZXQgc2l0ZV9uYW1lID0gc2l0ZV9hcnJheVsnaG9zdG5hbWUnXS5zcGxpdChcIi5cIilbMF07XHJcbiAgICBpZiAoc2l0ZV9uYW1lID09IFwibG9jYWxob3N0XCIpIHtcclxuICAgICAgICBzaXRlX25hbWUgPSBcIm1haW5cIlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNpdGVfbmFtZTtcclxufVxyXG5cclxuY29uc3Qgc2l0ZUhlbHBlciA9IHtcclxuICAgIGZpbHRlckZyb21MaXN0LFxyXG4gICAgZ2V0U2l0ZU5hbWVcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2l0ZUhlbHBlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEdBQUcsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUUvQixNQUFNQyxjQUFjLEdBQUdBLENBQUNDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxnQkFBZ0IsS0FBSztFQUN4RCxJQUFHQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0osT0FBTyxDQUFDLEVBQUU7SUFDdkJBLE9BQU8sR0FBR0EsT0FBTyxDQUFDSyxNQUFNLENBQUNDLE1BQU0sSUFBSTtNQUMvQixJQUFHTCxJQUFJLENBQUNJLE1BQU0sQ0FBQ0UsU0FBUyxJQUFJQSxTQUFTLENBQUNMLGdCQUFnQixDQUFDLENBQUNNLFFBQVEsQ0FBQyxDQUFDLEtBQUtGLE1BQU0sQ0FBQ0csR0FBRyxDQUFDRCxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDM0YsT0FBT0YsTUFBTTtNQUNqQjtJQUNKLENBQUMsQ0FBQztFQUNOLENBQUMsTUFBTTtJQUNILElBQUcsQ0FBQ0wsSUFBSSxDQUFDUyxRQUFRLENBQUNWLE9BQU8sQ0FBQ1MsR0FBRyxDQUFDLEVBQUU7TUFDNUJULE9BQU8sR0FBRyxJQUFJO0lBQ2xCO0VBQ0o7RUFFQSxPQUFPQSxPQUFPO0FBQ2xCLENBQUM7QUFFRCxNQUFNVyxXQUFXLEdBQUlDLEdBQUcsSUFBSztFQUN6QixJQUFJQyxRQUFRLEdBQUdELEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFNBQVMsQ0FBQztFQUNqQyxJQUFJQyxVQUFVLEdBQUdsQixHQUFHLENBQUNtQixLQUFLLENBQUNILFFBQVEsQ0FBQztFQUNwQyxJQUFJSSxTQUFTLEdBQUdGLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQ0csS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNwRCxJQUFJRCxTQUFTLElBQUksV0FBVyxFQUFFO0lBQzFCQSxTQUFTLEdBQUcsTUFBTTtFQUN0QjtFQUNBLE9BQU9BLFNBQVM7QUFDcEIsQ0FBQztBQUVELE1BQU1FLFVBQVUsR0FBRztFQUNmcEIsY0FBYztFQUNkWTtBQUNKLENBQUM7QUFFRFMsTUFBTSxDQUFDQyxPQUFPLEdBQUdGLFVBQVUifQ==","map":{"version":3,"names":["url","require","filterFromList","objects","list","object_type_name","Array","isArray","filter","object","list_item","toString","_id","includes","getSiteName","req","site_url","get","site_array","parse","site_name","split","siteHelper","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/helper/","sources":["site.js"],"sourcesContent":["const url = require(\"node:url\");\r\n\r\nconst filterFromList = (objects, list, object_type_name) => {\r\n    if(Array.isArray(objects)) {\r\n        objects = objects.filter(object => {\r\n            if(list.filter(list_item => list_item[object_type_name].toString() === object._id.toString())) {\r\n                return object;\r\n            }\r\n        });\r\n    } else {\r\n        if(!list.includes(objects._id)) {\r\n            objects = null;\r\n        }\r\n    }\r\n\r\n    return objects;\r\n};\r\n\r\nconst getSiteName = (req) => {\r\n    let site_url = req.get('referer');\r\n    let site_array = url.parse(site_url);\r\n    let site_name = site_array['hostname'].split(\".\")[0];\r\n    if (site_name == \"localhost\") {\r\n        site_name = \"main\"\r\n    }\r\n    return site_name;\r\n}\r\n\r\nconst siteHelper = {\r\n    filterFromList,\r\n    getSiteName\r\n};\r\n\r\nmodule.exports = siteHelper;"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,UAAU,CAAC;AAE/B,MAAMC,cAAc,GAAGA,CAACC,OAAO,EAAEC,IAAI,EAAEC,gBAAgB,KAAK;EACxD,IAAGC,KAAK,CAACC,OAAO,CAACJ,OAAO,CAAC,EAAE;IACvBA,OAAO,GAAGA,OAAO,CAACK,MAAM,CAACC,MAAM,IAAI;MAC/B,IAAGL,IAAI,CAACI,MAAM,CAACE,SAAS,IAAIA,SAAS,CAACL,gBAAgB,CAAC,CAACM,QAAQ,CAAC,CAAC,KAAKF,MAAM,CAACG,GAAG,CAACD,QAAQ,CAAC,CAAC,CAAC,EAAE;QAC3F,OAAOF,MAAM;MACjB;IACJ,CAAC,CAAC;EACN,CAAC,MAAM;IACH,IAAG,CAACL,IAAI,CAACS,QAAQ,CAACV,OAAO,CAACS,GAAG,CAAC,EAAE;MAC5BT,OAAO,GAAG,IAAI;IAClB;EACJ;EAEA,OAAOA,OAAO;AAClB,CAAC;AAED,MAAMW,WAAW,GAAIC,GAAG,IAAK;EACzB,IAAIC,QAAQ,GAAGD,GAAG,CAACE,GAAG,CAAC,SAAS,CAAC;EACjC,IAAIC,UAAU,GAAGlB,GAAG,CAACmB,KAAK,CAACH,QAAQ,CAAC;EACpC,IAAII,SAAS,GAAGF,UAAU,CAAC,UAAU,CAAC,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACpD,IAAID,SAAS,IAAI,WAAW,EAAE;IAC1BA,SAAS,GAAG,MAAM;EACtB;EACA,OAAOA,SAAS;AACpB,CAAC;AAED,MAAME,UAAU,GAAG;EACfpB,cAAc;EACdY;AACJ,CAAC;AAEDS,MAAM,CAACC,OAAO,GAAGF,UAAU"}},"mtime":1697752542610},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/middlewares/verifySignUp.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const db = require(\"../models\");\nconst ROLES = db.ROLES;\nconst User = db.user;\nconst checkDuplicateUsernameOrEmail = (req, res, next) => {\n  // Username\n  User.findOne({\n    username: req.body.username\n  }).exec((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (user) {\n      res.status(400).send({\n        message: \"Failed! Username is already in use!\"\n      });\n      return;\n    }\n\n    // Email\n    User.findOne({\n      email: req.body.email\n    }).exec((err, user) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      if (user) {\n        res.status(400).send({\n          message: \"Failed! Email is already in use!\"\n        });\n        return;\n      }\n      next();\n    });\n  });\n};\nconst checkRolesExisted = (req, res, next) => {\n  if (req.body.roles) {\n    for (let i = 0; i < req.body.roles.length; i++) {\n      if (!ROLES.includes(req.body.roles[i])) {\n        res.status(400).send({\n          message: `Failed! Role ${req.body.roles[i]} does not exist!`\n        });\n        return;\n      }\n    }\n  }\n  next();\n};\nconst verifySignUp = {\n  checkDuplicateUsernameOrEmail,\n  checkRolesExisted\n};\nmodule.exports = verifySignUp;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJST0xFUyIsIlVzZXIiLCJ1c2VyIiwiY2hlY2tEdXBsaWNhdGVVc2VybmFtZU9yRW1haWwiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZmluZE9uZSIsInVzZXJuYW1lIiwiYm9keSIsImV4ZWMiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImVtYWlsIiwiY2hlY2tSb2xlc0V4aXN0ZWQiLCJyb2xlcyIsImkiLCJsZW5ndGgiLCJpbmNsdWRlcyIsInZlcmlmeVNpZ25VcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJ2ZXJpZnlTaWduVXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vbW9kZWxzXCIpO1xuY29uc3QgUk9MRVMgPSBkYi5ST0xFUztcbmNvbnN0IFVzZXIgPSBkYi51c2VyO1xuXG5jb25zdCBjaGVja0R1cGxpY2F0ZVVzZXJuYW1lT3JFbWFpbCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAvLyBVc2VybmFtZVxuICBVc2VyLmZpbmRPbmUoe1xuICAgIHVzZXJuYW1lOiByZXEuYm9keS51c2VybmFtZVxuICB9KS5leGVjKChlcnIsIHVzZXIpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodXNlcikge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoeyBtZXNzYWdlOiBcIkZhaWxlZCEgVXNlcm5hbWUgaXMgYWxyZWFkeSBpbiB1c2UhXCIgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW1haWxcbiAgICBVc2VyLmZpbmRPbmUoe1xuICAgICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsXG4gICAgfSkuZXhlYygoZXJyLCB1c2VyKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgbWVzc2FnZTogXCJGYWlsZWQhIEVtYWlsIGlzIGFscmVhZHkgaW4gdXNlIVwiIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG5leHQoKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBjaGVja1JvbGVzRXhpc3RlZCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBpZiAocmVxLmJvZHkucm9sZXMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcS5ib2R5LnJvbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIVJPTEVTLmluY2x1ZGVzKHJlcS5ib2R5LnJvbGVzW2ldKSkge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCEgUm9sZSAke3JlcS5ib2R5LnJvbGVzW2ldfSBkb2VzIG5vdCBleGlzdCFgXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmV4dCgpO1xufTtcblxuY29uc3QgdmVyaWZ5U2lnblVwID0ge1xuICBjaGVja0R1cGxpY2F0ZVVzZXJuYW1lT3JFbWFpbCxcbiAgY2hlY2tSb2xlc0V4aXN0ZWRcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdmVyaWZ5U2lnblVwO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDL0IsTUFBTUMsS0FBSyxHQUFHRixFQUFFLENBQUNFLEtBQUs7QUFDdEIsTUFBTUMsSUFBSSxHQUFHSCxFQUFFLENBQUNJLElBQUk7QUFFcEIsTUFBTUMsNkJBQTZCLEdBQUdBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDeEQ7RUFDQUwsSUFBSSxDQUFDTSxPQUFPLENBQUM7SUFDWEMsUUFBUSxFQUFFSixHQUFHLENBQUNLLElBQUksQ0FBQ0Q7RUFDckIsQ0FBQyxDQUFDLENBQUNFLElBQUksQ0FBQyxDQUFDQyxHQUFHLEVBQUVULElBQUksS0FBSztJQUNyQixJQUFJUyxHQUFHLEVBQUU7TUFDUE4sR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUVIO01BQUksQ0FBQyxDQUFDO01BQ3RDO0lBQ0Y7SUFFQSxJQUFJVCxJQUFJLEVBQUU7TUFDUkcsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUU7TUFBc0MsQ0FBQyxDQUFDO01BQ3hFO0lBQ0Y7O0lBRUE7SUFDQWIsSUFBSSxDQUFDTSxPQUFPLENBQUM7TUFDWFEsS0FBSyxFQUFFWCxHQUFHLENBQUNLLElBQUksQ0FBQ007SUFDbEIsQ0FBQyxDQUFDLENBQUNMLElBQUksQ0FBQyxDQUFDQyxHQUFHLEVBQUVULElBQUksS0FBSztNQUNyQixJQUFJUyxHQUFHLEVBQUU7UUFDUE4sR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFFQyxPQUFPLEVBQUVIO1FBQUksQ0FBQyxDQUFDO1FBQ3RDO01BQ0Y7TUFFQSxJQUFJVCxJQUFJLEVBQUU7UUFDUkcsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFFQyxPQUFPLEVBQUU7UUFBbUMsQ0FBQyxDQUFDO1FBQ3JFO01BQ0Y7TUFFQVIsSUFBSSxDQUFDLENBQUM7SUFDUixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTVUsaUJBQWlCLEdBQUdBLENBQUNaLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDNUMsSUFBSUYsR0FBRyxDQUFDSyxJQUFJLENBQUNRLEtBQUssRUFBRTtJQUNsQixLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR2QsR0FBRyxDQUFDSyxJQUFJLENBQUNRLEtBQUssQ0FBQ0UsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtNQUM5QyxJQUFJLENBQUNsQixLQUFLLENBQUNvQixRQUFRLENBQUNoQixHQUFHLENBQUNLLElBQUksQ0FBQ1EsS0FBSyxDQUFDQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ3RDYixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQ25CQyxPQUFPLEVBQUcsZ0JBQWVWLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDUSxLQUFLLENBQUNDLENBQUMsQ0FBRTtRQUM3QyxDQUFDLENBQUM7UUFDRjtNQUNGO0lBQ0Y7RUFDRjtFQUVBWixJQUFJLENBQUMsQ0FBQztBQUNSLENBQUM7QUFFRCxNQUFNZSxZQUFZLEdBQUc7RUFDbkJsQiw2QkFBNkI7RUFDN0JhO0FBQ0YsQ0FBQztBQUVETSxNQUFNLENBQUNDLE9BQU8sR0FBR0YsWUFBWSJ9","map":{"version":3,"names":["db","require","ROLES","User","user","checkDuplicateUsernameOrEmail","req","res","next","findOne","username","body","exec","err","status","send","message","email","checkRolesExisted","roles","i","length","includes","verifySignUp","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/middlewares/","sources":["verifySignUp.js"],"sourcesContent":["const db = require(\"../models\");\nconst ROLES = db.ROLES;\nconst User = db.user;\n\nconst checkDuplicateUsernameOrEmail = (req, res, next) => {\n  // Username\n  User.findOne({\n    username: req.body.username\n  }).exec((err, user) => {\n    if (err) {\n      res.status(500).send({ message: err });\n      return;\n    }\n\n    if (user) {\n      res.status(400).send({ message: \"Failed! Username is already in use!\" });\n      return;\n    }\n\n    // Email\n    User.findOne({\n      email: req.body.email\n    }).exec((err, user) => {\n      if (err) {\n        res.status(500).send({ message: err });\n        return;\n      }\n\n      if (user) {\n        res.status(400).send({ message: \"Failed! Email is already in use!\" });\n        return;\n      }\n\n      next();\n    });\n  });\n};\n\nconst checkRolesExisted = (req, res, next) => {\n  if (req.body.roles) {\n    for (let i = 0; i < req.body.roles.length; i++) {\n      if (!ROLES.includes(req.body.roles[i])) {\n        res.status(400).send({\n          message: `Failed! Role ${req.body.roles[i]} does not exist!`\n        });\n        return;\n      }\n    }\n  }\n\n  next();\n};\n\nconst verifySignUp = {\n  checkDuplicateUsernameOrEmail,\n  checkRolesExisted\n};\n\nmodule.exports = verifySignUp;\n"],"mappings":"AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,WAAW,CAAC;AAC/B,MAAMC,KAAK,GAAGF,EAAE,CAACE,KAAK;AACtB,MAAMC,IAAI,GAAGH,EAAE,CAACI,IAAI;AAEpB,MAAMC,6BAA6B,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxD;EACAL,IAAI,CAACM,OAAO,CAAC;IACXC,QAAQ,EAAEJ,GAAG,CAACK,IAAI,CAACD;EACrB,CAAC,CAAC,CAACE,IAAI,CAAC,CAACC,GAAG,EAAET,IAAI,KAAK;IACrB,IAAIS,GAAG,EAAE;MACPN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACF;IAEA,IAAIT,IAAI,EAAE;MACRG,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAsC,CAAC,CAAC;MACxE;IACF;;IAEA;IACAb,IAAI,CAACM,OAAO,CAAC;MACXQ,KAAK,EAAEX,GAAG,CAACK,IAAI,CAACM;IAClB,CAAC,CAAC,CAACL,IAAI,CAAC,CAACC,GAAG,EAAET,IAAI,KAAK;MACrB,IAAIS,GAAG,EAAE;QACPN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAEH;QAAI,CAAC,CAAC;QACtC;MACF;MAEA,IAAIT,IAAI,EAAE;QACRG,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAmC,CAAC,CAAC;QACrE;MACF;MAEAR,IAAI,CAAC,CAAC;IACR,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAED,MAAMU,iBAAiB,GAAGA,CAACZ,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC5C,IAAIF,GAAG,CAACK,IAAI,CAACQ,KAAK,EAAE;IAClB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGd,GAAG,CAACK,IAAI,CAACQ,KAAK,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;MAC9C,IAAI,CAAClB,KAAK,CAACoB,QAAQ,CAAChB,GAAG,CAACK,IAAI,CAACQ,KAAK,CAACC,CAAC,CAAC,CAAC,EAAE;QACtCb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UACnBC,OAAO,EAAG,gBAAeV,GAAG,CAACK,IAAI,CAACQ,KAAK,CAACC,CAAC,CAAE;QAC7C,CAAC,CAAC;QACF;MACF;IACF;EACF;EAEAZ,IAAI,CAAC,CAAC;AACR,CAAC;AAED,MAAMe,YAAY,GAAG;EACnBlB,6BAA6B;EAC7Ba;AACF,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAGF,YAAY"}},"mtime":1697837260229},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/user.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is for creating, retrieving, updating, and deleting users.\r\n * It also includes a function for getting all superUsers for a specific site.\r\n */\n\nconst db = require(\"../../../models\");\nconst User = db.user;\nconst siteHelper = require(\"../../../helper/site\");\nconst User_Site_Availability = db.user_site_availability;\nconst Global_Permissions = db.global_permissions;\nconst Site = db.site;\nconst Site_Permissions = db.site_permissions;\nexports.createUser = (req, res) => {\n  const user = new User({\n    ...req.body\n  });\n  user.save((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n  });\n};\nexports.getUsers = async (req, res) => {\n  Site_Permissions.find().populate(\"roles\", \"-__v\").exec((err, site_permissions) => {\n    if (err) {\n      return err;\n    }\n    Global_Permissions.find().populate(\"roles\", \"-__v\").exec((err, global_permissions) => {\n      if (err) {\n        return err;\n      }\n      User.find().exec((err, users) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        if (!users) {\n          return res.status(404).send({\n            message: \"Products Not found.\"\n          });\n        }\n        res.status(200).send(users);\n      });\n    });\n  });\n};\nexports.getUsersForSite = (req, res) => {\n  const site_name = siteHelper.getSiteName(req);\n  Site.findOne({\n    domain: site_name\n  }).exec((err, site) => {\n    if (err) {\n      return err;\n    }\n    User_Site_Availability.find({\n      site_id: site._id\n    }).select('user_id -_id').exec((err, user_site_availability) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      User.find().exec((err, users) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        users = siteHelper.filterFromList(users, user_site_availability, 'user_id');\n        if (!users) {\n          return res.status(404).send({\n            message: \"Users Not found.\"\n          });\n        }\n        res.status(200).send(users);\n      });\n    });\n  });\n};\nexports.getUser = (req, res) => {\n  const site_name = siteHelper.getSiteName(req);\n  Site.findOne({\n    domain: site_name\n  }).exec((err, site) => {\n    if (err) {\n      return err;\n    }\n    User_Site_Availability.find({\n      site_id: site._id\n    }).select('user_id -_id').exec((err, user_site_availability) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      User.findOne({\n        _id: req.params.id\n      }).exec((err, user) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        user = siteHelper.filterFromList(user, user_site_availability, 'user_id');\n        if (!user) {\n          return res.status(404).send({\n            message: \"User Not found.\"\n          });\n        }\n        const user_info = {\n          first_name: user.first_name,\n          last_name: user.last_name\n        };\n        res.status(200).send(user_info);\n      });\n    });\n  });\n};\nexports.getSuperUsers = (req, res) => {\n  const site_name = siteHelper.getSiteName(req);\n  Site.findOne({\n    domain: site_name\n  }).exec((err, site) => {\n    if (err || !site) {\n      return err;\n    }\n    User_Site_Availability.find({\n      site_id: site._id\n    }).select('user_id').exec((err, user_site_availability) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      Site_Permissions.aggregate([{\n        $match: {\n          'site_id': site._id\n        }\n      }, {\n        $lookup: {\n          from: \"roles\",\n          localField: \"roles\",\n          foreignField: \"_id\",\n          as: \"role\"\n        }\n      }, {\n        $match: {\n          \"role.name\": \"superUser\"\n        }\n      }]).exec((err, site_permissions) => {\n        if (err) {\n          return null;\n        }\n        User.find().select('first_name last_name _id description profile_image').exec((err, users) => {\n          if (err) {\n            res.status(500).send({\n              message: err\n            });\n            return;\n          }\n          users = siteHelper.filterFromList(users, site_permissions, 'user_id', 'superUser');\n          users = siteHelper.filterFromList(users, user_site_availability, 'user_id', null);\n          if (!users) {\n            return res.status(404).send({\n              message: \"Users Not found.\"\n            });\n          }\n          return res.status(200).send(users);\n        });\n      });\n    });\n  });\n};\nexports.updateUser = (req, res) => {\n  const user_updates = {\n    ...req.body\n  };\n  User.findOneAndUpdate({\n    _id: req.params.id\n  }, user_updates, {\n    new: true\n  }).exec((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!user) {\n      return res.status(404).send({\n        message: \"User Not found.\"\n      });\n    }\n    res.status(200).send(user);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJVc2VyIiwidXNlciIsInNpdGVIZWxwZXIiLCJVc2VyX1NpdGVfQXZhaWxhYmlsaXR5IiwidXNlcl9zaXRlX2F2YWlsYWJpbGl0eSIsIkdsb2JhbF9QZXJtaXNzaW9ucyIsImdsb2JhbF9wZXJtaXNzaW9ucyIsIlNpdGUiLCJzaXRlIiwiU2l0ZV9QZXJtaXNzaW9ucyIsInNpdGVfcGVybWlzc2lvbnMiLCJleHBvcnRzIiwiY3JlYXRlVXNlciIsInJlcSIsInJlcyIsImJvZHkiLCJzYXZlIiwiZXJyIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJnZXRVc2VycyIsImZpbmQiLCJwb3B1bGF0ZSIsImV4ZWMiLCJ1c2VycyIsImdldFVzZXJzRm9yU2l0ZSIsInNpdGVfbmFtZSIsImdldFNpdGVOYW1lIiwiZmluZE9uZSIsImRvbWFpbiIsInNpdGVfaWQiLCJfaWQiLCJzZWxlY3QiLCJmaWx0ZXJGcm9tTGlzdCIsImdldFVzZXIiLCJwYXJhbXMiLCJpZCIsInVzZXJfaW5mbyIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJnZXRTdXBlclVzZXJzIiwiYWdncmVnYXRlIiwiJG1hdGNoIiwiJGxvb2t1cCIsImZyb20iLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiYXMiLCJ1cGRhdGVVc2VyIiwidXNlcl91cGRhdGVzIiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9hdXRoL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsidXNlci5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGlzIGNvZGUgaXMgZm9yIGNyZWF0aW5nLCByZXRyaWV2aW5nLCB1cGRhdGluZywgYW5kIGRlbGV0aW5nIHVzZXJzLlxyXG4gKiBJdCBhbHNvIGluY2x1ZGVzIGEgZnVuY3Rpb24gZm9yIGdldHRpbmcgYWxsIHN1cGVyVXNlcnMgZm9yIGEgc3BlY2lmaWMgc2l0ZS5cclxuICovXHJcblxyXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHNcIik7XHJcbmNvbnN0IFVzZXIgPSBkYi51c2VyO1xyXG5jb25zdCBzaXRlSGVscGVyID0gcmVxdWlyZShcIi4uLy4uLy4uL2hlbHBlci9zaXRlXCIpO1xyXG5cclxuY29uc3QgVXNlcl9TaXRlX0F2YWlsYWJpbGl0eSA9IGRiLnVzZXJfc2l0ZV9hdmFpbGFiaWxpdHk7XHJcbmNvbnN0IEdsb2JhbF9QZXJtaXNzaW9ucyA9IGRiLmdsb2JhbF9wZXJtaXNzaW9ucztcclxuY29uc3QgU2l0ZSA9IGRiLnNpdGU7XHJcbmNvbnN0IFNpdGVfUGVybWlzc2lvbnMgPSBkYi5zaXRlX3Blcm1pc3Npb25zO1xyXG5cclxuZXhwb3J0cy5jcmVhdGVVc2VyID0gKHJlcSwgcmVzKSA9PiB7XHJcblx0Y29uc3QgdXNlciA9IG5ldyBVc2VyKHtcclxuICAgICAgICAuLi5yZXEuYm9keVxyXG5cdH0pO1xyXG5cclxuXHR1c2VyLnNhdmUoKGVyciwgdXNlcikgPT4ge1xyXG5cdFx0aWYgKGVycikge1xyXG5cdFx0XHRyZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRVc2VycyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgU2l0ZV9QZXJtaXNzaW9ucy5maW5kKClcclxuICAgICAgICAucG9wdWxhdGUoXCJyb2xlc1wiLCBcIi1fX3ZcIilcclxuICAgICAgICAuZXhlYygoZXJyLCBzaXRlX3Blcm1pc3Npb25zKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEdsb2JhbF9QZXJtaXNzaW9ucy5maW5kKClcclxuICAgICAgICAgICAgICAgIC5wb3B1bGF0ZShcInJvbGVzXCIsIFwiLV9fdlwiKVxyXG4gICAgICAgICAgICAgICAgLmV4ZWMoKGVyciwgZ2xvYmFsX3Blcm1pc3Npb25zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVXNlci5maW5kKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmV4ZWMoKGVyciwgdXNlcnMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2Vycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiUHJvZHVjdHMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHVzZXJzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRVc2Vyc0ZvclNpdGUgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcclxuXHJcbiAgICBTaXRlLmZpbmRPbmUoe1xyXG4gICAgICAgIGRvbWFpbjogc2l0ZV9uYW1lXHJcbiAgICB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlcnI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBVc2VyX1NpdGVfQXZhaWxhYmlsaXR5LmZpbmQoeyBzaXRlX2lkOiBzaXRlLl9pZCB9KVxyXG4gICAgICAgICAgICAuc2VsZWN0KCd1c2VyX2lkIC1faWQnKVxyXG4gICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VyX3NpdGVfYXZhaWxhYmlsaXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgVXNlci5maW5kKClcclxuICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VycykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VycyA9IHNpdGVIZWxwZXIuZmlsdGVyRnJvbUxpc3QodXNlcnMsIHVzZXJfc2l0ZV9hdmFpbGFiaWxpdHksICd1c2VyX2lkJyk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2Vycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VycyBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHVzZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0VXNlciA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2l0ZV9uYW1lID0gc2l0ZUhlbHBlci5nZXRTaXRlTmFtZShyZXEpO1xyXG5cclxuICAgIFNpdGUuZmluZE9uZSh7XHJcbiAgICAgICAgZG9tYWluOiBzaXRlX25hbWVcclxuICAgIH0pLmV4ZWMoKGVyciwgc2l0ZSkgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVycjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFVzZXJfU2l0ZV9BdmFpbGFiaWxpdHkuZmluZCh7IHNpdGVfaWQ6IHNpdGUuX2lkIH0pXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJ3VzZXJfaWQgLV9pZCcpXHJcbiAgICAgICAgICAgIC5leGVjKChlcnIsIHVzZXJfc2l0ZV9hdmFpbGFiaWxpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBVc2VyLmZpbmRPbmUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gc2l0ZUhlbHBlci5maWx0ZXJGcm9tTGlzdCh1c2VyLCB1c2VyX3NpdGVfYXZhaWxhYmlsaXR5LCAndXNlcl9pZCcpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VyIE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyX2luZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdF9uYW1lOiB1c2VyLmZpcnN0X25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X25hbWU6IHVzZXIubGFzdF9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQodXNlcl9pbmZvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFN1cGVyVXNlcnMgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcclxuXHJcbiAgICBTaXRlLmZpbmRPbmUoe1xyXG4gICAgICAgIGRvbWFpbjogc2l0ZV9uYW1lXHJcbiAgICB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcclxuICAgICAgICBpZiAoZXJyIHx8ICFzaXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlcnI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBVc2VyX1NpdGVfQXZhaWxhYmlsaXR5LmZpbmQoeyBzaXRlX2lkOiBzaXRlLl9pZCB9KVxyXG4gICAgICAgICAgICAuc2VsZWN0KCd1c2VyX2lkJylcclxuICAgICAgICAgICAgLmV4ZWMoKGVyciwgdXNlcl9zaXRlX2F2YWlsYWJpbGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBTaXRlX1Blcm1pc3Npb25zLmFnZ3JlZ2F0ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgeyAkbWF0Y2g6IHsgJ3NpdGVfaWQnOiBzaXRlLl9pZCB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9va3VwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBcInJvbGVzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbEZpZWxkOiBcInJvbGVzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlaWduRmllbGQ6IFwiX2lkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhczogXCJyb2xlXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1hdGNoOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJvbGUubmFtZVwiOiBcInN1cGVyVXNlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leGVjKChlcnIsIHNpdGVfcGVybWlzc2lvbnMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVzZXIuZmluZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCdmaXJzdF9uYW1lIGxhc3RfbmFtZSBfaWQgZGVzY3JpcHRpb24gcHJvZmlsZV9pbWFnZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VycykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzID0gc2l0ZUhlbHBlci5maWx0ZXJGcm9tTGlzdCh1c2Vycywgc2l0ZV9wZXJtaXNzaW9ucywgJ3VzZXJfaWQnLCAnc3VwZXJVc2VyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnMgPSBzaXRlSGVscGVyLmZpbHRlckZyb21MaXN0KHVzZXJzLCB1c2VyX3NpdGVfYXZhaWxhYmlsaXR5LCAndXNlcl9pZCcsIG51bGwpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VycyBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh1c2Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMudXBkYXRlVXNlciA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlcl91cGRhdGVzID0ge1xyXG4gICAgICAgIC4uLnJlcS5ib2R5XHJcbiAgICB9O1xyXG5cclxuICAgIFVzZXIuZmluZE9uZUFuZFVwZGF0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9LCB1c2VyX3VwZGF0ZXMsIHsgbmV3OiB0cnVlIH0pXHJcbiAgICAgICAgLmV4ZWMoKGVyciwgdXNlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlVzZXIgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh1c2VyKTtcclxuICAgICAgICB9KTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNyQyxNQUFNQyxJQUFJLEdBQUdGLEVBQUUsQ0FBQ0csSUFBSTtBQUNwQixNQUFNQyxVQUFVLEdBQUdILE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUVsRCxNQUFNSSxzQkFBc0IsR0FBR0wsRUFBRSxDQUFDTSxzQkFBc0I7QUFDeEQsTUFBTUMsa0JBQWtCLEdBQUdQLEVBQUUsQ0FBQ1Esa0JBQWtCO0FBQ2hELE1BQU1DLElBQUksR0FBR1QsRUFBRSxDQUFDVSxJQUFJO0FBQ3BCLE1BQU1DLGdCQUFnQixHQUFHWCxFQUFFLENBQUNZLGdCQUFnQjtBQUU1Q0MsT0FBTyxDQUFDQyxVQUFVLEdBQUcsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbEMsTUFBTWIsSUFBSSxHQUFHLElBQUlELElBQUksQ0FBQztJQUNmLEdBQUdhLEdBQUcsQ0FBQ0U7RUFDZCxDQUFDLENBQUM7RUFFRmQsSUFBSSxDQUFDZSxJQUFJLENBQUMsQ0FBQ0MsR0FBRyxFQUFFaEIsSUFBSSxLQUFLO0lBQ3hCLElBQUlnQixHQUFHLEVBQUU7TUFDUkgsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUVIO01BQUksQ0FBQyxDQUFDO01BQ3RDO0lBQ0Q7RUFDRCxDQUFDLENBQUM7QUFDSCxDQUFDO0FBRUROLE9BQU8sQ0FBQ1UsUUFBUSxHQUFHLE9BQU9SLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ25DTCxnQkFBZ0IsQ0FBQ2EsSUFBSSxDQUFDLENBQUMsQ0FDbEJDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQ3pCQyxJQUFJLENBQUMs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","map":{"version":3,"names":["db","require","User","user","siteHelper","User_Site_Availability","user_site_availability","Global_Permissions","global_permissions","Site","site","Site_Permissions","site_permissions","exports","createUser","req","res","body","save","err","status","send","message","getUsers","find","populate","exec","users","getUsersForSite","site_name","getSiteName","findOne","domain","site_id","_id","select","filterFromList","getUser","params","id","user_info","first_name","last_name","getSuperUsers","aggregate","$match","$lookup","from","localField","foreignField","as","updateUser","user_updates","findOneAndUpdate","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/","sources":["user.controller.js"],"sourcesContent":["/**\r\n * This code is for creating, retrieving, updating, and deleting users.\r\n * It also includes a function for getting all superUsers for a specific site.\r\n */\r\n\r\nconst db = require(\"../../../models\");\r\nconst User = db.user;\r\nconst siteHelper = require(\"../../../helper/site\");\r\n\r\nconst User_Site_Availability = db.user_site_availability;\r\nconst Global_Permissions = db.global_permissions;\r\nconst Site = db.site;\r\nconst Site_Permissions = db.site_permissions;\r\n\r\nexports.createUser = (req, res) => {\r\n\tconst user = new User({\r\n        ...req.body\r\n\t});\r\n\r\n\tuser.save((err, user) => {\r\n\t\tif (err) {\r\n\t\t\tres.status(500).send({ message: err });\r\n\t\t\treturn;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexports.getUsers = async (req, res) => {\r\n    Site_Permissions.find()\r\n        .populate(\"roles\", \"-__v\")\r\n        .exec((err, site_permissions) => {\r\n            if (err) {\r\n                return err;\r\n            }\r\n\r\n            Global_Permissions.find()\r\n                .populate(\"roles\", \"-__v\")\r\n                .exec((err, global_permissions) => {\r\n                    if (err) {\r\n                        return err;\r\n                    }\r\n\r\n                    User.find()\r\n                        .exec((err, users) => {\r\n                            if (err) {\r\n                                res.status(500).send({ message: err });\r\n                                return;\r\n                            }\r\n\r\n                            if (!users) {\r\n                                return res.status(404).send({ message: \"Products Not found.\" });\r\n                            }\r\n\r\n                            res.status(200).send(users);\r\n\r\n                        });\r\n\r\n                });\r\n        });\r\n};\r\n\r\nexports.getUsersForSite = (req, res) => {\r\n    const site_name = siteHelper.getSiteName(req);\r\n\r\n    Site.findOne({\r\n        domain: site_name\r\n    }).exec((err, site) => {\r\n        if (err) {\r\n            return err;\r\n        }\r\n\r\n        User_Site_Availability.find({ site_id: site._id })\r\n            .select('user_id -_id')\r\n            .exec((err, user_site_availability) => {\r\n                if (err) {\r\n                    res.status(500).send({ message: err });\r\n                    return;\r\n                }\r\n                User.find()\r\n                    .exec((err, users) => {\r\n                        if (err) {\r\n                            res.status(500).send({ message: err });\r\n                            return;\r\n                        }\r\n                        users = siteHelper.filterFromList(users, user_site_availability, 'user_id');\r\n\r\n\r\n                        if (!users) {\r\n                            return res.status(404).send({ message: \"Users Not found.\" });\r\n                        }\r\n\r\n                        res.status(200).send(users);\r\n                    });\r\n            });\r\n    });\r\n};\r\n\r\nexports.getUser = (req, res) => {\r\n    const site_name = siteHelper.getSiteName(req);\r\n\r\n    Site.findOne({\r\n        domain: site_name\r\n    }).exec((err, site) => {\r\n        if (err) {\r\n            return err;\r\n        }\r\n\r\n        User_Site_Availability.find({ site_id: site._id })\r\n            .select('user_id -_id')\r\n            .exec((err, user_site_availability) => {\r\n                if (err) {\r\n                    res.status(500).send({ message: err });\r\n                    return;\r\n                }\r\n                User.findOne({ _id: req.params.id })\r\n                    .exec((err, user) => {\r\n                        if (err) {\r\n                            res.status(500).send({ message: err });\r\n                            return;\r\n                        }\r\n\r\n                        user = siteHelper.filterFromList(user, user_site_availability, 'user_id');\r\n\r\n\r\n                        if (!user) {\r\n                            return res.status(404).send({ message: \"User Not found.\" });\r\n                        }\r\n                        const user_info = {\r\n                            first_name: user.first_name,\r\n                            last_name: user.last_name\r\n                        }\r\n                        res.status(200).send(user_info);\r\n\r\n                    });\r\n            });\r\n    });\r\n};\r\n\r\nexports.getSuperUsers = (req, res) => {\r\n    const site_name = siteHelper.getSiteName(req);\r\n\r\n    Site.findOne({\r\n        domain: site_name\r\n    }).exec((err, site) => {\r\n        if (err || !site) {\r\n            return err;\r\n        }\r\n\r\n        User_Site_Availability.find({ site_id: site._id })\r\n            .select('user_id')\r\n            .exec((err, user_site_availability) => {\r\n                if (err) {\r\n                    res.status(500).send({ message: err });\r\n                    return;\r\n                }\r\n\r\n                Site_Permissions.aggregate([\r\n                    { $match: { 'site_id': site._id } },\r\n                    {\r\n                        $lookup: {\r\n                            from: \"roles\",\r\n                            localField: \"roles\",\r\n                            foreignField: \"_id\",\r\n                            as: \"role\"\r\n\r\n                        }\r\n                    },\r\n                    {\r\n                        $match: {\r\n                            \"role.name\": \"superUser\"\r\n                        }\r\n                    }\r\n                ])\r\n                    .exec((err, site_permissions) => {\r\n                        if (err) {\r\n                            return null;\r\n                        }\r\n\r\n                        User.find()\r\n                            .select('first_name last_name _id description profile_image')\r\n                            .exec((err, users) => {\r\n                                if (err) {\r\n                                    res.status(500).send({ message: err });\r\n                                    return;\r\n                                }\r\n\r\n                                users = siteHelper.filterFromList(users, site_permissions, 'user_id', 'superUser');\r\n                                users = siteHelper.filterFromList(users, user_site_availability, 'user_id', null);\r\n\r\n\r\n\r\n                                if (!users) {\r\n                                    return res.status(404).send({ message: \"Users Not found.\" });\r\n                                }\r\n                                return res.status(200).send(users);\r\n                            });\r\n                    });\r\n            });\r\n    });\r\n};\r\n\r\nexports.updateUser = (req, res) => {\r\n    const user_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    User.findOneAndUpdate({ _id: req.params.id }, user_updates, { new: true })\r\n        .exec((err, user) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!user) {\r\n                return res.status(404).send({ message: \"User Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(user);\r\n        });\r\n};\r\n"],"mappings":"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"}},"mtime":1701964539806},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/site_permissions.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the routes for the site permissions controller.\r\n * The first two routes are for getting all site permissions or getting site permissions by user.\r\n * The last two routes are for creating or updating a site permission.\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/site_permissions.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/site_permissions/\", controller.getSitePermissions);\n  app.get(\"/api/site_permissions/by-user/:user_id\", controller.getSitePermissionsByUser);\n  app.post(\"/api/site_permissions\", [authJwt.verifyToken], controller.createSitePermissions);\n  app.put(\"/api/site_permissions/:id\", [authJwt.verifyToken], controller.updateSitePermissions);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsImdldFNpdGVQZXJtaXNzaW9ucyIsImdldFNpdGVQZXJtaXNzaW9uc0J5VXNlciIsInBvc3QiLCJ2ZXJpZnlUb2tlbiIsImNyZWF0ZVNpdGVQZXJtaXNzaW9ucyIsInB1dCIsInVwZGF0ZVNpdGVQZXJtaXNzaW9ucyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9hdXRoL3JvdXRlcy8iLCJzb3VyY2VzIjpbInNpdGVfcGVybWlzc2lvbnMucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGlzIGNvZGUgaXMgdGhlIHJvdXRlcyBmb3IgdGhlIHNpdGUgcGVybWlzc2lvbnMgY29udHJvbGxlci5cclxuICogVGhlIGZpcnN0IHR3byByb3V0ZXMgYXJlIGZvciBnZXR0aW5nIGFsbCBzaXRlIHBlcm1pc3Npb25zIG9yIGdldHRpbmcgc2l0ZSBwZXJtaXNzaW9ucyBieSB1c2VyLlxyXG4gKiBUaGUgbGFzdCB0d28gcm91dGVzIGFyZSBmb3IgY3JlYXRpbmcgb3IgdXBkYXRpbmcgYSBzaXRlIHBlcm1pc3Npb24uXHJcbiAqL1xyXG5jb25zdCB7IGF1dGhKd3QgfSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9taWRkbGV3YXJlc1wiKTtcclxuY29uc3QgY29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy9zaXRlX3Blcm1pc3Npb25zLmNvbnRyb2xsZXJcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkge1xyXG4gIGFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcclxuICAgIHJlcy5oZWFkZXIoXHJcbiAgICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLFxyXG4gICAgICBcIngtYWNjZXNzLXRva2VuLCBPcmlnaW4sIENvbnRlbnQtVHlwZSwgQWNjZXB0XCJcclxuICAgICk7XHJcbiAgICBuZXh0KCk7XHJcbiAgfSk7XHJcblxyXG4gICAgYXBwLmdldChcIi9hcGkvc2l0ZV9wZXJtaXNzaW9ucy9cIiwgY29udHJvbGxlci5nZXRTaXRlUGVybWlzc2lvbnMpO1xyXG4gICAgYXBwLmdldChcIi9hcGkvc2l0ZV9wZXJtaXNzaW9ucy9ieS11c2VyLzp1c2VyX2lkXCIsIGNvbnRyb2xsZXIuZ2V0U2l0ZVBlcm1pc3Npb25zQnlVc2VyKTtcclxuICAgIGFwcC5wb3N0KFwiL2FwaS9zaXRlX3Blcm1pc3Npb25zXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuXSwgY29udHJvbGxlci5jcmVhdGVTaXRlUGVybWlzc2lvbnMpO1xyXG4gICAgYXBwLnB1dChcIi9hcGkvc2l0ZV9wZXJtaXNzaW9ucy86aWRcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW5dLCBjb250cm9sbGVyLnVwZGF0ZVNpdGVQZXJtaXNzaW9ucyk7XHJcblxyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07RUFBRUE7QUFBUSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNuRCxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyw0Q0FBNEMsQ0FBQztBQUV4RUUsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBU0MsR0FBRyxFQUFFO0VBQzdCQSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxVQUFTQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0lBQy9CRCxHQUFHLENBQUNFLE1BQU0sQ0FDUiw4QkFBOEIsRUFDOUIsOENBQ0YsQ0FBQztJQUNERCxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQztFQUVBSixHQUFHLENBQUNNLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRVQsVUFBVSxDQUFDVSxrQkFBa0IsQ0FBQztFQUNoRVAsR0FBRyxDQUFDTSxHQUFHLENBQUMsd0NBQXdDLEVBQUVULFVBQVUsQ0FBQ1csd0JBQXdCLENBQUM7RUFDdEZSLEdBQUcsQ0FBQ1MsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUNkLE9BQU8sQ0FBQ2UsV0FBVyxDQUFDLEVBQUViLFVBQVUsQ0FBQ2MscUJBQXFCLENBQUM7RUFDMUZYLEdBQUcsQ0FBQ1ksR0FBRyxDQUFDLDJCQUEyQixFQUFFLENBQUNqQixPQUFPLENBQUNlLFdBQVcsQ0FBQyxFQUFFYixVQUFVLENBQUNnQixxQkFBcUIsQ0FBQztBQUVqRyxDQUFDIn0=","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","getSitePermissions","getSitePermissionsByUser","post","verifyToken","createSitePermissions","put","updateSitePermissions"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/","sources":["site_permissions.routes.js"],"sourcesContent":["/**\r\n * This code is the routes for the site permissions controller.\r\n * The first two routes are for getting all site permissions or getting site permissions by user.\r\n * The last two routes are for creating or updating a site permission.\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/site_permissions.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n    app.get(\"/api/site_permissions/\", controller.getSitePermissions);\r\n    app.get(\"/api/site_permissions/by-user/:user_id\", controller.getSitePermissionsByUser);\r\n    app.post(\"/api/site_permissions\", [authJwt.verifyToken], controller.createSitePermissions);\r\n    app.put(\"/api/site_permissions/:id\", [authJwt.verifyToken], controller.updateSitePermissions);\r\n\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,4CAA4C,CAAC;AAExEE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEAJ,GAAG,CAACM,GAAG,CAAC,wBAAwB,EAAET,UAAU,CAACU,kBAAkB,CAAC;EAChEP,GAAG,CAACM,GAAG,CAAC,wCAAwC,EAAET,UAAU,CAACW,wBAAwB,CAAC;EACtFR,GAAG,CAACS,IAAI,CAAC,uBAAuB,EAAE,CAACd,OAAO,CAACe,WAAW,CAAC,EAAEb,UAAU,CAACc,qBAAqB,CAAC;EAC1FX,GAAG,CAACY,GAAG,CAAC,2BAA2B,EAAE,CAACjB,OAAO,CAACe,WAAW,CAAC,EAAEb,UAAU,CAACgB,qBAAqB,CAAC;AAEjG,CAAC"}},"mtime":1697752512299},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/site_permissions.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is for the SitePermissions model.\r\n * It has functions for creating, reading, updating, and deleting site permissions.\r\n */\nconst db = require(\"../../../models\");\nconst SitePermissions = db.site_permissions;\nexports.createSitePermissions = (req, res) => {\n  const site_permissions = new SitePermissions({\n    ...req.body\n  });\n  Role.findOne({\n    name: req.params.role\n  }).exec((err, role) => {\n    site_permissions.roles = role._id;\n    site_permissions.save((err, site_permission) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n    });\n  });\n};\nexports.getSitePermissions = (req, res) => {\n  SitePermissions.find().populate(\"roles\", \"-__v\").exec((err, site_permissions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_permissions) {\n      return res.status(404).send({\n        message: \"SitePermissions Not found.\"\n      });\n    }\n    res.status(200).send(site_permissions);\n  });\n};\nexports.getSitePermissionsByUser = (req, res) => {\n  const site_name = req.subdomains[0];\n  SitePermissions.find({\n    user_id: res.params.user_id\n  }).exec((err, site_permissions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_permissions) {\n      return res.status(404).send({\n        message: \"SitePermissions Not found.\"\n      });\n    }\n    res.status(200).send(site_permissions);\n  });\n};\nexports.updateSitePermissions = (req, res) => {\n  const site_permissions_updates = {\n    ...req.body\n  };\n  Role.findOne({\n    name: req.params.role\n  }).exec((err, role) => {\n    site_permissions_updates.roles = role._id;\n    SitePermissions.findOneAndUpdate({\n      _id: req.params.id\n    }, site_permissions_updates, {\n      new: true\n    }).exec((err, site_permissions) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      if (!site_permissions) {\n        return res.status(404).send({\n          message: \"SitePermissions Not found.\"\n        });\n      }\n      res.status(200).send(site_permissions);\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJTaXRlUGVybWlzc2lvbnMiLCJzaXRlX3Blcm1pc3Npb25zIiwiZXhwb3J0cyIsImNyZWF0ZVNpdGVQZXJtaXNzaW9ucyIsInJlcSIsInJlcyIsImJvZHkiLCJSb2xlIiwiZmluZE9uZSIsIm5hbWUiLCJwYXJhbXMiLCJyb2xlIiwiZXhlYyIsImVyciIsInJvbGVzIiwiX2lkIiwic2F2ZSIsInNpdGVfcGVybWlzc2lvbiIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwiZ2V0U2l0ZVBlcm1pc3Npb25zIiwiZmluZCIsInBvcHVsYXRlIiwiZ2V0U2l0ZVBlcm1pc3Npb25zQnlVc2VyIiwic2l0ZV9uYW1lIiwic3ViZG9tYWlucyIsInVzZXJfaWQiLCJ1cGRhdGVTaXRlUGVybWlzc2lvbnMiLCJzaXRlX3Blcm1pc3Npb25zX3VwZGF0ZXMiLCJmaW5kT25lQW5kVXBkYXRlIiwiaWQiLCJuZXciXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvYXV0aC9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInNpdGVfcGVybWlzc2lvbnMuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhpcyBjb2RlIGlzIGZvciB0aGUgU2l0ZVBlcm1pc3Npb25zIG1vZGVsLlxyXG4gKiBJdCBoYXMgZnVuY3Rpb25zIGZvciBjcmVhdGluZywgcmVhZGluZywgdXBkYXRpbmcsIGFuZCBkZWxldGluZyBzaXRlIHBlcm1pc3Npb25zLlxyXG4gKi9cclxuY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzXCIpO1xyXG5jb25zdCBTaXRlUGVybWlzc2lvbnMgPSBkYi5zaXRlX3Blcm1pc3Npb25zO1xyXG5cclxuZXhwb3J0cy5jcmVhdGVTaXRlUGVybWlzc2lvbnMgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpdGVfcGVybWlzc2lvbnMgPSBuZXcgU2l0ZVBlcm1pc3Npb25zKHtcclxuICAgICAgICAuLi5yZXEuYm9keVxyXG4gICAgfSk7XHJcbiAgICBSb2xlLmZpbmRPbmUoeyBuYW1lOiByZXEucGFyYW1zLnJvbGUgfSlcclxuICAgICAgICAuZXhlYygoZXJyLCByb2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHNpdGVfcGVybWlzc2lvbnMucm9sZXMgPSByb2xlLl9pZDtcclxuICAgICAgICAgICAgc2l0ZV9wZXJtaXNzaW9ucy5zYXZlKChlcnIsIHNpdGVfcGVybWlzc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFNpdGVQZXJtaXNzaW9ucyA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgU2l0ZVBlcm1pc3Npb25zLmZpbmQoKVxyXG4gICAgICAgIC5wb3B1bGF0ZShcInJvbGVzXCIsIFwiLV9fdlwiKVxyXG4gICAgICAgIC5leGVjKChlcnIsIHNpdGVfcGVybWlzc2lvbnMpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghc2l0ZV9wZXJtaXNzaW9ucykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTaXRlUGVybWlzc2lvbnMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChzaXRlX3Blcm1pc3Npb25zKTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0U2l0ZVBlcm1pc3Npb25zQnlVc2VyID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBzaXRlX25hbWUgPSByZXEuc3ViZG9tYWluc1swXTtcclxuICAgIFNpdGVQZXJtaXNzaW9ucy5maW5kKHsgdXNlcl9pZDogcmVzLnBhcmFtcy51c2VyX2lkIH0pXHJcbiAgICAgICAgLmV4ZWMoKGVyciwgc2l0ZV9wZXJtaXNzaW9ucykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFzaXRlX3Blcm1pc3Npb25zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlNpdGVQZXJtaXNzaW9ucyBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHNpdGVfcGVybWlzc2lvbnMpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy51cGRhdGVTaXRlUGVybWlzc2lvbnMgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpdGVfcGVybWlzc2lvbnNfdXBkYXRlcyA9IHtcclxuICAgICAgICAuLi5yZXEuYm9keVxyXG4gICAgfTtcclxuICAgIFJvbGUuZmluZE9uZSh7IG5hbWU6IHJlcS5wYXJhbXMucm9sZSB9KVxyXG4gICAgICAgIC5leGVjKChlcnIsIHJvbGUpID0+IHtcclxuICAgICAgICAgICAgc2l0ZV9wZXJtaXNzaW9uc191cGRhdGVzLnJvbGVzID0gcm9sZS5faWQ7XHJcbiAgICAgICAgICAgIFNpdGVQZXJtaXNzaW9ucy5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIHNpdGVfcGVybWlzc2lvbnNfdXBkYXRlcywgeyBuZXc6IHRydWUgfSlcclxuICAgICAgICAgICAgICAgIC5leGVjKChlcnIsIHNpdGVfcGVybWlzc2lvbnMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNpdGVfcGVybWlzc2lvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTaXRlUGVybWlzc2lvbnMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoc2l0ZV9wZXJtaXNzaW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNyQyxNQUFNQyxlQUFlLEdBQUdGLEVBQUUsQ0FBQ0csZ0JBQWdCO0FBRTNDQyxPQUFPLENBQUNDLHFCQUFxQixHQUFHLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzFDLE1BQU1KLGdCQUFnQixHQUFHLElBQUlELGVBQWUsQ0FBQztJQUN6QyxHQUFHSSxHQUFHLENBQUNFO0VBQ1gsQ0FBQyxDQUFDO0VBQ0ZDLElBQUksQ0FBQ0MsT0FBTyxDQUFDO0lBQUVDLElBQUksRUFBRUwsR0FBRyxDQUFDTSxNQUFNLENBQUNDO0VBQUssQ0FBQyxDQUFDLENBQ2xDQyxJQUFJLENBQUMsQ0FBQ0MsR0FBRyxFQUFFRixJQUFJLEtBQUs7SUFDakJWLGdCQUFnQixDQUFDYSxLQUFLLEdBQUdILElBQUksQ0FBQ0ksR0FBRztJQUNqQ2QsZ0JBQWdCLENBQUNlLElBQUksQ0FBQyxDQUFDSCxHQUFHLEVBQUVJLGVBQWUsS0FBSztNQUM1QyxJQUFJSixHQUFHLEVBQUU7UUFDTFIsR0FBRyxDQUFDYSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFFQyxPQUFPLEVBQUVQO1FBQUksQ0FBQyxDQUFDO1FBQ3RDO01BQ0o7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7QUFDVixDQUFDO0FBRURYLE9BQU8sQ0FBQ21CLGtCQUFrQixHQUFHLENBQUNqQixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN2Q0wsZUFBZSxDQUFDc0IsSUFBSSxDQUFDLENBQUMsQ0FDakJDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQ3pCWCxJQUFJLENBQUMsQ0FBQ0MsR0FBRyxFQUFFWixnQkFBZ0IsS0FBSztJQUM3QixJQUFJWSxHQUFHLEVBQUU7TUFDTFIsR0FBRyxDQUFDYSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUVQO01BQUksQ0FBQyxDQUFDO01BQ3RDO0lBQ0o7SUFFQSxJQUFJLENBQUNaLGdCQUFnQixFQUFFO01BQ25CLE9BQU9JLEdBQUcsQ0FBQ2EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFO01BQTZCLENBQUMsQ0FBQztJQUMxRTtJQUVBZixHQUFHLENBQUNhLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDbEIsZ0JBQWdCLENBQUM7RUFDMUMsQ0FBQyxDQUFDO0FBQ1YsQ0FBQztBQUVEQyxPQUFPLENBQUNzQix3QkFBd0IsR0FBRyxDQUFDcEIsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDN0MsTUFBTW9CLFNBQVMsR0FBR3JCLEdBQUcsQ0FBQ3NCLFVBQVUsQ0FBQyxDQUFDLENBQUM7RUFDbkMxQixlQUFlLENBQUNzQixJQUFJLENBQUM7SUFBRUssT0FBTyxFQUFFdEIsR0FBRyxDQUFDSyxNQUFNLENBQUNpQjtFQUFRLENBQUMsQ0FBQyxDQUNoRGYsSUFBSSxDQUFDLENBQUNDLEdBQUcsRUFBRVosZ0JBQWdCLEtBQUs7SUFDN0IsSUFBSVksR0FBRyxFQUFFO01BQ0xSLEdBQUcsQ0FBQ2EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFUDtNQUFJLENBQUMsQ0FBQztNQUN0QztJQUNKO0lBRUEsSUFBSSxDQUFDWixnQkFBZ0IsRUFBRTtNQUNuQixPQUFPSSxHQUFHLENBQUNhLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUE2QixDQUFDLENBQUM7SUFDMUU7SUFFQWYsR0FBRyxDQUFDYSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ2xCLGdCQUFnQixDQUFDO0VBQzFDLENBQUMsQ0FBQztBQUNWLENBQUM7QUFFREMsT0FBTyxDQUFDMEIscUJBQXFCLEdBQUcsQ0FBQ3hCLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzFDLE1BQU13Qix3QkFBd0IsR0FBRztJQUM3QixHQUFHekIsR0FBRyxDQUFDRTtFQUNYLENBQUM7RUFDREMsSUFBSSxDQUFDQyxPQUFPLENBQUM7SUFBRUMsSUFBSSxFQUFFTCxHQUFHLENBQUNNLE1BQU0sQ0FBQ0M7RUFBSyxDQUFDLENBQUMsQ0FDbENDLElBQUksQ0FBQyxDQUFDQyxHQUFHLEVBQUVGLElBQUksS0FBSztJQUNqQmtCLHdCQUF3QixDQUFDZixLQUFLLEdBQUdILElBQUksQ0FBQ0ksR0FBRztJQUN6Q2YsZUFBZSxDQUFDOEIsZ0JBQWdCLENBQUM7TUFBRWYsR0FBRyxFQUFFWCxHQUFHLENBQUNNLE1BQU0sQ0FBQ3FCO0lBQUcsQ0FBQyxFQUFFRix3QkFBd0IsRUFBRTtNQUFFRyxHQUFHLEVBQUU7SUFBSyxDQUFDLENBQUMsQ0FDNUZwQixJQUFJLENBQUMsQ0FBQ0MsR0FBRyxFQUFFWixnQkFBZ0IsS0FBSztNQUM3QixJQUFJWSxHQUFHLEVBQUU7UUFDTFIsR0FBRyxDQUFDYSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFFQyxPQUFPLEVBQUVQO1FBQUksQ0FBQyxDQUFDO1FBQ3RDO01BQ0o7TUFFQSxJQUFJLENBQUNaLGdCQUFnQixFQUFFO1FBQ25CLE9BQU9JLEdBQUcsQ0FBQ2EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBRUMsT0FBTyxFQUFFO1FBQTZCLENBQUMsQ0FBQztNQUMxRTtNQUVBZixHQUFHLENBQUNhLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDbEIsZ0JBQWdCLENBQUM7SUFDMUMsQ0FBQyxDQUFDO0VBQ1YsQ0FBQyxDQUFDO0FBQ1YsQ0FBQyJ9","map":{"version":3,"names":["db","require","SitePermissions","site_permissions","exports","createSitePermissions","req","res","body","Role","findOne","name","params","role","exec","err","roles","_id","save","site_permission","status","send","message","getSitePermissions","find","populate","getSitePermissionsByUser","site_name","subdomains","user_id","updateSitePermissions","site_permissions_updates","findOneAndUpdate","id","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/","sources":["site_permissions.controller.js"],"sourcesContent":["/**\r\n * This code is for the SitePermissions model.\r\n * It has functions for creating, reading, updating, and deleting site permissions.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst SitePermissions = db.site_permissions;\r\n\r\nexports.createSitePermissions = (req, res) => {\r\n    const site_permissions = new SitePermissions({\r\n        ...req.body\r\n    });\r\n    Role.findOne({ name: req.params.role })\r\n        .exec((err, role) => {\r\n            site_permissions.roles = role._id;\r\n            site_permissions.save((err, site_permission) => {\r\n                if (err) {\r\n                    res.status(500).send({ message: err });\r\n                    return;\r\n                }\r\n            });\r\n        });\r\n};\r\n\r\nexports.getSitePermissions = (req, res) => {\r\n    SitePermissions.find()\r\n        .populate(\"roles\", \"-__v\")\r\n        .exec((err, site_permissions) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!site_permissions) {\r\n                return res.status(404).send({ message: \"SitePermissions Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(site_permissions);\r\n        });\r\n};\r\n\r\nexports.getSitePermissionsByUser = (req, res) => {\r\n    const site_name = req.subdomains[0];\r\n    SitePermissions.find({ user_id: res.params.user_id })\r\n        .exec((err, site_permissions) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!site_permissions) {\r\n                return res.status(404).send({ message: \"SitePermissions Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(site_permissions);\r\n        });\r\n};\r\n\r\nexports.updateSitePermissions = (req, res) => {\r\n    const site_permissions_updates = {\r\n        ...req.body\r\n    };\r\n    Role.findOne({ name: req.params.role })\r\n        .exec((err, role) => {\r\n            site_permissions_updates.roles = role._id;\r\n            SitePermissions.findOneAndUpdate({ _id: req.params.id }, site_permissions_updates, { new: true })\r\n                .exec((err, site_permissions) => {\r\n                    if (err) {\r\n                        res.status(500).send({ message: err });\r\n                        return;\r\n                    }\r\n\r\n                    if (!site_permissions) {\r\n                        return res.status(404).send({ message: \"SitePermissions Not found.\" });\r\n                    }\r\n\r\n                    res.status(200).send(site_permissions);\r\n                });\r\n        });\r\n};\r\n\r\n"],"mappings":"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"}},"mtime":1701964550694},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/auth.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the routes for the auth controller.\r\n * The first route is for signing up, and the second is for signing in.\r\n */\nconst {\n  verifySignUp\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/auth.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.post(\"/api/auth/signup\", [verifySignUp.checkDuplicateUsernameOrEmail, verifySignUp.checkRolesExisted], controller.signup);\n  app.post(\"/api/auth/signin\", controller.signin);\n  app.post(\"/api/auth/oauth-signup\", controller.oAuthSignup);\n  app.post(\"/api/auth/oauth-signin\", controller.oAuthSignin);\n  app.post(\"/api/auth/create-google-auth-link\", controller.createLink);\n  app.get(\"/api/auth/handle-google-redirect\", controller.handleGoogleRedirect);\n  app.post(\"/api/auth/get-valid-token\", controller.getValidToken);\n  app.post(\"/api/auth/create-microsoft-auth-link\", controller.createMicrosoftLink);\n  app.get(\"/api/auth/handle-microsoft-redirect\", controller.handleMicrosoftRedirect);\n  app.post(\"/api/auth/get-valid-microsoft-token\", controller.getValidMicrosoftToken);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2ZXJpZnlTaWduVXAiLCJyZXF1aXJlIiwiY29udHJvbGxlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcHAiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwicG9zdCIsImNoZWNrRHVwbGljYXRlVXNlcm5hbWVPckVtYWlsIiwiY2hlY2tSb2xlc0V4aXN0ZWQiLCJzaWdudXAiLCJzaWduaW4iLCJvQXV0aFNpZ251cCIsIm9BdXRoU2lnbmluIiwiY3JlYXRlTGluayIsImdldCIsImhhbmRsZUdvb2dsZVJlZGlyZWN0IiwiZ2V0VmFsaWRUb2tlbiIsImNyZWF0ZU1pY3Jvc29mdExpbmsiLCJoYW5kbGVNaWNyb3NvZnRSZWRpcmVjdCIsImdldFZhbGlkTWljcm9zb2Z0VG9rZW4iXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvYXV0aC9yb3V0ZXMvIiwic291cmNlcyI6WyJhdXRoLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhpcyBjb2RlIGlzIHRoZSByb3V0ZXMgZm9yIHRoZSBhdXRoIGNvbnRyb2xsZXIuXHJcbiAqIFRoZSBmaXJzdCByb3V0ZSBpcyBmb3Igc2lnbmluZyB1cCwgYW5kIHRoZSBzZWNvbmQgaXMgZm9yIHNpZ25pbmcgaW4uXHJcbiAqL1xyXG5jb25zdCB7IHZlcmlmeVNpZ25VcCB9ID0gcmVxdWlyZShcIi4uLy4uLy4uL21pZGRsZXdhcmVzXCIpO1xyXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL2F1dGguY29udHJvbGxlclwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XHJcbiAgYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgcmVzLmhlYWRlcihcclxuICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbiAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxyXG4gICAgKTtcclxuICAgIG5leHQoKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLnBvc3QoXHJcbiAgICBcIi9hcGkvYXV0aC9zaWdudXBcIixcclxuICAgIFtcclxuICAgICAgdmVyaWZ5U2lnblVwLmNoZWNrRHVwbGljYXRlVXNlcm5hbWVPckVtYWlsLFxyXG4gICAgICB2ZXJpZnlTaWduVXAuY2hlY2tSb2xlc0V4aXN0ZWRcclxuICAgIF0sXHJcbiAgICBjb250cm9sbGVyLnNpZ251cFxyXG4gICk7XHJcblxyXG4gIGFwcC5wb3N0KFwiL2FwaS9hdXRoL3NpZ25pblwiLCBjb250cm9sbGVyLnNpZ25pbik7XHJcblxyXG4gIGFwcC5wb3N0KFwiL2FwaS9hdXRoL29hdXRoLXNpZ251cFwiLCBjb250cm9sbGVyLm9BdXRoU2lnbnVwKTtcclxuXHJcbiAgYXBwLnBvc3QoXCIvYXBpL2F1dGgvb2F1dGgtc2lnbmluXCIsIGNvbnRyb2xsZXIub0F1dGhTaWduaW4pO1xyXG5cclxuICBhcHAucG9zdChcIi9hcGkvYXV0aC9jcmVhdGUtZ29vZ2xlLWF1dGgtbGlua1wiLCBjb250cm9sbGVyLmNyZWF0ZUxpbmspO1xyXG5cclxuICBhcHAuZ2V0KFwiL2FwaS9hdXRoL2hhbmRsZS1nb29nbGUtcmVkaXJlY3RcIiwgY29udHJvbGxlci5oYW5kbGVHb29nbGVSZWRpcmVjdCk7XHJcblxyXG4gIGFwcC5wb3N0KFwiL2FwaS9hdXRoL2dldC12YWxpZC10b2tlblwiLCBjb250cm9sbGVyLmdldFZhbGlkVG9rZW4pO1xyXG5cclxuICBhcHAucG9zdChcIi9hcGkvYXV0aC9jcmVhdGUtbWljcm9zb2Z0LWF1dGgtbGlua1wiLCBjb250cm9sbGVyLmNyZWF0ZU1pY3Jvc29mdExpbmspO1xyXG5cclxuICBhcHAuZ2V0KFwiL2FwaS9hdXRoL2hhbmRsZS1taWNyb3NvZnQtcmVkaXJlY3RcIiwgY29udHJvbGxlci5oYW5kbGVNaWNyb3NvZnRSZWRpcmVjdCk7XHJcblxyXG4gIGFwcC5wb3N0KFwiL2FwaS9hdXRoL2dldC12YWxpZC1taWNyb3NvZnQtdG9rZW5cIiwgY29udHJvbGxlci5nZXRWYWxpZE1pY3Jvc29mdFRva2VuKTtcclxuXHJcblxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtFQUFFQTtBQUFhLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ3hELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBRTVERSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFTQyxHQUFHLEVBQUU7RUFDN0JBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFVBQVNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDL0JELEdBQUcsQ0FBQ0UsTUFBTSxDQUNSLDhCQUE4QixFQUM5Qiw4Q0FDRixDQUFDO0lBQ0RELElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDO0VBRUZKLEdBQUcsQ0FBQ00sSUFBSSxDQUNOLGtCQUFrQixFQUNsQixDQUNFWCxZQUFZLENBQUNZLDZCQUE2QixFQUMxQ1osWUFBWSxDQUFDYSxpQkFBaUIsQ0FDL0IsRUFDRFgsVUFBVSxDQUFDWSxNQUNiLENBQUM7RUFFRFQsR0FBRyxDQUFDTSxJQUFJLENBQUMsa0JBQWtCLEVBQUVULFVBQVUsQ0FBQ2EsTUFBTSxDQUFDO0VBRS9DVixHQUFHLENBQUNNLElBQUksQ0FBQyx3QkFBd0IsRUFBRVQsVUFBVSxDQUFDYyxXQUFXLENBQUM7RUFFMURYLEdBQUcsQ0FBQ00sSUFBSSxDQUFDLHdCQUF3QixFQUFFVCxVQUFVLENBQUNlLFdBQVcsQ0FBQztFQUUxRFosR0FBRyxDQUFDTSxJQUFJLENBQUMsbUNBQW1DLEVBQUVULFVBQVUsQ0FBQ2dCLFVBQVUsQ0FBQztFQUVwRWIsR0FBRyxDQUFDYyxHQUFHLENBQUMsa0NBQWtDLEVBQUVqQixVQUFVLENBQUNrQixvQkFBb0IsQ0FBQztFQUU1RWYsR0FBRyxDQUFDTSxJQUFJLENBQUMsMkJBQTJCLEVBQUVULFVBQVUsQ0FBQ21CLGFBQWEsQ0FBQztFQUUvRGhCLEdBQUcsQ0FBQ00sSUFBSSxDQUFDLHNDQUFzQyxFQUFFVCxVQUFVLENBQUNvQixtQkFBbUIsQ0FBQztFQUVoRmpCLEdBQUcsQ0FBQ2MsR0FBRyxDQUFDLHFDQUFxQyxFQUFFakIsVUFBVSxDQUFDcUIsdUJBQXVCLENBQUM7RUFFbEZsQixHQUFHLENBQUNNLElBQUksQ0FBQyxxQ0FBcUMsRUFBRVQsVUFBVSxDQUFDc0Isc0JBQXNCLENBQUM7QUFHcEYsQ0FBQyJ9","map":{"version":3,"names":["verifySignUp","require","controller","module","exports","app","use","req","res","next","header","post","checkDuplicateUsernameOrEmail","checkRolesExisted","signup","signin","oAuthSignup","oAuthSignin","createLink","get","handleGoogleRedirect","getValidToken","createMicrosoftLink","handleMicrosoftRedirect","getValidMicrosoftToken"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/routes/","sources":["auth.routes.js"],"sourcesContent":["/**\r\n * This code is the routes for the auth controller.\r\n * The first route is for signing up, and the second is for signing in.\r\n */\r\nconst { verifySignUp } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/auth.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.post(\r\n    \"/api/auth/signup\",\r\n    [\r\n      verifySignUp.checkDuplicateUsernameOrEmail,\r\n      verifySignUp.checkRolesExisted\r\n    ],\r\n    controller.signup\r\n  );\r\n\r\n  app.post(\"/api/auth/signin\", controller.signin);\r\n\r\n  app.post(\"/api/auth/oauth-signup\", controller.oAuthSignup);\r\n\r\n  app.post(\"/api/auth/oauth-signin\", controller.oAuthSignin);\r\n\r\n  app.post(\"/api/auth/create-google-auth-link\", controller.createLink);\r\n\r\n  app.get(\"/api/auth/handle-google-redirect\", controller.handleGoogleRedirect);\r\n\r\n  app.post(\"/api/auth/get-valid-token\", controller.getValidToken);\r\n\r\n  app.post(\"/api/auth/create-microsoft-auth-link\", controller.createMicrosoftLink);\r\n\r\n  app.get(\"/api/auth/handle-microsoft-redirect\", controller.handleMicrosoftRedirect);\r\n\r\n  app.post(\"/api/auth/get-valid-microsoft-token\", controller.getValidMicrosoftToken);\r\n\r\n\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAa,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACxD,MAAMC,UAAU,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAE5DE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,IAAI,CACN,kBAAkB,EAClB,CACEX,YAAY,CAACY,6BAA6B,EAC1CZ,YAAY,CAACa,iBAAiB,CAC/B,EACDX,UAAU,CAACY,MACb,CAAC;EAEDT,GAAG,CAACM,IAAI,CAAC,kBAAkB,EAAET,UAAU,CAACa,MAAM,CAAC;EAE/CV,GAAG,CAACM,IAAI,CAAC,wBAAwB,EAAET,UAAU,CAACc,WAAW,CAAC;EAE1DX,GAAG,CAACM,IAAI,CAAC,wBAAwB,EAAET,UAAU,CAACe,WAAW,CAAC;EAE1DZ,GAAG,CAACM,IAAI,CAAC,mCAAmC,EAAET,UAAU,CAACgB,UAAU,CAAC;EAEpEb,GAAG,CAACc,GAAG,CAAC,kCAAkC,EAAEjB,UAAU,CAACkB,oBAAoB,CAAC;EAE5Ef,GAAG,CAACM,IAAI,CAAC,2BAA2B,EAAET,UAAU,CAACmB,aAAa,CAAC;EAE/DhB,GAAG,CAACM,IAAI,CAAC,sCAAsC,EAAET,UAAU,CAACoB,mBAAmB,CAAC;EAEhFjB,GAAG,CAACc,GAAG,CAAC,qCAAqC,EAAEjB,UAAU,CAACqB,uBAAuB,CAAC;EAElFlB,GAAG,CAACM,IAAI,CAAC,qCAAqC,EAAET,UAAU,CAACsB,sBAAsB,CAAC;AAGpF,CAAC"}},"mtime":1697752512299},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/auth.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code is the signin function for a user.\n * It finds the user by their username and checks if the password is valid.\n * If it is, it creates a token and sends back the user information.\n */\nconst config = require(\"../../../config/auth.config\");\nconst db = require(\"../../../models\");\nconst {\n  clientIds\n} = require(\"../../../config/clientIds.js\");\nconst User = db.user;\nconst Role = db.role;\nconst Site = db.site;\nconst Site_Permissions = db.site_permissions;\nconst Global_Permissions = db.global_permissions;\nconst User_Site_Availability = db.user_site_availability;\nconst {\n  google\n} = require(\"googleapis\");\nvar jwt = require(\"jsonwebtoken\");\nvar bcrypt = require(\"bcryptjs\");\nconst siteHelper = require(\"../../../helper/site\");\nconst jwt_decode = require(\"jwt-decode\");\nconst fetch = require(\"node-fetch\");\nconst {\n  Client\n} = require(\"@microsoft/microsoft-graph-client\");\nconst microsoft_scopes = [\"https://graph.microsoft.com/.default\"];\nconst redirectUri = 'http://localhost:8080/api/auth/handle-microsoft-redirect';\nconst {\n  PublicClientApplication,\n  ConfidentialClientApplication\n} = require(\"@azure/msal-node\");\nconst msal = require('@azure/msal-node');\nconst msalInstance = new msal.ConfidentialClientApplication({\n  auth: {\n    clientId: clientIds.microsoft.clientId,\n    authority: `https://login.microsoftonline.com/${clientIds.microsoft.tenantId}`,\n    clientSecret: clientIds.microsoft.clientSecret,\n    redirectUri\n  },\n  system: {\n    loggerOptions: {\n      loggerCallback: (loglevel, message, containsPii) => {\n        console.log(message);\n      },\n      piiLoggingEnabled: false,\n      logLevel: msal.LogLevel.Verbose\n    }\n  }\n});\nconst oauth2Client = new google.auth.OAuth2(clientIds.google.clientId, clientIds.google.clientSecret, `http://localhost:8080/api/auth/handleGoogleRedirect` // server redirect url handler\n);\n\nexports.signup = (req, res) => {\n  const user = new User({\n    username: req.body.username,\n    email: req.body.email,\n    password: bcrypt.hashSync(req.body.password, 8)\n  });\n  user.save((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    const site_name = siteHelper.getSiteName(req);\n    Site.findOne({\n      domain: site_name\n    }).exec((err, site) => {\n      if (err) {\n        return err;\n      }\n      const new_site_product_availability = new User_Site_Availability({\n        user_id: user._id,\n        site_id: site._id\n      });\n      new_site_product_availability.save((err, site_permissions) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        let token = jwt.sign({\n          id: user._id\n        }, config.secret, {\n          expiresIn: 86400 // 24 hours\n        });\n\n        res.status(200).send({\n          id: user._id,\n          username: user.email,\n          email: user.email,\n          accessToken: token,\n          roles: []\n        });\n      });\n    });\n  });\n};\nexports.signin = (req, res) => {\n  User.findOne({\n    username: req.body.username\n  }).exec((err, user) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!user) {\n      return res.status(404).send({\n        message: \"User Not found.\"\n      });\n    }\n    var passwordIsValid = bcrypt.compareSync(req.body.password, user.password);\n    if (!passwordIsValid) {\n      return res.status(401).send({\n        accessToken: null,\n        message: \"Invalid Password!\"\n      });\n    }\n    var token = jwt.sign({\n      id: user._id\n    }, config.secret, {\n      expiresIn: 86400 // 24 hours\n    });\n\n    const site_name = siteHelper.getSiteName(req);\n    Site.findOne({\n      domain: site_name\n    }).exec((err, site) => {\n      if (err) {\n        return err;\n      }\n      User_Site_Availability.findOne({\n        user_id: user._id,\n        site_id: site._id\n      }).exec((err, user_site_availability) => {\n        if (err || !user_site_availability) {\n          res.status(403).send({\n            message: \"You do not have access to this site\"\n          });\n          return;\n        }\n        Site_Permissions.findOne({\n          user_id: user._id,\n          site_id: site._id\n        }).populate(\"roles\", \"-__v\").exec((err, site_permissions) => {\n          if (err) {\n            return err;\n          }\n          Global_Permissions.findOne({\n            user_id: user._id\n          }).populate(\"roles\", \"-__v\").exec((err, global_permissions) => {\n            if (err) {\n              return err;\n            }\n            let all_permissions = [];\n            if (site_permissions) {\n              all_permissions = all_permissions.concat(site_permissions.roles);\n            }\n            if (global_permissions) {\n              all_permissions = all_permissions.concat(global_permissions.roles);\n            }\n            if (!all_permissions) {\n              return res.status(403).send({\n                message: \"You do not have access to this site\"\n              });\n            }\n            var authorities = [];\n            for (let i = 0; i < all_permissions.length; i++) {\n              authorities.push(\"ROLE_\" + all_permissions[i].name.toUpperCase());\n            }\n            res.status(200).send({\n              id: user._id,\n              username: user.username,\n              email: user.email,\n              accessToken: token,\n              roles: authorities\n            });\n          });\n        });\n      });\n    });\n  });\n};\nexports.oAuthSignup = (req, res) => {\n  let token = req.body.credential;\n  let type = req.body.type;\n  let userInfo = {};\n  if (type == 'google') {\n    oauth2Client.setCredentials({\n      access_token: token\n    });\n    var oauth2 = google.oauth2({\n      auth: oauth2Client,\n      version: 'v2'\n    });\n    oauth2.userinfo.get(function (err, userdata) {\n      userInfo.email = userdata.data.email, userInfo.username = userInfo.email;\n      if (err) {\n        console.log(err);\n      } else {\n        // Email\n        User.findOne({\n          email: userdata.data.email\n        }).exec((err, user) => {\n          if (user) {\n            res.status(400).send({\n              message: \"Failed! Email is already in use!\"\n            });\n            return;\n          }\n          const newUser = new User({\n            ...userInfo\n          });\n          newUser.save((err, savedUser) => {\n            if (err) {\n              res.status(500).send({\n                message: err\n              });\n              return;\n            }\n            const site_name = siteHelper.getSiteName(req);\n            Site.findOne({\n              domain: site_name\n            }).exec((err, site) => {\n              if (err) {\n                return err;\n              }\n              const new_site_product_availability = new User_Site_Availability({\n                user_id: savedUser._id,\n                site_id: site._id\n              });\n              new_site_product_availability.save((err, user_site_availability) => {\n                if (err) {\n                  res.status(500).send({\n                    message: err\n                  });\n                  return;\n                }\n                let user_token = jwt.sign({\n                  id: savedUser._id\n                }, config.secret, {\n                  expiresIn: 86400 // 24 hours\n                });\n\n                res.status(200).send({\n                  id: savedUser._id,\n                  username: savedUser.email,\n                  email: savedUser.email,\n                  accessToken: user_token,\n                  roles: []\n                });\n              });\n            });\n          });\n        });\n      }\n    });\n  } else if (type == 'microsoft') {\n    var decoded = jwt_decode(token);\n    userInfo.username = decoded.unique_name, userInfo.email = decoded.unique_name;\n    userInfo.first_name = decoded.given_name;\n    userInfo.last_name = decoded.family_name;\n\n    // Email\n    User.findOne({\n      email: userInfo.email\n    }).exec((err, user) => {\n      if (user) {\n        res.status(400).send({\n          message: \"Failed! Email is already in use!\"\n        });\n        return;\n      }\n      const newUser = new User({\n        ...userInfo\n      });\n      newUser.save((err, savedUser) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        const site_name = siteHelper.getSiteName(req);\n        Site.findOne({\n          domain: site_name\n        }).exec((err, site) => {\n          if (err) {\n            return err;\n          }\n          const new_site_product_availability = new User_Site_Availability({\n            user_id: savedUser._id,\n            site_id: site._id\n          });\n          new_site_product_availability.save((err, user_site_availability) => {\n            if (err) {\n              res.status(500).send({\n                message: err\n              });\n              return;\n            }\n            let user_token = jwt.sign({\n              id: savedUser._id\n            }, config.secret, {\n              expiresIn: 86400 // 24 hours\n            });\n\n            res.status(200).send({\n              id: savedUser._id,\n              username: savedUser.email,\n              email: savedUser.email,\n              accessToken: user_token,\n              roles: []\n            });\n          });\n        });\n      });\n    });\n  }\n};\nexports.oAuthSignin = (req, res) => {\n  const token = req.body.credential;\n  const type = req.body.type;\n  let userInfo = {};\n  if (type == 'google') {\n    oauth2Client.setCredentials({\n      access_token: token\n    });\n    var oauth2 = google.oauth2({\n      auth: oauth2Client,\n      version: 'v2'\n    });\n    oauth2.userinfo.get(function (err, userdata) {\n      if (err) {\n        console.log(err);\n      } else {\n        User.findOne({\n          email: userdata.data.email\n        }).exec((err, user) => {\n          if (err) {\n            res.status(500).send({\n              message: err\n            });\n            return;\n          }\n          if (!user) {\n            return res.status(404).send({\n              message: \"User Not found.\"\n            });\n          }\n          const site_name = siteHelper.getSiteName(req);\n          let user_token = jwt.sign({\n            id: user._id\n          }, config.secret, {\n            expiresIn: 86400 // 24 hours\n          });\n\n          Site.findOne({\n            domain: site_name\n          }).exec((err, site) => {\n            if (err) {\n              return err;\n            }\n            User_Site_Availability.findOne({\n              user_id: user._id,\n              site_id: site._id\n            }).exec((err, user_site_availability) => {\n              if (err || !user_site_availability) {\n                res.status(403).send({\n                  message: \"You do not have access to this site\"\n                });\n                return;\n              }\n              Site_Permissions.findOne({\n                user_id: user._id,\n                site_id: site._id\n              }).populate(\"roles\", \"-__v\").exec((err, site_permissions) => {\n                if (err) {\n                  return err;\n                }\n                Global_Permissions.findOne({\n                  user_id: user._id\n                }).populate(\"roles\", \"-__v\").exec((err, global_permissions) => {\n                  if (err) {\n                    return err;\n                  }\n                  let all_permissions = [];\n                  if (site_permissions) {\n                    all_permissions = all_permissions.concat(site_permissions.roles);\n                  }\n                  if (global_permissions) {\n                    all_permissions = all_permissions.concat(global_permissions.roles);\n                  }\n                  if (!all_permissions) {\n                    return res.status(403).send({\n                      message: \"You do not have access to this site\"\n                    });\n                  }\n                  var authorities = [];\n                  for (let i = 0; i < all_permissions.length; i++) {\n                    authorities.push(\"ROLE_\" + all_permissions[i].name.toUpperCase());\n                  }\n                  res.status(200).send({\n                    id: user._id,\n                    username: user.username,\n                    email: user.email,\n                    accessToken: user_token,\n                    roles: authorities\n                  });\n                });\n              });\n            });\n          });\n        });\n      }\n    });\n  } else if (type == 'microsoft') {\n    let decoded = jwt_decode(token);\n    userInfo.username = decoded.unique_name, userInfo.email = decoded.unique_name;\n    userInfo.first_name = decoded.given_name;\n    userInfo.last_name = decoded.family_name;\n    User.findOne({\n      email: userInfo.username\n    }).exec((err, user) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      if (!user) {\n        return res.status(404).send({\n          message: \"User Not found.\"\n        });\n      }\n      const site_name = siteHelper.getSiteName(req);\n      let user_token = jwt.sign({\n        id: user._id\n      }, config.secret, {\n        expiresIn: 86400 // 24 hours\n      });\n\n      Site.findOne({\n        domain: site_name\n      }).exec((err, site) => {\n        if (err) {\n          return err;\n        }\n        User_Site_Availability.findOne({\n          user_id: user._id,\n          site_id: site._id\n        }).exec((err, user_site_availability) => {\n          if (err || !user_site_availability) {\n            res.status(403).send({\n              message: \"You do not have access to this site\"\n            });\n            return;\n          }\n          Site_Permissions.findOne({\n            user_id: user._id,\n            site_id: site._id\n          }).populate(\"roles\", \"-__v\").exec((err, site_permissions) => {\n            if (err) {\n              return err;\n            }\n            Global_Permissions.findOne({\n              user_id: user._id\n            }).populate(\"roles\", \"-__v\").exec((err, global_permissions) => {\n              if (err) {\n                return err;\n              }\n              let all_permissions = [];\n              if (site_permissions) {\n                all_permissions = all_permissions.concat(site_permissions.roles);\n              }\n              if (global_permissions) {\n                all_permissions = all_permissions.concat(global_permissions.roles);\n              }\n              if (!all_permissions) {\n                return res.status(403).send({\n                  message: \"You do not have access to this site\"\n                });\n              }\n              var authorities = [];\n              for (let i = 0; i < all_permissions.length; i++) {\n                authorities.push(\"ROLE_\" + all_permissions[i].name.toUpperCase());\n              }\n              res.status(200).send({\n                id: user._id,\n                username: user.username,\n                email: user.email,\n                accessToken: user_token,\n                roles: authorities\n              });\n            });\n          });\n        });\n      });\n    });\n  }\n};\nexports.createLink = (req, res) => {\n  const url = oauth2Client.generateAuthUrl({\n    access_type: \"offline\",\n    scope: [\"https://www.googleapis.com/auth/userinfo.email\",\n    //calendar api scopes]\n    \"https://www.googleapis.com/auth/calendar\"],\n    prompt: \"consent\"\n  });\n  res.send({\n    url\n  });\n};\nexports.createMicrosoftLink = (req, res) => {\n  const authCodeUrlParameters = {\n    scopes: microsoft_scopes,\n    redirectUri,\n    clientId: clientIds.microsoft.clientId,\n    clientSecret: clientIds.microsoft.clientSecret\n  };\n  msalInstance.getAuthCodeUrl(authCodeUrlParameters).then(response => {\n    console.log(response);\n    res.send(response);\n  });\n};\nexports.handleMicrosoftRedirect = async (req, res) => {\n  const tokenRequest = {\n    // The URL from the redirect will contain the Auth Code in the query parameters\n    code: req.query.code,\n    scopes: [\"user.read\"],\n    redirectUri\n  };\n\n  // Pass the tokenRequest object with the Auth Code, scopes and redirectUri to acquireTokenByCode API\n  msalInstance.acquireTokenByCode(tokenRequest).then(response => {\n    console.log(response);\n    User.findOne({\n      email: response.account.username\n    }).exec((err, user) => {\n      if (err || !user) {\n        res.redirect(`http://localhost:8081/register?microsoftAccessToken=${response.accessToken}`);\n      }\n      res.redirect(`http://localhost:8081/login?microsoftAccessToken=${response.accessToken}`);\n    });\n  }).catch(error => {\n    console.log(error);\n    res.status(500).send(error);\n  });\n  // const tokenRequest = {\n  //     code: req.query.code,\n  //     scopes: microsoft_scopes,\n  //     redirectUri,\n  //     clientId: clientIds.microsoft.clientId,\n  //     clientSecret: clientIds.microsoft.clientSecret\n  // };\n\n  // console.log(\"hit2\");\n  // pca.acquireTokenByCode(tokenRequest).then((response) => {\n  //     console.log(\"hit3\");\n  //     // Store the user-specific access token in the session for future use\n  //     userAccessToken = response.accessToken;\n\n  //     // Initialize the Microsoft Graph API client using the user access token\n  //     const client = Client.init({\n  //         authProvider: (done) => {\n  //             done(null, userAccessToken);\n  //         },\n  //     });\n\n  //     // Fetch the user's emails using the Microsoft Graph API\n  //     client.api(\"/me\").get(\n  //         function (err, userdata) {\n  //             if (err) {\n  //                 console.log(err);\n  //             } else {\n  //                 User.findOne({\n  //                     email: userdata.data.email\n  //                 })\n  //                     .exec((err, user) => {\n  //                         if (err || !user) {\n  //                             res.redirect(\n  //                                 `http://localhost:8081/register?accessToken=${accessToken}&refreshToken=${refreshToken}`\n  //                             );\n  //                         }\n\n  //                         res.redirect(\n  //                             `http://localhost:8081/login?accessToken=${accessToken}&refreshToken=${refreshToken}`\n  //                         );\n\n  //                     });\n  //             }\n  //         });\n  // }).catch((error) => {\n  //     console.log(error);\n  //     res.status(500).send(error);\n  // });\n};\n\nexports.handleGoogleRedirect = async (req, res) => {\n  // get code from url\n  const code = req.query.code;\n  console.log(code);\n  console.log(\"server 36 | code\", code);\n  // get access token\n  oauth2Client.getToken(code, (err, tokens) => {\n    if (err) {\n      console.log(\"server 39 | error\", err);\n      throw new Error(\"Issue with Login\", err.message);\n    }\n    const accessToken = tokens.access_token;\n    const refreshToken = tokens.refresh_token;\n    oauth2Client.setCredentials({\n      access_token: accessToken\n    });\n    var oauth2 = google.oauth2({\n      auth: oauth2Client,\n      version: 'v2'\n    });\n    oauth2.userinfo.get(function (err, userdata) {\n      if (err) {\n        console.log(err);\n      } else {\n        User.findOne({\n          email: userdata.data.email\n        }).exec((err, user) => {\n          if (err || !user) {\n            res.redirect(`http://localhost:8081/register?accessToken=${accessToken}&refreshToken=${refreshToken}`);\n          }\n          res.redirect(`http://localhost:8081/login?accessToken=${accessToken}&refreshToken=${refreshToken}`);\n        });\n      }\n    });\n  });\n};\nexports.getValidToken = async (req, res) => {\n  try {\n    const request = await fetch(\"https://www.googleapis.com/oauth2/v4/token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        client_id: clientIds.google.clientId,\n        client_secret: clientIds.google.clientSecret,\n        refresh_token: req.body.refreshToken,\n        grant_type: \"refresh_token\"\n      })\n    });\n    const data = await request.json();\n    console.log(\"server 74 | data\", data.access_token);\n    res.json({\n      accessToken: data.access_token\n    });\n  } catch (error) {\n    res.json({\n      error: error.message\n    });\n  }\n};\nexports.getValidMicrosoftToken = async (req, res) => {\n  try {\n    const tokenRequest = {\n      microsoft_scopes,\n      clientSecret: clientIds.microsoft.clientSecret\n    };\n    const response = await cca.acquireTokenByClientCredential(tokenRequest);\n    const accessToken = response.accessToken;\n\n    // Store the client-specific access token in the session for future use\n    res.json({\n      accessToken: data.access_token\n    });\n  } catch (error) {\n    res.status(500).send(error);\n    console.log(\"Error acquiring access token:\", error.message);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJyZXF1aXJlIiwiZGIiLCJjbGllbnRJZHMiLCJVc2VyIiwidXNlciIsIlJvbGUiLCJyb2xlIiwiU2l0ZSIsInNpdGUiLCJTaXRlX1Blcm1pc3Npb25zIiwic2l0ZV9wZXJtaXNzaW9ucyIsIkdsb2JhbF9QZXJtaXNzaW9ucyIsImdsb2JhbF9wZXJtaXNzaW9ucyIsIlVzZXJfU2l0ZV9BdmFpbGFiaWxpdHkiLCJ1c2VyX3NpdGVfYXZhaWxhYmlsaXR5IiwiZ29vZ2xlIiwiand0IiwiYmNyeXB0Iiwic2l0ZUhlbHBlciIsImp3dF9kZWNvZGUiLCJmZXRjaCIsIkNsaWVudCIsIm1pY3Jvc29mdF9zY29wZXMiLCJyZWRpcmVjdFVyaSIsIlB1YmxpY0NsaWVudEFwcGxpY2F0aW9uIiwiQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb24iLCJtc2FsIiwibXNhbEluc3RhbmNlIiwiYXV0aCIsImNsaWVudElkIiwibWljcm9zb2Z0IiwiYXV0aG9yaXR5IiwidGVuYW50SWQiLCJjbGllbnRTZWNyZXQiLCJzeXN0ZW0iLCJsb2dnZXJPcHRpb25zIiwibG9nZ2VyQ2FsbGJhY2siLCJsb2dsZXZlbCIsIm1lc3NhZ2UiLCJjb250YWluc1BpaSIsImNvbnNvbGUiLCJsb2ciLCJwaWlMb2dnaW5nRW5hYmxlZCIsImxvZ0xldmVsIiwiTG9nTGV2ZWwiLCJWZXJib3NlIiwib2F1dGgyQ2xpZW50IiwiT0F1dGgyIiwiZXhwb3J0cyIsInNpZ251cCIsInJlcSIsInJlcyIsInVzZXJuYW1lIiwiYm9keSIsImVtYWlsIiwicGFzc3dvcmQiLCJoYXNoU3luYyIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwic2l0ZV9uYW1lIiwiZ2V0U2l0ZU5hbWUiLCJmaW5kT25lIiwiZG9tYWluIiwiZXhlYyIsIm5ld19zaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5IiwidXNlcl9pZCIsIl9pZCIsInNpdGVfaWQiLCJ0b2tlbiIsInNpZ24iLCJpZCIsInNlY3JldCIsImV4cGlyZXNJbiIsImFjY2Vzc1Rva2VuIiwicm9sZXMiLCJzaWduaW4iLCJwYXNzd29yZElzVmFsaWQiLCJjb21wYXJlU3luYyIsInBvcHVsYXRlIiwiYWxsX3Blcm1pc3Npb25zIiwiY29uY2F0IiwiYXV0aG9yaXRpZXMiLCJpIiwibGVuZ3RoIiwicHVzaCIsIm5hbWUiLCJ0b1VwcGVyQ2FzZSIsIm9BdXRoU2lnbnVwIiwiY3JlZGVudGlhbCIsInR5cGUiLCJ1c2VySW5mbyIsInNldENyZWRlbnRpYWxzIiwiYWNjZXNzX3Rva2VuIiwib2F1dGgyIiwidmVyc2lvbiIsInVzZXJpbmZvIiwiZ2V0IiwidXNlcmRhdGEiLCJkYXRhIiwibmV3VXNlciIsInNhdmVkVXNlciIsInVzZXJfdG9rZW4iLCJkZWNvZGVkIiwidW5pcXVlX25hbWUiLCJmaXJzdF9uYW1lIiwiZ2l2ZW5fbmFtZSIsImxhc3RfbmFtZSIsImZhbWlseV9uYW1lIiwib0F1dGhTaWduaW4iLCJjcmVhdGVMaW5rIiwidXJsIiwiZ2VuZXJhdGVBdXRoVXJsIiwiYWNjZXNzX3R5cGUiLCJzY29wZSIsInByb21wdCIsImNyZWF0ZU1pY3Jvc29mdExpbmsiLCJhdXRoQ29kZVVybFBhcmFtZXRlcnMiLCJzY29wZXMiLCJnZXRBdXRoQ29kZVVybCIsInRoZW4iLCJyZXNwb25zZSIsImhhbmRsZU1pY3Jvc29mdFJlZGlyZWN0IiwidG9rZW5SZXF1ZXN0IiwiY29kZSIsInF1ZXJ5IiwiYWNxdWlyZVRva2VuQnlDb2RlIiwiYWNjb3VudCIsInJlZGlyZWN0IiwiY2F0Y2giLCJlcnJvciIsImhhbmRsZUdvb2dsZVJlZGlyZWN0IiwiZ2V0VG9rZW4iLCJ0b2tlbnMiLCJFcnJvciIsInJlZnJlc2hUb2tlbiIsInJlZnJlc2hfdG9rZW4iLCJnZXRWYWxpZFRva2VuIiwicmVxdWVzdCIsIm1ldGhvZCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImdyYW50X3R5cGUiLCJqc29uIiwiZ2V0VmFsaWRNaWNyb3NvZnRUb2tlbiIsImNjYSIsImFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbCJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9hdXRoL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiYXV0aC5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBjb2RlIGlzIHRoZSBzaWduaW4gZnVuY3Rpb24gZm9yIGEgdXNlci5cbiAqIEl0IGZpbmRzIHRoZSB1c2VyIGJ5IHRoZWlyIHVzZXJuYW1lIGFuZCBjaGVja3MgaWYgdGhlIHBhc3N3b3JkIGlzIHZhbGlkLlxuICogSWYgaXQgaXMsIGl0IGNyZWF0ZXMgYSB0b2tlbiBhbmQgc2VuZHMgYmFjayB0aGUgdXNlciBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgY29uZmlnID0gcmVxdWlyZShcIi4uLy4uLy4uL2NvbmZpZy9hdXRoLmNvbmZpZ1wiKTtcbmNvbnN0IGRiID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVsc1wiKTtcbmNvbnN0IHsgY2xpZW50SWRzIH0gPSByZXF1aXJlKFwiLi4vLi4vLi4vY29uZmlnL2NsaWVudElkcy5qc1wiKTtcbmNvbnN0IFVzZXIgPSBkYi51c2VyO1xuY29uc3QgUm9sZSA9IGRiLnJvbGU7XG5jb25zdCBTaXRlID0gZGIuc2l0ZTtcbmNvbnN0IFNpdGVfUGVybWlzc2lvbnMgPSBkYi5zaXRlX3Blcm1pc3Npb25zO1xuY29uc3QgR2xvYmFsX1Blcm1pc3Npb25zID0gZGIuZ2xvYmFsX3Blcm1pc3Npb25zO1xuY29uc3QgVXNlcl9TaXRlX0F2YWlsYWJpbGl0eSA9IGRiLnVzZXJfc2l0ZV9hdmFpbGFiaWxpdHk7XG5jb25zdCB7IGdvb2dsZSB9ID0gcmVxdWlyZShcImdvb2dsZWFwaXNcIik7XG5cbnZhciBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xudmFyIGJjcnlwdCA9IHJlcXVpcmUoXCJiY3J5cHRqc1wiKTtcbmNvbnN0IHNpdGVIZWxwZXIgPSByZXF1aXJlKFwiLi4vLi4vLi4vaGVscGVyL3NpdGVcIik7XG5jb25zdCBqd3RfZGVjb2RlID0gcmVxdWlyZShcImp3dC1kZWNvZGVcIik7XG5jb25zdCBmZXRjaCA9IHJlcXVpcmUoXCJub2RlLWZldGNoXCIpO1xuY29uc3QgeyBDbGllbnQgfSA9IHJlcXVpcmUoXCJAbWljcm9zb2Z0L21pY3Jvc29mdC1ncmFwaC1jbGllbnRcIik7XG5jb25zdCBtaWNyb3NvZnRfc2NvcGVzID0gW1wiaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tLy5kZWZhdWx0XCJdO1xuY29uc3QgcmVkaXJlY3RVcmkgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS9hdXRoL2hhbmRsZS1taWNyb3NvZnQtcmVkaXJlY3QnO1xuY29uc3QgeyBQdWJsaWNDbGllbnRBcHBsaWNhdGlvbiwgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb24gfSA9IHJlcXVpcmUoXCJAYXp1cmUvbXNhbC1ub2RlXCIpO1xuXG5cbmNvbnN0IG1zYWwgPSByZXF1aXJlKCdAYXp1cmUvbXNhbC1ub2RlJyk7XG5cbmNvbnN0IG1zYWxJbnN0YW5jZSA9IG5ldyBtc2FsLkNvbmZpZGVudGlhbENsaWVudEFwcGxpY2F0aW9uKHtcbiAgICBhdXRoOiB7XG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZHMubWljcm9zb2Z0LmNsaWVudElkLFxuICAgICAgICBhdXRob3JpdHk6IGBodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vJHtjbGllbnRJZHMubWljcm9zb2Z0LnRlbmFudElkfWAsXG4gICAgICAgIGNsaWVudFNlY3JldDogY2xpZW50SWRzLm1pY3Jvc29mdC5jbGllbnRTZWNyZXQsXG4gICAgICAgIHJlZGlyZWN0VXJpXG4gICAgfSxcbiAgICBzeXN0ZW06IHtcbiAgICAgICAgbG9nZ2VyT3B0aW9uczoge1xuICAgICAgICAgICAgbG9nZ2VyQ2FsbGJhY2s6IChsb2dsZXZlbCwgbWVzc2FnZSwgY29udGFpbnNQaWkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwaWlMb2dnaW5nRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICBsb2dMZXZlbDogbXNhbC5Mb2dMZXZlbC5WZXJib3NlLFxuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuY29uc3Qgb2F1dGgyQ2xpZW50ID0gbmV3IGdvb2dsZS5hdXRoLk9BdXRoMihcbiAgICBjbGllbnRJZHMuZ29vZ2xlLmNsaWVudElkLFxuICAgIGNsaWVudElkcy5nb29nbGUuY2xpZW50U2VjcmV0LFxuICAgIGBodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL2F1dGgvaGFuZGxlR29vZ2xlUmVkaXJlY3RgIC8vIHNlcnZlciByZWRpcmVjdCB1cmwgaGFuZGxlclxuKTtcblxuXG5leHBvcnRzLnNpZ251cCA9IChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgIHVzZXJuYW1lOiByZXEuYm9keS51c2VybmFtZSxcbiAgICAgICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxuICAgICAgICBwYXNzd29yZDogYmNyeXB0Lmhhc2hTeW5jKHJlcS5ib2R5LnBhc3N3b3JkLCA4KVxuICAgIH0pO1xuXG4gICAgdXNlci5zYXZlKChlcnIsIHVzZXIpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaXRlX25hbWUgPSBzaXRlSGVscGVyLmdldFNpdGVOYW1lKHJlcSk7XG4gICAgICAgIFNpdGUuZmluZE9uZSh7XG4gICAgICAgICAgICBkb21haW46IHNpdGVfbmFtZVxuICAgICAgICB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGNvbnN0IG5ld19zaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5ID0gbmV3IFVzZXJfU2l0ZV9BdmFpbGFiaWxpdHkoe1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXIuX2lkLFxuICAgICAgICAgICAgICAgIHNpdGVfaWQ6IHNpdGUuX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXdfc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eS5zYXZlKChlcnIsIHNpdGVfcGVybWlzc2lvbnMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHRva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5faWQgfSwgY29uZmlnLnNlY3JldCwge1xuICAgICAgICAgICAgICAgICAgICBleHBpcmVzSW46IDg2NDAwIC8vIDI0IGhvdXJzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRva2VuLFxuICAgICAgICAgICAgICAgICAgICByb2xlczogW11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgIH0pO1xufTtcblxuXG5leHBvcnRzLnNpZ25pbiA9IChyZXEsIHJlcykgPT4ge1xuXG4gICAgVXNlci5maW5kT25lKHtcbiAgICAgICAgdXNlcm5hbWU6IHJlcS5ib2R5LnVzZXJuYW1lXG4gICAgfSlcbiAgICAgICAgLmV4ZWMoKGVyciwgdXNlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VyIE5vdCBmb3VuZC5cIiB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhc3N3b3JkSXNWYWxpZCA9IGJjcnlwdC5jb21wYXJlU3luYyhcbiAgICAgICAgICAgICAgICByZXEuYm9keS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICB1c2VyLnBhc3N3b3JkXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoIXBhc3N3b3JkSXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgUGFzc3dvcmQhXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB2YXIgdG9rZW4gPSBqd3Quc2lnbih7IGlkOiB1c2VyLl9pZCB9LCBjb25maWcuc2VjcmV0LCB7XG4gICAgICAgICAgICAgICAgZXhwaXJlc0luOiA4NjQwMCAvLyAyNCBob3Vyc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcbiAgICAgICAgICAgIFNpdGUuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgZG9tYWluOiBzaXRlX25hbWVcbiAgICAgICAgICAgIH0pLmV4ZWMoKGVyciwgc2l0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVXNlcl9TaXRlX0F2YWlsYWJpbGl0eS5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQsIHNpdGVfaWQ6IHNpdGUuX2lkIH0pXG4gICAgICAgICAgICAgICAgICAgIC5leGVjKChlcnIsIHVzZXJfc2l0ZV9hdmFpbGFiaWxpdHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgIXVzZXJfc2l0ZV9hdmFpbGFiaWxpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuc2VuZCh7IG1lc3NhZ2U6IFwiWW91IGRvIG5vdCBoYXZlIGFjY2VzcyB0byB0aGlzIHNpdGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFNpdGVfUGVybWlzc2lvbnMuZmluZE9uZSh7IHVzZXJfaWQ6IHVzZXIuX2lkLCBzaXRlX2lkOiBzaXRlLl9pZCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3B1bGF0ZShcInJvbGVzXCIsIFwiLV9fdlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leGVjKChlcnIsIHNpdGVfcGVybWlzc2lvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdsb2JhbF9QZXJtaXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3B1bGF0ZShcInJvbGVzXCIsIFwiLV9fdlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4ZWMoKGVyciwgZ2xvYmFsX3Blcm1pc3Npb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWxsX3Blcm1pc3Npb25zID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGVfcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3Blcm1pc3Npb25zID0gYWxsX3Blcm1pc3Npb25zLmNvbmNhdChzaXRlX3Blcm1pc3Npb25zLnJvbGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnbG9iYWxfcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3Blcm1pc3Npb25zID0gYWxsX3Blcm1pc3Npb25zLmNvbmNhdChnbG9iYWxfcGVybWlzc2lvbnMucm9sZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxsX3Blcm1pc3Npb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIllvdSBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gdGhpcyBzaXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1dGhvcml0aWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxfcGVybWlzc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXRpZXMucHVzaChcIlJPTEVfXCIgKyBhbGxfcGVybWlzc2lvbnNbaV0ubmFtZS50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVzOiBhdXRob3JpdGllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xufTtcblxuXG5leHBvcnRzLm9BdXRoU2lnbnVwID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgbGV0IHRva2VuID0gcmVxLmJvZHkuY3JlZGVudGlhbDtcbiAgICBsZXQgdHlwZSA9IHJlcS5ib2R5LnR5cGU7XG4gICAgbGV0IHVzZXJJbmZvID0ge307XG5cblxuICAgIGlmICh0eXBlID09ICdnb29nbGUnKSB7XG5cblxuICAgICAgICBvYXV0aDJDbGllbnQuc2V0Q3JlZGVudGlhbHMoeyBhY2Nlc3NfdG9rZW46IHRva2VuIH0pO1xuICAgICAgICB2YXIgb2F1dGgyID0gZ29vZ2xlLm9hdXRoMih7XG4gICAgICAgICAgICBhdXRoOiBvYXV0aDJDbGllbnQsXG4gICAgICAgICAgICB2ZXJzaW9uOiAndjInXG4gICAgICAgIH0pO1xuICAgICAgICBvYXV0aDIudXNlcmluZm8uZ2V0KFxuICAgICAgICAgICAgZnVuY3Rpb24gKGVyciwgdXNlcmRhdGEpIHtcbiAgICAgICAgICAgICAgICB1c2VySW5mby5lbWFpbCA9IHVzZXJkYXRhLmRhdGEuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJbmZvLnVzZXJuYW1lID0gdXNlckluZm8uZW1haWw7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVtYWlsXG4gICAgICAgICAgICAgICAgICAgIFVzZXIuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlcmRhdGEuZGF0YS5lbWFpbFxuICAgICAgICAgICAgICAgICAgICB9KS5leGVjKChlcnIsIHVzZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoeyBtZXNzYWdlOiBcIkZhaWxlZCEgRW1haWwgaXMgYWxyZWFkeSBpbiB1c2UhXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdVc2VyID0gbmV3IFVzZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVzZXJJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1VzZXIuc2F2ZSgoZXJyLCBzYXZlZFVzZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaXRlLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21haW46IHNpdGVfbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmV4ZWMoKGVyciwgc2l0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3X3NpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkgPSBuZXcgVXNlcl9TaXRlX0F2YWlsYWJpbGl0eSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiBzYXZlZFVzZXIuX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZV9pZDogc2l0ZS5faWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eS5zYXZlKChlcnIsIHVzZXJfc2l0ZV9hdmFpbGFiaWxpdHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1c2VyX3Rva2VuID0gand0LnNpZ24oeyBpZDogc2F2ZWRVc2VyLl9pZCB9LCBjb25maWcuc2VjcmV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiA4NjQwMCAvLyAyNCBob3Vyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNhdmVkVXNlci5faWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHNhdmVkVXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogc2F2ZWRVc2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB1c2VyX3Rva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVzOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09ICdtaWNyb3NvZnQnKSB7XG4gICAgICAgIHZhciBkZWNvZGVkID0gand0X2RlY29kZSh0b2tlbik7XG4gICAgICAgIHVzZXJJbmZvLnVzZXJuYW1lID0gZGVjb2RlZC51bmlxdWVfbmFtZSxcbiAgICAgICAgdXNlckluZm8uZW1haWwgPSBkZWNvZGVkLnVuaXF1ZV9uYW1lO1xuICAgICAgICB1c2VySW5mby5maXJzdF9uYW1lID0gZGVjb2RlZC5naXZlbl9uYW1lO1xuICAgICAgICB1c2VySW5mby5sYXN0X25hbWUgPSBkZWNvZGVkLmZhbWlseV9uYW1lO1xuXG4gICAgICAgIC8vIEVtYWlsXG4gICAgICAgIFVzZXIuZmluZE9uZSh7XG4gICAgICAgICAgICBlbWFpbDogdXNlckluZm8uZW1haWxcbiAgICAgICAgfSkuZXhlYygoZXJyLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgbWVzc2FnZTogXCJGYWlsZWQhIEVtYWlsIGlzIGFscmVhZHkgaW4gdXNlIVwiIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VyKHtcbiAgICAgICAgICAgICAgICAuLi51c2VySW5mb1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBuZXdVc2VyLnNhdmUoKGVyciwgc2F2ZWRVc2VyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzaXRlX25hbWUgPSBzaXRlSGVscGVyLmdldFNpdGVOYW1lKHJlcSk7XG4gICAgICAgICAgICAgICAgU2l0ZS5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBzaXRlX25hbWVcbiAgICAgICAgICAgICAgICB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld19zaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5ID0gbmV3IFVzZXJfU2l0ZV9BdmFpbGFiaWxpdHkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDogc2F2ZWRVc2VyLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVfaWQ6IHNpdGUuX2lkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3NpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkuc2F2ZSgoZXJyLCB1c2VyX3NpdGVfYXZhaWxhYmlsaXR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXNlcl90b2tlbiA9IGp3dC5zaWduKHsgaWQ6IHNhdmVkVXNlci5faWQgfSwgY29uZmlnLnNlY3JldCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogODY0MDAgLy8gMjQgaG91cnNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzYXZlZFVzZXIuX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBzYXZlZFVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHNhdmVkVXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdXNlcl90b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbmV4cG9ydHMub0F1dGhTaWduaW4gPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5ib2R5LmNyZWRlbnRpYWw7XG4gICAgY29uc3QgdHlwZSA9IHJlcS5ib2R5LnR5cGU7XG4gICAgbGV0IHVzZXJJbmZvID0ge307XG5cbiAgICBpZiAodHlwZSA9PSAnZ29vZ2xlJykge1xuICAgICAgICBvYXV0aDJDbGllbnQuc2V0Q3JlZGVudGlhbHMoeyBhY2Nlc3NfdG9rZW46IHRva2VuIH0pO1xuICAgICAgICB2YXIgb2F1dGgyID0gZ29vZ2xlLm9hdXRoMih7XG4gICAgICAgICAgICBhdXRoOiBvYXV0aDJDbGllbnQsXG4gICAgICAgICAgICB2ZXJzaW9uOiAndjInXG4gICAgICAgIH0pO1xuICAgICAgICBvYXV0aDIudXNlcmluZm8uZ2V0KFxuICAgICAgICAgICAgZnVuY3Rpb24gKGVyciwgdXNlcmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgVXNlci5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyZGF0YS5kYXRhLmVtYWlsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlVzZXIgTm90IGZvdW5kLlwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1c2VyX3Rva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5faWQgfSwgY29uZmlnLnNlY3JldCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzSW46IDg2NDAwIC8vIDI0IGhvdXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2l0ZS5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBzaXRlX25hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVc2VyX1NpdGVfQXZhaWxhYmlsaXR5LmZpbmRPbmUoeyB1c2VyX2lkOiB1c2VyLl9pZCwgc2l0ZV9pZDogc2l0ZS5faWQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leGVjKChlcnIsIHVzZXJfc2l0ZV9hdmFpbGFiaWxpdHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyIHx8ICF1c2VyX3NpdGVfYXZhaWxhYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAzKS5zZW5kKHsgbWVzc2FnZTogXCJZb3UgZG8gbm90IGhhdmUgYWNjZXNzIHRvIHRoaXMgc2l0ZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2l0ZV9QZXJtaXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQsIHNpdGVfaWQ6IHNpdGUuX2lkIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3B1bGF0ZShcInJvbGVzXCIsIFwiLV9fdlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCBzaXRlX3Blcm1pc3Npb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2xvYmFsX1Blcm1pc3Npb25zLmZpbmRPbmUoeyB1c2VyX2lkOiB1c2VyLl9pZCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3B1bGF0ZShcInJvbGVzXCIsIFwiLV9fdlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leGVjKChlcnIsIGdsb2JhbF9wZXJtaXNzaW9ucykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbGxfcGVybWlzc2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpdGVfcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9wZXJtaXNzaW9ucyA9IGFsbF9wZXJtaXNzaW9ucy5jb25jYXQoc2l0ZV9wZXJtaXNzaW9ucy5yb2xlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnbG9iYWxfcGVybWlzc2lvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9wZXJtaXNzaW9ucyA9IGFsbF9wZXJtaXNzaW9ucy5jb25jYXQoZ2xvYmFsX3Blcm1pc3Npb25zLnJvbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxsX3Blcm1pc3Npb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiWW91IGRvIG5vdCBoYXZlIGFjY2VzcyB0byB0aGlzIHNpdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yaXRpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxfcGVybWlzc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvcml0aWVzLnB1c2goXCJST0xFX1wiICsgYWxsX3Blcm1pc3Npb25zW2ldLm5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdXNlcl90b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVzOiBhdXRob3JpdGllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnbWljcm9zb2Z0Jykge1xuICAgICAgICBsZXQgZGVjb2RlZCA9IGp3dF9kZWNvZGUodG9rZW4pO1xuICAgICAgICB1c2VySW5mby51c2VybmFtZSA9IGRlY29kZWQudW5pcXVlX25hbWUsXG4gICAgICAgICAgICB1c2VySW5mby5lbWFpbCA9IGRlY29kZWQudW5pcXVlX25hbWU7XG4gICAgICAgIHVzZXJJbmZvLmZpcnN0X25hbWUgPSBkZWNvZGVkLmdpdmVuX25hbWU7XG4gICAgICAgIHVzZXJJbmZvLmxhc3RfbmFtZSA9IGRlY29kZWQuZmFtaWx5X25hbWU7XG5cbiAgICAgICAgVXNlci5maW5kT25lKHtcbiAgICAgICAgICAgIGVtYWlsOiB1c2VySW5mby51c2VybmFtZVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmV4ZWMoKGVyciwgdXNlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VyIE5vdCBmb3VuZC5cIiB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzaXRlX25hbWUgPSBzaXRlSGVscGVyLmdldFNpdGVOYW1lKHJlcSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgdXNlcl90b2tlbiA9IGp3dC5zaWduKHsgaWQ6IHVzZXIuX2lkIH0sIGNvbmZpZy5zZWNyZXQsIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiA4NjQwMCAvLyAyNCBob3Vyc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFNpdGUuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbjogc2l0ZV9uYW1lXG4gICAgICAgICAgICAgICAgfSkuZXhlYygoZXJyLCBzaXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgVXNlcl9TaXRlX0F2YWlsYWJpbGl0eS5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQsIHNpdGVfaWQ6IHNpdGUuX2lkIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VyX3NpdGVfYXZhaWxhYmlsaXR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciB8fCAhdXNlcl9zaXRlX2F2YWlsYWJpbGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMykuc2VuZCh7IG1lc3NhZ2U6IFwiWW91IGRvIG5vdCBoYXZlIGFjY2VzcyB0byB0aGlzIHNpdGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpdGVfUGVybWlzc2lvbnMuZmluZE9uZSh7IHVzZXJfaWQ6IHVzZXIuX2lkLCBzaXRlX2lkOiBzaXRlLl9pZCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9wdWxhdGUoXCJyb2xlc1wiLCBcIi1fX3ZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4ZWMoKGVyciwgc2l0ZV9wZXJtaXNzaW9ucykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdsb2JhbF9QZXJtaXNzaW9ucy5maW5kT25lKHsgdXNlcl9pZDogdXNlci5faWQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9wdWxhdGUoXCJyb2xlc1wiLCBcIi1fX3ZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCBnbG9iYWxfcGVybWlzc2lvbnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWxsX3Blcm1pc3Npb25zID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaXRlX3Blcm1pc3Npb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfcGVybWlzc2lvbnMgPSBhbGxfcGVybWlzc2lvbnMuY29uY2F0KHNpdGVfcGVybWlzc2lvbnMucm9sZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsX3Blcm1pc3Npb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxfcGVybWlzc2lvbnMgPSBhbGxfcGVybWlzc2lvbnMuY29uY2F0KGdsb2JhbF9wZXJtaXNzaW9ucy5yb2xlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFsbF9wZXJtaXNzaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIllvdSBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gdGhpcyBzaXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1dGhvcml0aWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsX3Blcm1pc3Npb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JpdGllcy5wdXNoKFwiUk9MRV9cIiArIGFsbF9wZXJtaXNzaW9uc1tpXS5uYW1lLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdXNlci5faWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHVzZXJfdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlczogYXV0aG9yaXRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn07XG5cblxuZXhwb3J0cy5jcmVhdGVMaW5rID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXJsID0gb2F1dGgyQ2xpZW50LmdlbmVyYXRlQXV0aFVybCh7XG4gICAgICAgIGFjY2Vzc190eXBlOiBcIm9mZmxpbmVcIixcbiAgICAgICAgc2NvcGU6IFtcbiAgICAgICAgICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC91c2VyaW5mby5lbWFpbFwiLFxuICAgICAgICAgICAgLy9jYWxlbmRhciBhcGkgc2NvcGVzXVxuICAgICAgICAgICAgXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2NhbGVuZGFyXCIsXG4gICAgICAgIF0sXG4gICAgICAgIHByb21wdDogXCJjb25zZW50XCIsXG4gICAgfSk7XG4gICAgcmVzLnNlbmQoeyB1cmwgfSk7XG59O1xuXG5leHBvcnRzLmNyZWF0ZU1pY3Jvc29mdExpbmsgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBhdXRoQ29kZVVybFBhcmFtZXRlcnMgPSB7XG4gICAgICAgIHNjb3BlczogbWljcm9zb2Z0X3Njb3BlcyxcbiAgICAgICAgcmVkaXJlY3RVcmksXG4gICAgICAgIGNsaWVudElkOiBjbGllbnRJZHMubWljcm9zb2Z0LmNsaWVudElkLFxuICAgICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudElkcy5taWNyb3NvZnQuY2xpZW50U2VjcmV0XG4gICAgfTtcblxuICAgIG1zYWxJbnN0YW5jZS5nZXRBdXRoQ29kZVVybChhdXRoQ29kZVVybFBhcmFtZXRlcnMpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgcmVzLnNlbmQocmVzcG9uc2UpO1xuICAgIH0pO1xufTtcblxuZXhwb3J0cy5oYW5kbGVNaWNyb3NvZnRSZWRpcmVjdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHRva2VuUmVxdWVzdCA9IHtcbiAgICAgICAgLy8gVGhlIFVSTCBmcm9tIHRoZSByZWRpcmVjdCB3aWxsIGNvbnRhaW4gdGhlIEF1dGggQ29kZSBpbiB0aGUgcXVlcnkgcGFyYW1ldGVyc1xuICAgICAgICBjb2RlOiByZXEucXVlcnkuY29kZSxcbiAgICAgICAgc2NvcGVzOiBbXCJ1c2VyLnJlYWRcIl0sXG4gICAgICAgIHJlZGlyZWN0VXJpLFxuICAgIH07XG5cbiAgICAvLyBQYXNzIHRoZSB0b2tlblJlcXVlc3Qgb2JqZWN0IHdpdGggdGhlIEF1dGggQ29kZSwgc2NvcGVzIGFuZCByZWRpcmVjdFVyaSB0byBhY3F1aXJlVG9rZW5CeUNvZGUgQVBJXG4gICAgbXNhbEluc3RhbmNlLmFjcXVpcmVUb2tlbkJ5Q29kZSh0b2tlblJlcXVlc3QpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgVXNlci5maW5kT25lKHtcbiAgICAgICAgICAgIGVtYWlsOiByZXNwb25zZS5hY2NvdW50LnVzZXJuYW1lXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVyciB8fCAhdXNlcikge1xuICAgICAgICAgICAgICAgICAgICByZXMucmVkaXJlY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDgxL3JlZ2lzdGVyP21pY3Jvc29mdEFjY2Vzc1Rva2VuPSR7cmVzcG9uc2UuYWNjZXNzVG9rZW59YFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlcy5yZWRpcmVjdChcbiAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9sb2dpbj9taWNyb3NvZnRBY2Nlc3NUb2tlbj0ke3Jlc3BvbnNlLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB9KTtcbiAgICB9KS5jYXRjaCAoKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycm9yKTtcbn0pO1xuICAgIC8vIGNvbnN0IHRva2VuUmVxdWVzdCA9IHtcbiAgICAvLyAgICAgY29kZTogcmVxLnF1ZXJ5LmNvZGUsXG4gICAgLy8gICAgIHNjb3BlczogbWljcm9zb2Z0X3Njb3BlcyxcbiAgICAvLyAgICAgcmVkaXJlY3RVcmksXG4gICAgLy8gICAgIGNsaWVudElkOiBjbGllbnRJZHMubWljcm9zb2Z0LmNsaWVudElkLFxuICAgIC8vICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudElkcy5taWNyb3NvZnQuY2xpZW50U2VjcmV0XG4gICAgLy8gfTtcblxuICAgIC8vIGNvbnNvbGUubG9nKFwiaGl0MlwiKTtcbiAgICAvLyBwY2EuYWNxdWlyZVRva2VuQnlDb2RlKHRva2VuUmVxdWVzdCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJoaXQzXCIpO1xuICAgIC8vICAgICAvLyBTdG9yZSB0aGUgdXNlci1zcGVjaWZpYyBhY2Nlc3MgdG9rZW4gaW4gdGhlIHNlc3Npb24gZm9yIGZ1dHVyZSB1c2VcbiAgICAvLyAgICAgdXNlckFjY2Vzc1Rva2VuID0gcmVzcG9uc2UuYWNjZXNzVG9rZW47XG5cbiAgICAvLyAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgTWljcm9zb2Z0IEdyYXBoIEFQSSBjbGllbnQgdXNpbmcgdGhlIHVzZXIgYWNjZXNzIHRva2VuXG4gICAgLy8gICAgIGNvbnN0IGNsaWVudCA9IENsaWVudC5pbml0KHtcbiAgICAvLyAgICAgICAgIGF1dGhQcm92aWRlcjogKGRvbmUpID0+IHtcbiAgICAvLyAgICAgICAgICAgICBkb25lKG51bGwsIHVzZXJBY2Nlc3NUb2tlbik7XG4gICAgLy8gICAgICAgICB9LFxuICAgIC8vICAgICB9KTtcblxuICAgIC8vICAgICAvLyBGZXRjaCB0aGUgdXNlcidzIGVtYWlscyB1c2luZyB0aGUgTWljcm9zb2Z0IEdyYXBoIEFQSVxuICAgIC8vICAgICBjbGllbnQuYXBpKFwiL21lXCIpLmdldChcbiAgICAvLyAgICAgICAgIGZ1bmN0aW9uIChlcnIsIHVzZXJkYXRhKSB7XG4gICAgLy8gICAgICAgICAgICAgaWYgKGVycikge1xuICAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICAgICAgICAgIFVzZXIuZmluZE9uZSh7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlcmRhdGEuZGF0YS5lbWFpbFxuICAgIC8vICAgICAgICAgICAgICAgICB9KVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgLmV4ZWMoKGVyciwgdXNlcikgPT4ge1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgIXVzZXIpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnJlZGlyZWN0KFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9yZWdpc3Rlcj9hY2Nlc3NUb2tlbj0ke2FjY2Vzc1Rva2VufSZyZWZyZXNoVG9rZW49JHtyZWZyZXNoVG9rZW59YFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5yZWRpcmVjdChcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9sb2dpbj9hY2Nlc3NUb2tlbj0ke2FjY2Vzc1Rva2VufSZyZWZyZXNoVG9rZW49JHtyZWZyZXNoVG9rZW59YFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIH0pO1xuICAgIC8vIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycm9yKTtcbiAgICAvLyB9KTtcblxufTtcblxuZXhwb3J0cy5oYW5kbGVHb29nbGVSZWRpcmVjdCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuXG4gICAgLy8gZ2V0IGNvZGUgZnJvbSB1cmxcbiAgICBjb25zdCBjb2RlID0gcmVxLnF1ZXJ5LmNvZGU7XG4gICAgY29uc29sZS5sb2coY29kZSk7XG4gICAgY29uc29sZS5sb2coXCJzZXJ2ZXIgMzYgfCBjb2RlXCIsIGNvZGUpO1xuICAgIC8vIGdldCBhY2Nlc3MgdG9rZW5cbiAgICBvYXV0aDJDbGllbnQuZ2V0VG9rZW4oY29kZSwgKGVyciwgdG9rZW5zKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2VydmVyIDM5IHwgZXJyb3JcIiwgZXJyKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIklzc3VlIHdpdGggTG9naW5cIiwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdG9rZW5zLmFjY2Vzc190b2tlbjtcbiAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gdG9rZW5zLnJlZnJlc2hfdG9rZW47XG5cblxuICAgICAgICBvYXV0aDJDbGllbnQuc2V0Q3JlZGVudGlhbHMoeyBhY2Nlc3NfdG9rZW46IGFjY2Vzc1Rva2VuIH0pO1xuICAgICAgICB2YXIgb2F1dGgyID0gZ29vZ2xlLm9hdXRoMih7XG4gICAgICAgICAgICBhdXRoOiBvYXV0aDJDbGllbnQsXG4gICAgICAgICAgICB2ZXJzaW9uOiAndjInXG4gICAgICAgIH0pO1xuICAgICAgICBvYXV0aDIudXNlcmluZm8uZ2V0KFxuICAgICAgICAgICAgZnVuY3Rpb24gKGVyciwgdXNlcmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgVXNlci5maW5kT25lKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyZGF0YS5kYXRhLmVtYWlsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXhlYygoZXJyLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciB8fCAhdXNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMucmVkaXJlY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDgxL3JlZ2lzdGVyP2FjY2Vzc1Rva2VuPSR7YWNjZXNzVG9rZW59JnJlZnJlc2hUb2tlbj0ke3JlZnJlc2hUb2tlbn1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnJlZGlyZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDgxL2xvZ2luP2FjY2Vzc1Rva2VuPSR7YWNjZXNzVG9rZW59JnJlZnJlc2hUb2tlbj0ke3JlZnJlc2hUb2tlbn1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5leHBvcnRzLmdldFZhbGlkVG9rZW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjQvdG9rZW5cIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY2xpZW50X2lkOiBjbGllbnRJZHMuZ29vZ2xlLmNsaWVudElkLFxuICAgICAgICAgICAgICAgIGNsaWVudF9zZWNyZXQ6IGNsaWVudElkcy5nb29nbGUuY2xpZW50U2VjcmV0LFxuICAgICAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46IHJlcS5ib2R5LnJlZnJlc2hUb2tlbixcbiAgICAgICAgICAgICAgICBncmFudF90eXBlOiBcInJlZnJlc2hfdG9rZW5cIixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic2VydmVyIDc0IHwgZGF0YVwiLCBkYXRhLmFjY2Vzc190b2tlbik7XG5cbiAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46IGRhdGEuYWNjZXNzX3Rva2VuLFxuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXMuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuZ2V0VmFsaWRNaWNyb3NvZnRUb2tlbiA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRva2VuUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIG1pY3Jvc29mdF9zY29wZXMsXG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudElkcy5taWNyb3NvZnQuY2xpZW50U2VjcmV0LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2NhLmFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbCh0b2tlblJlcXVlc3QpO1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHJlc3BvbnNlLmFjY2Vzc1Rva2VuO1xuXG4gICAgICAgIC8vIFN0b3JlIHRoZSBjbGllbnQtc3BlY2lmaWMgYWNjZXNzIHRva2VuIGluIHRoZSBzZXNzaW9uIGZvciBmdXR1cmUgdXNlXG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBkYXRhLmFjY2Vzc190b2tlbixcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyb3IpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGFjcXVpcmluZyBhY2Nlc3MgdG9rZW46XCIsIGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztBQUNyRCxNQUFNQyxFQUFFLEdBQUdELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNyQyxNQUFNO0VBQUVFO0FBQVUsQ0FBQyxHQUFHRixPQUFPLENBQUMsOEJBQThCLENBQUM7QUFDN0QsTUFBTUcsSUFBSSxHQUFHRixFQUFFLENBQUNHLElBQUk7QUFDcEIsTUFBTUMsSUFBSSxHQUFHSixFQUFFLENBQUNLLElBQUk7QUFDcEIsTUFBTUMsSUFBSSxHQUFHTixFQUFFLENBQUNPLElBQUk7QUFDcEIsTUFBTUMsZ0JBQWdCLEdBQUdSLEVBQUUsQ0FBQ1MsZ0JBQWdCO0FBQzVDLE1BQU1DLGtCQUFrQixHQUFHVixFQUFFLENBQUNXLGtCQUFrQjtBQUNoRCxNQUFNQyxzQkFBc0IsR0FBR1osRUFBRSxDQUFDYSxzQkFBc0I7QUFDeEQsTUFBTTtFQUFFQztBQUFPLENBQUMsR0FBR2YsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUV4QyxJQUFJZ0IsR0FBRyxHQUFHaEIsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNqQyxJQUFJaUIsTUFBTSxHQUFHakIsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNoQyxNQUFNa0IsVUFBVSxHQUFHbEIsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ2xELE1BQU1tQixVQUFVLEdBQUduQixPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ3hDLE1BQU1vQixLQUFLLEdBQUdwQixPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ25DLE1BQU07RUFBRXFCO0FBQU8sQ0FBQyxHQUFHckIsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBQy9ELE1BQU1zQixnQkFBZ0IsR0FBRyxDQUFDLHNDQUFzQyxDQUFDO0FBQ2pFLE1B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","map":{"version":3,"names":["config","require","db","clientIds","User","user","Role","role","Site","site","Site_Permissions","site_permissions","Global_Permissions","global_permissions","User_Site_Availability","user_site_availability","google","jwt","bcrypt","siteHelper","jwt_decode","fetch","Client","microsoft_scopes","redirectUri","PublicClientApplication","ConfidentialClientApplication","msal","msalInstance","auth","clientId","microsoft","authority","tenantId","clientSecret","system","loggerOptions","loggerCallback","loglevel","message","containsPii","console","log","piiLoggingEnabled","logLevel","LogLevel","Verbose","oauth2Client","OAuth2","exports","signup","req","res","username","body","email","password","hashSync","save","err","status","send","site_name","getSiteName","findOne","domain","exec","new_site_product_availability","user_id","_id","site_id","token","sign","id","secret","expiresIn","accessToken","roles","signin","passwordIsValid","compareSync","populate","all_permissions","concat","authorities","i","length","push","name","toUpperCase","oAuthSignup","credential","type","userInfo","setCredentials","access_token","oauth2","version","userinfo","get","userdata","data","newUser","savedUser","user_token","decoded","unique_name","first_name","given_name","last_name","family_name","oAuthSignin","createLink","url","generateAuthUrl","access_type","scope","prompt","createMicrosoftLink","authCodeUrlParameters","scopes","getAuthCodeUrl","then","response","handleMicrosoftRedirect","tokenRequest","code","query","acquireTokenByCode","account","redirect","catch","error","handleGoogleRedirect","getToken","tokens","Error","refreshToken","refresh_token","getValidToken","request","method","headers","JSON","stringify","client_id","client_secret","grant_type","json","getValidMicrosoftToken","cca","acquireTokenByClientCredential"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/auth/controllers/","sources":["auth.controller.js"],"sourcesContent":["/**\n * This code is the signin function for a user.\n * It finds the user by their username and checks if the password is valid.\n * If it is, it creates a token and sends back the user information.\n */\nconst config = require(\"../../../config/auth.config\");\nconst db = require(\"../../../models\");\nconst { clientIds } = require(\"../../../config/clientIds.js\");\nconst User = db.user;\nconst Role = db.role;\nconst Site = db.site;\nconst Site_Permissions = db.site_permissions;\nconst Global_Permissions = db.global_permissions;\nconst User_Site_Availability = db.user_site_availability;\nconst { google } = require(\"googleapis\");\n\nvar jwt = require(\"jsonwebtoken\");\nvar bcrypt = require(\"bcryptjs\");\nconst siteHelper = require(\"../../../helper/site\");\nconst jwt_decode = require(\"jwt-decode\");\nconst fetch = require(\"node-fetch\");\nconst { Client } = require(\"@microsoft/microsoft-graph-client\");\nconst microsoft_scopes = [\"https://graph.microsoft.com/.default\"];\nconst redirectUri = 'http://localhost:8080/api/auth/handle-microsoft-redirect';\nconst { PublicClientApplication, ConfidentialClientApplication } = require(\"@azure/msal-node\");\n\n\nconst msal = require('@azure/msal-node');\n\nconst msalInstance = new msal.ConfidentialClientApplication({\n    auth: {\n        clientId: clientIds.microsoft.clientId,\n        authority: `https://login.microsoftonline.com/${clientIds.microsoft.tenantId}`,\n        clientSecret: clientIds.microsoft.clientSecret,\n        redirectUri\n    },\n    system: {\n        loggerOptions: {\n            loggerCallback: (loglevel, message, containsPii) => {\n                console.log(message);\n            },\n            piiLoggingEnabled: false,\n            logLevel: msal.LogLevel.Verbose,\n        }\n    }\n});\n\n\nconst oauth2Client = new google.auth.OAuth2(\n    clientIds.google.clientId,\n    clientIds.google.clientSecret,\n    `http://localhost:8080/api/auth/handleGoogleRedirect` // server redirect url handler\n);\n\n\nexports.signup = (req, res) => {\n    const user = new User({\n        username: req.body.username,\n        email: req.body.email,\n        password: bcrypt.hashSync(req.body.password, 8)\n    });\n\n    user.save((err, user) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n\n        const site_name = siteHelper.getSiteName(req);\n        Site.findOne({\n            domain: site_name\n        }).exec((err, site) => {\n            if (err) {\n                return err;\n            }\n\n\n            const new_site_product_availability = new User_Site_Availability({\n                user_id: user._id,\n                site_id: site._id,\n            });\n            new_site_product_availability.save((err, site_permissions) => {\n                if (err) {\n                    res.status(500).send({ message: err });\n                    return;\n                }\n\n                let token = jwt.sign({ id: user._id }, config.secret, {\n                    expiresIn: 86400 // 24 hours\n                });\n                res.status(200).send({\n                    id: user._id,\n                    username: user.email,\n                    email: user.email,\n                    accessToken: token,\n                    roles: []\n                });\n            });\n        })\n    });\n};\n\n\nexports.signin = (req, res) => {\n\n    User.findOne({\n        username: req.body.username\n    })\n        .exec((err, user) => {\n            if (err) {\n                res.status(500).send({ message: err });\n                return;\n            }\n\n            if (!user) {\n                return res.status(404).send({ message: \"User Not found.\" });\n            }\n\n            var passwordIsValid = bcrypt.compareSync(\n                req.body.password,\n                user.password\n            );\n\n            if (!passwordIsValid) {\n                return res.status(401).send({\n                    accessToken: null,\n                    message: \"Invalid Password!\"\n                });\n            }\n\n\n            var token = jwt.sign({ id: user._id }, config.secret, {\n                expiresIn: 86400 // 24 hours\n            });\n\n            const site_name = siteHelper.getSiteName(req);\n            Site.findOne({\n                domain: site_name\n            }).exec((err, site) => {\n                if (err) {\n                    return err;\n                }\n                User_Site_Availability.findOne({ user_id: user._id, site_id: site._id })\n                    .exec((err, user_site_availability) => {\n                        if (err || !user_site_availability) {\n                            res.status(403).send({ message: \"You do not have access to this site\" });\n                            return;\n                        }\n\n                        Site_Permissions.findOne({ user_id: user._id, site_id: site._id })\n                            .populate(\"roles\", \"-__v\")\n                            .exec((err, site_permissions) => {\n                                if (err) {\n                                    return err;\n                                }\n\n                                Global_Permissions.findOne({ user_id: user._id })\n                                    .populate(\"roles\", \"-__v\")\n                                    .exec((err, global_permissions) => {\n                                        if (err) {\n                                            return err;\n                                        }\n                                        let all_permissions = [];\n                                        if (site_permissions) {\n                                            all_permissions = all_permissions.concat(site_permissions.roles)\n                                        }\n\n                                        if (global_permissions) {\n                                            all_permissions = all_permissions.concat(global_permissions.roles);\n                                        }\n\n                                        if (!all_permissions) {\n                                            return res.status(403).send({\n                                                message: \"You do not have access to this site\"\n                                            });\n\n                                        }\n                                        var authorities = [];\n                                        for (let i = 0; i < all_permissions.length; i++) {\n                                            authorities.push(\"ROLE_\" + all_permissions[i].name.toUpperCase());\n                                        }\n\n                                        res.status(200).send({\n                                            id: user._id,\n                                            username: user.username,\n                                            email: user.email,\n                                            accessToken: token,\n                                            roles: authorities\n                                        });\n                                    });\n                            });\n                    });\n            });\n        });\n};\n\n\nexports.oAuthSignup = (req, res) => {\n    let token = req.body.credential;\n    let type = req.body.type;\n    let userInfo = {};\n\n\n    if (type == 'google') {\n\n\n        oauth2Client.setCredentials({ access_token: token });\n        var oauth2 = google.oauth2({\n            auth: oauth2Client,\n            version: 'v2'\n        });\n        oauth2.userinfo.get(\n            function (err, userdata) {\n                userInfo.email = userdata.data.email,\n                    userInfo.username = userInfo.email;\n                if (err) {\n                    console.log(err);\n                } else {\n                    // Email\n                    User.findOne({\n                        email: userdata.data.email\n                    }).exec((err, user) => {\n                        if (user) {\n                            res.status(400).send({ message: \"Failed! Email is already in use!\" });\n                            return;\n                        }\n\n                        const newUser = new User({\n                            ...userInfo\n                        });\n                        newUser.save((err, savedUser) => {\n                            if (err) {\n                                res.status(500).send({ message: err });\n                                return;\n                            }\n                            const site_name = siteHelper.getSiteName(req);\n                            Site.findOne({\n                                domain: site_name\n                            }).exec((err, site) => {\n                                if (err) {\n                                    return err;\n                                }\n\n                                const new_site_product_availability = new User_Site_Availability({\n                                    user_id: savedUser._id,\n                                    site_id: site._id,\n                                });\n                                new_site_product_availability.save((err, user_site_availability) => {\n                                    if (err) {\n                                        res.status(500).send({ message: err });\n                                        return;\n                                    }\n\n                                    let user_token = jwt.sign({ id: savedUser._id }, config.secret, {\n                                        expiresIn: 86400 // 24 hours\n                                    });\n                                    res.status(200).send({\n                                        id: savedUser._id,\n                                        username: savedUser.email,\n                                        email: savedUser.email,\n                                        accessToken: user_token,\n                                        roles: []\n                                    });\n                                });\n                            })\n                        });\n                    });\n                }\n            });\n    } else if (type == 'microsoft') {\n        var decoded = jwt_decode(token);\n        userInfo.username = decoded.unique_name,\n        userInfo.email = decoded.unique_name;\n        userInfo.first_name = decoded.given_name;\n        userInfo.last_name = decoded.family_name;\n\n        // Email\n        User.findOne({\n            email: userInfo.email\n        }).exec((err, user) => {\n            if (user) {\n                res.status(400).send({ message: \"Failed! Email is already in use!\" });\n                return;\n            }\n\n            const newUser = new User({\n                ...userInfo\n            });\n            newUser.save((err, savedUser) => {\n                if (err) {\n                    res.status(500).send({ message: err });\n                    return;\n                }\n                const site_name = siteHelper.getSiteName(req);\n                Site.findOne({\n                    domain: site_name\n                }).exec((err, site) => {\n                    if (err) {\n                        return err;\n                    }\n\n                    const new_site_product_availability = new User_Site_Availability({\n                        user_id: savedUser._id,\n                        site_id: site._id,\n                    });\n                    new_site_product_availability.save((err, user_site_availability) => {\n                        if (err) {\n                            res.status(500).send({ message: err });\n                            return;\n                        }\n\n                        let user_token = jwt.sign({ id: savedUser._id }, config.secret, {\n                            expiresIn: 86400 // 24 hours\n                        });\n                        res.status(200).send({\n                            id: savedUser._id,\n                            username: savedUser.email,\n                            email: savedUser.email,\n                            accessToken: user_token,\n                            roles: []\n                        });\n                    });\n                })\n            });\n        });\n    }\n};\n\nexports.oAuthSignin = (req, res) => {\n    const token = req.body.credential;\n    const type = req.body.type;\n    let userInfo = {};\n\n    if (type == 'google') {\n        oauth2Client.setCredentials({ access_token: token });\n        var oauth2 = google.oauth2({\n            auth: oauth2Client,\n            version: 'v2'\n        });\n        oauth2.userinfo.get(\n            function (err, userdata) {\n                if (err) {\n                    console.log(err);\n                } else {\n                    User.findOne({\n                        email: userdata.data.email\n                    })\n                        .exec((err, user) => {\n                            if (err) {\n                                res.status(500).send({ message: err });\n                                return;\n                            }\n\n                            if (!user) {\n                                return res.status(404).send({ message: \"User Not found.\" });\n                            }\n\n                            const site_name = siteHelper.getSiteName(req);\n\n                            let user_token = jwt.sign({ id: user._id }, config.secret, {\n                                expiresIn: 86400 // 24 hours\n                            });\n                            Site.findOne({\n                                domain: site_name\n                            }).exec((err, site) => {\n                                if (err) {\n                                    return err;\n                                }\n                                User_Site_Availability.findOne({ user_id: user._id, site_id: site._id })\n                                    .exec((err, user_site_availability) => {\n                                        if (err || !user_site_availability) {\n                                            res.status(403).send({ message: \"You do not have access to this site\" });\n                                            return;\n                                        }\n\n                                        Site_Permissions.findOne({ user_id: user._id, site_id: site._id })\n                                            .populate(\"roles\", \"-__v\")\n                                            .exec((err, site_permissions) => {\n                                                if (err) {\n                                                    return err;\n                                                }\n\n                                                Global_Permissions.findOne({ user_id: user._id })\n                                                    .populate(\"roles\", \"-__v\")\n                                                    .exec((err, global_permissions) => {\n                                                        if (err) {\n                                                            return err;\n                                                        }\n                                                        let all_permissions = [];\n                                                        if (site_permissions) {\n                                                            all_permissions = all_permissions.concat(site_permissions.roles)\n                                                        }\n\n                                                        if (global_permissions) {\n                                                            all_permissions = all_permissions.concat(global_permissions.roles);\n                                                        }\n\n                                                        if (!all_permissions) {\n                                                            return res.status(403).send({\n                                                                message: \"You do not have access to this site\"\n                                                            });\n\n                                                        }\n                                                        var authorities = [];\n                                                        for (let i = 0; i < all_permissions.length; i++) {\n                                                            authorities.push(\"ROLE_\" + all_permissions[i].name.toUpperCase());\n                                                        }\n\n\n                                                        res.status(200).send({\n                                                            id: user._id,\n                                                            username: user.username,\n                                                            email: user.email,\n                                                            accessToken: user_token,\n                                                            roles: authorities\n                                                        });\n                                                    });\n                                            });\n                                    });\n                            });\n                        });\n                }\n            });\n    } else if (type == 'microsoft') {\n        let decoded = jwt_decode(token);\n        userInfo.username = decoded.unique_name,\n            userInfo.email = decoded.unique_name;\n        userInfo.first_name = decoded.given_name;\n        userInfo.last_name = decoded.family_name;\n\n        User.findOne({\n            email: userInfo.username\n        })\n            .exec((err, user) => {\n                if (err) {\n                    res.status(500).send({ message: err });\n                    return;\n                }\n\n                if (!user) {\n                    return res.status(404).send({ message: \"User Not found.\" });\n                }\n\n                const site_name = siteHelper.getSiteName(req);\n\n                let user_token = jwt.sign({ id: user._id }, config.secret, {\n                    expiresIn: 86400 // 24 hours\n                });\n                Site.findOne({\n                    domain: site_name\n                }).exec((err, site) => {\n                    if (err) {\n                        return err;\n                    }\n                    User_Site_Availability.findOne({ user_id: user._id, site_id: site._id })\n                        .exec((err, user_site_availability) => {\n                            if (err || !user_site_availability) {\n                                res.status(403).send({ message: \"You do not have access to this site\" });\n                                return;\n                            }\n\n                            Site_Permissions.findOne({ user_id: user._id, site_id: site._id })\n                                .populate(\"roles\", \"-__v\")\n                                .exec((err, site_permissions) => {\n                                    if (err) {\n                                        return err;\n                                    }\n\n                                    Global_Permissions.findOne({ user_id: user._id })\n                                        .populate(\"roles\", \"-__v\")\n                                        .exec((err, global_permissions) => {\n                                            if (err) {\n                                                return err;\n                                            }\n                                            let all_permissions = [];\n                                            if (site_permissions) {\n                                                all_permissions = all_permissions.concat(site_permissions.roles)\n                                            }\n\n                                            if (global_permissions) {\n                                                all_permissions = all_permissions.concat(global_permissions.roles);\n                                            }\n\n                                            if (!all_permissions) {\n                                                return res.status(403).send({\n                                                    message: \"You do not have access to this site\"\n                                                });\n\n                                            }\n                                            var authorities = [];\n                                            for (let i = 0; i < all_permissions.length; i++) {\n                                                authorities.push(\"ROLE_\" + all_permissions[i].name.toUpperCase());\n                                            }\n\n\n                                            res.status(200).send({\n                                                id: user._id,\n                                                username: user.username,\n                                                email: user.email,\n                                                accessToken: user_token,\n                                                roles: authorities\n                                            });\n                                        });\n                                });\n                        });\n                });\n            });\n    }\n\n};\n\n\nexports.createLink = (req, res) => {\n    const url = oauth2Client.generateAuthUrl({\n        access_type: \"offline\",\n        scope: [\n            \"https://www.googleapis.com/auth/userinfo.email\",\n            //calendar api scopes]\n            \"https://www.googleapis.com/auth/calendar\",\n        ],\n        prompt: \"consent\",\n    });\n    res.send({ url });\n};\n\nexports.createMicrosoftLink = (req, res) => {\n    const authCodeUrlParameters = {\n        scopes: microsoft_scopes,\n        redirectUri,\n        clientId: clientIds.microsoft.clientId,\n        clientSecret: clientIds.microsoft.clientSecret\n    };\n\n    msalInstance.getAuthCodeUrl(authCodeUrlParameters).then((response) => {\n        console.log(response);\n        res.send(response);\n    });\n};\n\nexports.handleMicrosoftRedirect = async (req, res) => {\n    const tokenRequest = {\n        // The URL from the redirect will contain the Auth Code in the query parameters\n        code: req.query.code,\n        scopes: [\"user.read\"],\n        redirectUri,\n    };\n\n    // Pass the tokenRequest object with the Auth Code, scopes and redirectUri to acquireTokenByCode API\n    msalInstance.acquireTokenByCode(tokenRequest).then((response) => {\n        console.log(response);\n        User.findOne({\n            email: response.account.username\n        })\n            .exec((err, user) => {\n                if (err || !user) {\n                    res.redirect(\n                        `http://localhost:8081/register?microsoftAccessToken=${response.accessToken}`\n                    );\n                }\n\n                res.redirect(\n                    `http://localhost:8081/login?microsoftAccessToken=${response.accessToken}`\n                );\n\n            });\n    }).catch ((error) => {\n    console.log(error);\n    res.status(500).send(error);\n});\n    // const tokenRequest = {\n    //     code: req.query.code,\n    //     scopes: microsoft_scopes,\n    //     redirectUri,\n    //     clientId: clientIds.microsoft.clientId,\n    //     clientSecret: clientIds.microsoft.clientSecret\n    // };\n\n    // console.log(\"hit2\");\n    // pca.acquireTokenByCode(tokenRequest).then((response) => {\n    //     console.log(\"hit3\");\n    //     // Store the user-specific access token in the session for future use\n    //     userAccessToken = response.accessToken;\n\n    //     // Initialize the Microsoft Graph API client using the user access token\n    //     const client = Client.init({\n    //         authProvider: (done) => {\n    //             done(null, userAccessToken);\n    //         },\n    //     });\n\n    //     // Fetch the user's emails using the Microsoft Graph API\n    //     client.api(\"/me\").get(\n    //         function (err, userdata) {\n    //             if (err) {\n    //                 console.log(err);\n    //             } else {\n    //                 User.findOne({\n    //                     email: userdata.data.email\n    //                 })\n    //                     .exec((err, user) => {\n    //                         if (err || !user) {\n    //                             res.redirect(\n    //                                 `http://localhost:8081/register?accessToken=${accessToken}&refreshToken=${refreshToken}`\n    //                             );\n    //                         }\n\n    //                         res.redirect(\n    //                             `http://localhost:8081/login?accessToken=${accessToken}&refreshToken=${refreshToken}`\n    //                         );\n\n    //                     });\n    //             }\n    //         });\n    // }).catch((error) => {\n    //     console.log(error);\n    //     res.status(500).send(error);\n    // });\n\n};\n\nexports.handleGoogleRedirect = async (req, res) => {\n\n    // get code from url\n    const code = req.query.code;\n    console.log(code);\n    console.log(\"server 36 | code\", code);\n    // get access token\n    oauth2Client.getToken(code, (err, tokens) => {\n        if (err) {\n            console.log(\"server 39 | error\", err);\n            throw new Error(\"Issue with Login\", err.message);\n        }\n        const accessToken = tokens.access_token;\n        const refreshToken = tokens.refresh_token;\n\n\n        oauth2Client.setCredentials({ access_token: accessToken });\n        var oauth2 = google.oauth2({\n            auth: oauth2Client,\n            version: 'v2'\n        });\n        oauth2.userinfo.get(\n            function (err, userdata) {\n                if (err) {\n                    console.log(err);\n                } else {\n                    User.findOne({\n                        email: userdata.data.email\n                    })\n                        .exec((err, user) => {\n                            if (err || !user) {\n                                res.redirect(\n                                    `http://localhost:8081/register?accessToken=${accessToken}&refreshToken=${refreshToken}`\n                                );\n                            }\n\n                            res.redirect(\n                                `http://localhost:8081/login?accessToken=${accessToken}&refreshToken=${refreshToken}`\n                            );\n\n                        });\n                }\n            });\n    });\n};\n\nexports.getValidToken = async (req, res) => {\n    try {\n        const request = await fetch(\"https://www.googleapis.com/oauth2/v4/token\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                client_id: clientIds.google.clientId,\n                client_secret: clientIds.google.clientSecret,\n                refresh_token: req.body.refreshToken,\n                grant_type: \"refresh_token\",\n            }),\n        });\n\n        const data = await request.json();\n        console.log(\"server 74 | data\", data.access_token);\n\n        res.json({\n            accessToken: data.access_token,\n        });\n    } catch (error) {\n        res.json({ error: error.message });\n    }\n};\n\nexports.getValidMicrosoftToken = async (req, res) => {\n    try {\n        const tokenRequest = {\n            microsoft_scopes,\n            clientSecret: clientIds.microsoft.clientSecret,\n        };\n\n        const response = await cca.acquireTokenByClientCredential(tokenRequest);\n        const accessToken = response.accessToken;\n\n        // Store the client-specific access token in the session for future use\n        res.json({\n            accessToken: data.access_token,\n        });\n    } catch (error) {\n        res.status(500).send(error);\n        console.log(\"Error acquiring access token:\", error.message);\n    }\n};\n"],"mappings":"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"}},"mtime":1697752512295},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/config/clientIds.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const clientIds = {\n  google: {\n    clientId: \"4207427958-s413bjbquslipicgobcjknjhdvntrpoi.apps.googleusercontent.com\",\n    clientSecret: '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'\n  },\n  // {\"FACEBOOK\": \"185202659227880\"},\n  // {\"GITHUB\": \"15f9cc86c96d14536717\"},\n  microsoft: {\n    clientId: \"d7ded5ce-913e-4350-9840-2e22d3784f15\",\n    clientSecret: \"ZMr8Q~PbqQ.rNIYZIMFeBCX8c9mWOZwFMGzZUdfS\",\n    tenantId: \"5116f956-6b74-4fe2-b011-a2cde2cf25a9\"\n  },\n  linkedin: {\n    clientId: \"771cy7ir4mzxua\",\n    clientSecret: \"BdEnImNESEX80UQB\"\n  }\n  // {\"Instagram\": \"5fd2f11482844c5eba963747a5f34556\"},\n};\n\nexports.clientIds = clientIds;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjbGllbnRJZHMiLCJnb29nbGUiLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsIm1pY3Jvc29mdCIsInRlbmFudElkIiwibGlua2VkaW4iLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL2NvbmZpZy8iLCJzb3VyY2VzIjpbImNsaWVudElkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjbGllbnRJZHMgPXtcclxuICAgIGdvb2dsZToge1xyXG4gICAgICAgIGNsaWVudElkOiBcIjQyMDc0Mjc5NTgtczQxM2JqYnF1c2xpcGljZ29iY2prbmpoZHZudHJwb2kuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIixcclxuICAgICAgICBjbGllbnRTZWNyZXQ6ICdHT0NTUFgtdzZQclU1eWpYNS0xdGx6WGV1X1ozZklLdnB5ZydcclxuICAgIH0sXHJcbiAgICAvLyB7XCJGQUNFQk9PS1wiOiBcIjE4NTIwMjY1OTIyNzg4MFwifSxcclxuICAgIC8vIHtcIkdJVEhVQlwiOiBcIjE1ZjljYzg2Yzk2ZDE0NTM2NzE3XCJ9LFxyXG4gICAgbWljcm9zb2Z0OiB7XHJcbiAgICAgICAgY2xpZW50SWQ6IFwiZDdkZWQ1Y2UtOTEzZS00MzUwLTk4NDAtMmUyMmQzNzg0ZjE1XCIsXHJcbiAgICAgICAgY2xpZW50U2VjcmV0OiBcIlpNcjhRflBicVEuck5JWVpJTUZlQkNYOGM5bVdPWndGTUd6WlVkZlNcIixcclxuICAgICAgICB0ZW5hbnRJZDogXCI1MTE2Zjk1Ni02Yjc0LTRmZTItYjAxMS1hMmNkZTJjZjI1YTlcIlxyXG4gICAgfSxcclxuICAgIGxpbmtlZGluOiB7XHJcbiAgICAgICAgY2xpZW50SWQ6IFwiNzcxY3k3aXI0bXp4dWFcIixcclxuICAgICAgICBjbGllbnRTZWNyZXQ6IFwiQmRFbkltTkVTRVg4MFVRQlwiXHJcbiAgICB9XHJcbiAgICAvLyB7XCJJbnN0YWdyYW1cIjogXCI1ZmQyZjExNDgyODQ0YzVlYmE5NjM3NDdhNWYzNDU1NlwifSxcclxufTtcclxuXHJcblxyXG5leHBvcnRzLmNsaWVudElkcyA9IGNsaWVudElkcyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsU0FBUyxHQUFFO0VBQ2JDLE1BQU0sRUFBRTtJQUNKQyxRQUFRLEVBQUUsd0VBQXdFO0lBQ2xGQyxZQUFZLEVBQUU7RUFDbEIsQ0FBQztFQUNEO0VBQ0E7RUFDQUMsU0FBUyxFQUFFO0lBQ1BGLFFBQVEsRUFBRSxzQ0FBc0M7SUFDaERDLFlBQVksRUFBRSwwQ0FBMEM7SUFDeERFLFFBQVEsRUFBRTtFQUNkLENBQUM7RUFDREMsUUFBUSxFQUFFO0lBQ05KLFFBQVEsRUFBRSxnQkFBZ0I7SUFDMUJDLFlBQVksRUFBRTtFQUNsQjtFQUNBO0FBQ0osQ0FBQzs7QUFHREksT0FBTyxDQUFDUCxTQUFTLEdBQUdBLFNBQVMifQ==","map":{"version":3,"names":["clientIds","google","clientId","clientSecret","microsoft","tenantId","linkedin","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/config/","sources":["clientIds.js"],"sourcesContent":["const clientIds ={\r\n    google: {\r\n        clientId: \"4207427958-s413bjbquslipicgobcjknjhdvntrpoi.apps.googleusercontent.com\",\r\n        clientSecret: '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'\r\n    },\r\n    // {\"FACEBOOK\": \"185202659227880\"},\r\n    // {\"GITHUB\": \"15f9cc86c96d14536717\"},\r\n    microsoft: {\r\n        clientId: \"d7ded5ce-913e-4350-9840-2e22d3784f15\",\r\n        clientSecret: \"ZMr8Q~PbqQ.rNIYZIMFeBCX8c9mWOZwFMGzZUdfS\",\r\n        tenantId: \"5116f956-6b74-4fe2-b011-a2cde2cf25a9\"\r\n    },\r\n    linkedin: {\r\n        clientId: \"771cy7ir4mzxua\",\r\n        clientSecret: \"BdEnImNESEX80UQB\"\r\n    }\r\n    // {\"Instagram\": \"5fd2f11482844c5eba963747a5f34556\"},\r\n};\r\n\r\n\r\nexports.clientIds = clientIds"],"mappings":"AAAA,MAAMA,SAAS,GAAE;EACbC,MAAM,EAAE;IACJC,QAAQ,EAAE,wEAAwE;IAClFC,YAAY,EAAE;EAClB,CAAC;EACD;EACA;EACAC,SAAS,EAAE;IACPF,QAAQ,EAAE,sCAAsC;IAChDC,YAAY,EAAE,0CAA0C;IACxDE,QAAQ,EAAE;EACd,CAAC;EACDC,QAAQ,EAAE;IACNJ,QAAQ,EAAE,gBAAgB;IAC1BC,YAAY,EAAE;EAClB;EACA;AACJ,CAAC;;AAGDI,OAAO,CAACP,SAAS,GAAGA,SAAS"}},"mtime":1697752558258},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/site.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the site routes.\r\n * The first route is for getting all sites, the second is for getting a site by name, the third is for getting a site by id, the fourth is for creating a new site, and the fifth is for updating an existing site.\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/site.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/site/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getSites);\n  app.post(\"/api/site/by-name/\", controller.getSiteByName);\n  app.get(\"/api/site/:id\", controller.getSite);\n  app.post(\"/api/site\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createSite);\n  app.put(\"/api/site/:id\", [authJwt.verifyToken], controller.updateSite);\n  app.delete(\"/api/site/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.deleteSite);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTdXBlclVzZXIiLCJnZXRTaXRlcyIsInBvc3QiLCJnZXRTaXRlQnlOYW1lIiwiZ2V0U2l0ZSIsImlzR2xvYmFsQWRtaW4iLCJjcmVhdGVTaXRlIiwicHV0IiwidXBkYXRlU2l0ZSIsImRlbGV0ZSIsImRlbGV0ZVNpdGUiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9yb3V0ZXMvIiwic291cmNlcyI6WyJzaXRlLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhpcyBjb2RlIGlzIHRoZSBzaXRlIHJvdXRlcy5cclxuICogVGhlIGZpcnN0IHJvdXRlIGlzIGZvciBnZXR0aW5nIGFsbCBzaXRlcywgdGhlIHNlY29uZCBpcyBmb3IgZ2V0dGluZyBhIHNpdGUgYnkgbmFtZSwgdGhlIHRoaXJkIGlzIGZvciBnZXR0aW5nIGEgc2l0ZSBieSBpZCwgdGhlIGZvdXJ0aCBpcyBmb3IgY3JlYXRpbmcgYSBuZXcgc2l0ZSwgYW5kIHRoZSBmaWZ0aCBpcyBmb3IgdXBkYXRpbmcgYW4gZXhpc3Rpbmcgc2l0ZS5cclxuICovXHJcbmNvbnN0IHsgYXV0aEp3dCB9ID0gcmVxdWlyZShcIi4uLy4uLy4uL21pZGRsZXdhcmVzXCIpO1xyXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL3NpdGUuY29udHJvbGxlclwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XHJcbiAgYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgcmVzLmhlYWRlcihcclxuICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbiAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxyXG4gICAgKTtcclxuICAgIG5leHQoKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLmdldChcIi9hcGkvc2l0ZS9cIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTdXBlclVzZXJdLCBjb250cm9sbGVyLmdldFNpdGVzKTtcclxuICBhcHAucG9zdChcIi9hcGkvc2l0ZS9ieS1uYW1lL1wiLCBjb250cm9sbGVyLmdldFNpdGVCeU5hbWUpO1xyXG4gIGFwcC5nZXQoXCIvYXBpL3NpdGUvOmlkXCIsIGNvbnRyb2xsZXIuZ2V0U2l0ZSk7XHJcbiAgYXBwLnBvc3QoXCIvYXBpL3NpdGVcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNHbG9iYWxBZG1pbl0sIGNvbnRyb2xsZXIuY3JlYXRlU2l0ZSk7XHJcbiAgYXBwLnB1dChcIi9hcGkvc2l0ZS86aWRcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW5dLCBjb250cm9sbGVyLnVwZGF0ZVNpdGUpO1xyXG4gIGFwcC5kZWxldGUoXCIvYXBpL3NpdGUvOmlkXCIsICBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc0dsb2JhbEFkbWluXSwgY29udHJvbGxlci5kZWxldGVTaXRlKTtcclxufTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0VBQUVBO0FBQVEsQ0FBQyxHQUFHQyxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDbkQsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFNURFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQVNDLEdBQUcsRUFBRTtFQUM3QkEsR0FBRyxDQUFDQyxHQUFHLENBQUMsVUFBU0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtJQUMvQkQsR0FBRyxDQUFDRSxNQUFNLENBQ1IsOEJBQThCLEVBQzlCLDhDQUNGLENBQUM7SUFDREQsSUFBSSxDQUFDLENBQUM7RUFDUixDQUFDLENBQUM7RUFFRkosR0FBRyxDQUFDTSxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxFQUFFWixPQUFPLENBQUNhLFdBQVcsQ0FBQyxFQUFFWCxVQUFVLENBQUNZLFFBQVEsQ0FBQztFQUN0RlQsR0FBRyxDQUFDVSxJQUFJLENBQUMsb0JBQW9CLEVBQUViLFVBQVUsQ0FBQ2MsYUFBYSxDQUFDO0VBQ3hEWCxHQUFHLENBQUNNLEdBQUcsQ0FBQyxlQUFlLEVBQUVULFVBQVUsQ0FBQ2UsT0FBTyxDQUFDO0VBQzVDWixHQUFHLENBQUNVLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQ2YsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2tCLGFBQWEsQ0FBQyxFQUFFaEIsVUFBVSxDQUFDaUIsVUFBVSxDQUFDO0VBQzFGZCxHQUFHLENBQUNlLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQ3BCLE9BQU8sQ0FBQ1ksV0FBVyxDQUFDLEVBQUVWLFVBQVUsQ0FBQ21CLFVBQVUsQ0FBQztFQUN0RWhCLEdBQUcsQ0FBQ2lCLE1BQU0sQ0FBQyxlQUFlLEVBQUcsQ0FBQ3RCLE9BQU8sQ0FBQ1ksV0FBVyxFQUFFWixPQUFPLENBQUNrQixhQUFhLENBQUMsRUFBRWhCLFVBQVUsQ0FBQ3FCLFVBQVUsQ0FBQztBQUNuRyxDQUFDIn0=","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSuperUser","getSites","post","getSiteByName","getSite","isGlobalAdmin","createSite","put","updateSite","delete","deleteSite"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/","sources":["site.routes.js"],"sourcesContent":["/**\r\n * This code is the site routes.\r\n * The first route is for getting all sites, the second is for getting a site by name, the third is for getting a site by id, the fourth is for creating a new site, and the fifth is for updating an existing site.\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/site.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.get(\"/api/site/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getSites);\r\n  app.post(\"/api/site/by-name/\", controller.getSiteByName);\r\n  app.get(\"/api/site/:id\", controller.getSite);\r\n  app.post(\"/api/site\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createSite);\r\n  app.put(\"/api/site/:id\", [authJwt.verifyToken], controller.updateSite);\r\n  app.delete(\"/api/site/:id\",  [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.deleteSite);\r\n};\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAE5DE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,YAAY,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,QAAQ,CAAC;EACtFT,GAAG,CAACU,IAAI,CAAC,oBAAoB,EAAEb,UAAU,CAACc,aAAa,CAAC;EACxDX,GAAG,CAACM,GAAG,CAAC,eAAe,EAAET,UAAU,CAACe,OAAO,CAAC;EAC5CZ,GAAG,CAACU,IAAI,CAAC,WAAW,EAAE,CAACf,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACkB,aAAa,CAAC,EAAEhB,UAAU,CAACiB,UAAU,CAAC;EAC1Fd,GAAG,CAACe,GAAG,CAAC,eAAe,EAAE,CAACpB,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACmB,UAAU,CAAC;EACtEhB,GAAG,CAACiB,MAAM,CAAC,eAAe,EAAG,CAACtB,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACkB,aAAa,CAAC,EAAEhB,UAAU,CAACqB,UAAU,CAAC;AACnG,CAAC"}},"mtime":1704312436627},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/site.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is creating a new site, getting all sites, getting a specific site, getting a site by name, and updating a site.\r\n */\nconst db = require(\"../../../models\");\nconst Site = db.site;\nexports.createSite = (req, res) => {\n  const site = new Site({\n    ...req.body\n  });\n  site.save((err, site) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n  });\n};\nexports.getSites = (req, res) => {\n  Site.find().exec((err, sites) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!sites) {\n      return res.status(404).send({\n        message: \"Sites Not found.\"\n      });\n    }\n    res.status(200).send(sites);\n  });\n};\nexports.getSite = (req, res) => {\n  Site.find().exec((err, sites) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!sites) {\n      return res.status(404).send({\n        message: \"Site Not found.\"\n      });\n    }\n    res.status(200).send(sites);\n  });\n};\nexports.getSiteByName = (req, res) => {\n  Site.findOne({\n    domain: req.body.name\n  }).exec((err, site) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site) {\n      return res.status(404).send({\n        message: \"Site Not found.\"\n      });\n    }\n    res.status(200).send(site);\n  });\n};\nexports.updateSite = (req, res) => {\n  const site_updates = {\n    ...req.body\n  };\n  Site.findOneAndUpdate({\n    _id: req.params.id\n  }, site_updates, {\n    new: true\n  }).exec((err, site) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site) {\n      return res.status(404).send({\n        message: \"Site Not found.\"\n      });\n    }\n    res.status(200).send(site);\n  });\n};\nexports.deleteSite = (req, res) => {\n  const site_updates = {\n    ...req.body\n  };\n  Site.findOneAndUpdate({\n    _id: req.params.id\n  }, {\n    status: 'deleted'\n  }).exec((err, site) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site) {\n      return res.status(404).send({\n        message: \"Site Not found.\"\n      });\n    }\n    res.status(200).send(site);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJTaXRlIiwic2l0ZSIsImV4cG9ydHMiLCJjcmVhdGVTaXRlIiwicmVxIiwicmVzIiwiYm9keSIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImdldFNpdGVzIiwiZmluZCIsImV4ZWMiLCJzaXRlcyIsImdldFNpdGUiLCJnZXRTaXRlQnlOYW1lIiwiZmluZE9uZSIsImRvbWFpbiIsIm5hbWUiLCJ1cGRhdGVTaXRlIiwic2l0ZV91cGRhdGVzIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsInBhcmFtcyIsImlkIiwibmV3IiwiZGVsZXRlU2l0ZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsic2l0ZS5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGlzIGNvZGUgaXMgY3JlYXRpbmcgYSBuZXcgc2l0ZSwgZ2V0dGluZyBhbGwgc2l0ZXMsIGdldHRpbmcgYSBzcGVjaWZpYyBzaXRlLCBnZXR0aW5nIGEgc2l0ZSBieSBuYW1lLCBhbmQgdXBkYXRpbmcgYSBzaXRlLlxyXG4gKi9cclxuY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzXCIpO1xyXG5jb25zdCBTaXRlID0gZGIuc2l0ZTtcclxuXHJcbmV4cG9ydHMuY3JlYXRlU2l0ZSA9IChyZXEsIHJlcykgPT4ge1xyXG5cdGNvbnN0IHNpdGUgPSBuZXcgU2l0ZSh7XHJcbiAgICAgICAgLi4ucmVxLmJvZHlcclxuXHR9KTtcclxuXHJcblx0c2l0ZS5zYXZlKChlcnIsIHNpdGUpID0+IHtcclxuXHRcdGlmIChlcnIpIHtcclxuXHRcdFx0cmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0U2l0ZXMgPSAocmVxLCByZXMpID0+IHtcclxuXHRTaXRlLmZpbmQoKVxyXG4gICAgLmV4ZWMoKGVyciwgc2l0ZXMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNpdGVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiU2l0ZXMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoc2l0ZXMpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFNpdGUgPSAocmVxLCByZXMpID0+IHtcclxuICAgIFNpdGUuZmluZCgpXHJcbiAgICAuZXhlYygoZXJyLCBzaXRlcykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2l0ZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTaXRlIE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHNpdGVzKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRTaXRlQnlOYW1lID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBTaXRlLmZpbmRPbmUoe2RvbWFpbjogcmVxLmJvZHkubmFtZX0pXHJcbiAgICAuZXhlYygoZXJyLCBzaXRlKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzaXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiU2l0ZSBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChzaXRlKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy51cGRhdGVTaXRlID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBzaXRlX3VwZGF0ZXMgPSB7XHJcbiAgICAgICAgLi4ucmVxLmJvZHlcclxuICAgIH07XHJcblxyXG4gICAgU2l0ZS5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIHNpdGVfdXBkYXRlcywgeyBuZXc6IHRydWUgfSlcclxuICAgICAgICAuZXhlYygoZXJyLCBzaXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNpdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiU2l0ZSBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHNpdGUpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuXHJcblxyXG5leHBvcnRzLmRlbGV0ZVNpdGUgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpdGVfdXBkYXRlcyA9IHtcclxuICAgICAgICAuLi5yZXEuYm9keVxyXG4gICAgfTtcclxuXHJcbiAgICBTaXRlLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwge3N0YXR1czogJ2RlbGV0ZWQnfSlcclxuICAgICAgICAuZXhlYygoZXJyLCBzaXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNpdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiU2l0ZSBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHNpdGUpO1xyXG4gICAgICAgIH0pO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDckMsTUFBTUMsSUFBSSxHQUFHRixFQUFFLENBQUNHLElBQUk7QUFFcEJDLE9BQU8sQ0FBQ0MsVUFBVSxHQUFHLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2xDLE1BQU1KLElBQUksR0FBRyxJQUFJRCxJQUFJLENBQUM7SUFDZixHQUFHSSxHQUFHLENBQUNFO0VBQ2QsQ0FBQyxDQUFDO0VBRUZMLElBQUksQ0FBQ00sSUFBSSxDQUFDLENBQUNDLEdBQUcsRUFBRVAsSUFBSSxLQUFLO0lBQ3hCLElBQUlPLEdBQUcsRUFBRTtNQUNSSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRUg7TUFBSSxDQUFDLENB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","map":{"version":3,"names":["db","require","Site","site","exports","createSite","req","res","body","save","err","status","send","message","getSites","find","exec","sites","getSite","getSiteByName","findOne","domain","name","updateSite","site_updates","findOneAndUpdate","_id","params","id","new","deleteSite"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/","sources":["site.controller.js"],"sourcesContent":["/**\r\n * This code is creating a new site, getting all sites, getting a specific site, getting a site by name, and updating a site.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst Site = db.site;\r\n\r\nexports.createSite = (req, res) => {\r\n\tconst site = new Site({\r\n        ...req.body\r\n\t});\r\n\r\n\tsite.save((err, site) => {\r\n\t\tif (err) {\r\n\t\t\tres.status(500).send({ message: err });\r\n\t\t\treturn;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexports.getSites = (req, res) => {\r\n\tSite.find()\r\n    .exec((err, sites) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!sites) {\r\n            return res.status(404).send({ message: \"Sites Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(sites);\r\n    });\r\n};\r\n\r\nexports.getSite = (req, res) => {\r\n    Site.find()\r\n    .exec((err, sites) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!sites) {\r\n            return res.status(404).send({ message: \"Site Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(sites);\r\n    });\r\n};\r\n\r\nexports.getSiteByName = (req, res) => {\r\n    Site.findOne({domain: req.body.name})\r\n    .exec((err, site) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!site) {\r\n            return res.status(404).send({ message: \"Site Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(site);\r\n    });\r\n};\r\n\r\nexports.updateSite = (req, res) => {\r\n    const site_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    Site.findOneAndUpdate({ _id: req.params.id }, site_updates, { new: true })\r\n        .exec((err, site) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!site) {\r\n                return res.status(404).send({ message: \"Site Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(site);\r\n        });\r\n};\r\n\r\n\r\n\r\nexports.deleteSite = (req, res) => {\r\n    const site_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    Site.findOneAndUpdate({ _id: req.params.id }, {status: 'deleted'})\r\n        .exec((err, site) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!site) {\r\n                return res.status(404).send({ message: \"Site Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(site);\r\n        });\r\n};"],"mappings":"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"}},"mtime":1701964653066},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/user_site_availability.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the routes for the user site availability controller.\r\n * The routes are:\r\n\r\nGET /api/user_site_availability/\r\nPOST /api/user_site_availability\r\nPUT /api/user_site_availability/:id\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/user_site_availability.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/user_site_availability/\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.getUserSiteAvailabilities);\n  app.post(\"/api/user_site_availability\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createUserSiteAvailability);\n  app.put(\"/api/user_site_availability/:id\", [authJwt.verifyToken], controller.updateUserSiteAvailability);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTaXRlQWRtaW4iLCJnZXRVc2VyU2l0ZUF2YWlsYWJpbGl0aWVzIiwicG9zdCIsImNyZWF0ZVVzZXJTaXRlQXZhaWxhYmlsaXR5IiwicHV0IiwidXBkYXRlVXNlclNpdGVBdmFpbGFiaWxpdHkiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9yb3V0ZXMvIiwic291cmNlcyI6WyJ1c2VyX3NpdGVfYXZhaWxhYmlsaXR5LnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhpcyBjb2RlIGlzIHRoZSByb3V0ZXMgZm9yIHRoZSB1c2VyIHNpdGUgYXZhaWxhYmlsaXR5IGNvbnRyb2xsZXIuXHJcbiAqIFRoZSByb3V0ZXMgYXJlOlxyXG5cclxuR0VUIC9hcGkvdXNlcl9zaXRlX2F2YWlsYWJpbGl0eS9cclxuUE9TVCAvYXBpL3VzZXJfc2l0ZV9hdmFpbGFiaWxpdHlcclxuUFVUIC9hcGkvdXNlcl9zaXRlX2F2YWlsYWJpbGl0eS86aWRcclxuICovXHJcbmNvbnN0IHsgYXV0aEp3dCB9ID0gcmVxdWlyZShcIi4uLy4uLy4uL21pZGRsZXdhcmVzXCIpO1xyXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL3VzZXJfc2l0ZV9hdmFpbGFiaWxpdHkuY29udHJvbGxlclwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XHJcbiAgYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgcmVzLmhlYWRlcihcclxuICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbiAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxyXG4gICAgKTtcclxuICAgIG5leHQoKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLmdldChcIi9hcGkvdXNlcl9zaXRlX2F2YWlsYWJpbGl0eS9cIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTaXRlQWRtaW5dLCBjb250cm9sbGVyLmdldFVzZXJTaXRlQXZhaWxhYmlsaXRpZXMpO1xyXG4gIGFwcC5wb3N0KFwiL2FwaS91c2VyX3NpdGVfYXZhaWxhYmlsaXR5XCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU2l0ZUFkbWluXSwgY29udHJvbGxlci5jcmVhdGVVc2VyU2l0ZUF2YWlsYWJpbGl0eSk7XHJcbiAgYXBwLnB1dChcIi9hcGkvdXNlcl9zaXRlX2F2YWlsYWJpbGl0eS86aWRcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW5dLCBjb250cm9sbGVyLnVwZGF0ZVVzZXJTaXRlQXZhaWxhYmlsaXR5KTtcclxuXHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ25ELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLGtEQUFrRCxDQUFDO0FBRTlFRSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFTQyxHQUFHLEVBQUU7RUFDN0JBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFVBQVNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDL0JELEdBQUcsQ0FBQ0UsTUFBTSxDQUNSLDhCQUE4QixFQUM5Qiw4Q0FDRixDQUFDO0lBQ0RELElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDO0VBRUZKLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLDhCQUE4QixFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxFQUFFWixPQUFPLENBQUNhLFdBQVcsQ0FBQyxFQUFFWCxVQUFVLENBQUNZLHlCQUF5QixDQUFDO0VBQ3pIVCxHQUFHLENBQUNVLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxDQUFDZixPQUFPLENBQUNZLFdBQVcsRUFBRVosT0FBTyxDQUFDYSxXQUFXLENBQUMsRUFBRVgsVUFBVSxDQUFDYywwQkFBMEIsQ0FBQztFQUMxSFgsR0FBRyxDQUFDWSxHQUFHLENBQUMsaUNBQWlDLEVBQUUsQ0FBQ2pCLE9BQU8sQ0FBQ1ksV0FBVyxDQUFDLEVBQUVWLFVBQVUsQ0FBQ2dCLDBCQUEwQixDQUFDO0FBRTFHLENBQUMifQ==","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSiteAdmin","getUserSiteAvailabilities","post","createUserSiteAvailability","put","updateUserSiteAvailability"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/","sources":["user_site_availability.routes.js"],"sourcesContent":["/**\r\n * This code is the routes for the user site availability controller.\r\n * The routes are:\r\n\r\nGET /api/user_site_availability/\r\nPOST /api/user_site_availability\r\nPUT /api/user_site_availability/:id\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/user_site_availability.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.get(\"/api/user_site_availability/\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.getUserSiteAvailabilities);\r\n  app.post(\"/api/user_site_availability\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createUserSiteAvailability);\r\n  app.put(\"/api/user_site_availability/:id\", [authJwt.verifyToken], controller.updateUserSiteAvailability);\r\n\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,kDAAkD,CAAC;AAE9EE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,8BAA8B,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,yBAAyB,CAAC;EACzHT,GAAG,CAACU,IAAI,CAAC,6BAA6B,EAAE,CAACf,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACc,0BAA0B,CAAC;EAC1HX,GAAG,CAACY,GAAG,CAAC,iCAAiC,EAAE,CAACjB,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACgB,0BAA0B,CAAC;AAE1G,CAAC"}},"mtime":1697752512339},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/user_site_availability.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code exports functions that can be used to create, read, update, and delete user site availability data.\r\n */\nconst db = require(\"../../../models\");\nconst UserSiteAvailability = db.user_site_availability;\nexports.createUserSiteAvailability = (req, res) => {\n  const new_user_site_availability = new UserSiteAvailability({\n    user_id: req.body.user_id,\n    site_id: req.body.site_id\n  });\n  new_user_site_availability.save((err, user_site_availability) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    res.status(200).send(user_site_availability);\n  });\n};\nexports.getUserSiteAvailabilities = (req, res) => {\n  UserSiteAvailability.find().exec((err, user_site_availabilities) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!user_site_availabilities) {\n      return res.status(404).send({\n        message: \"UserSiteAvailabilities Not found.\"\n      });\n    }\n    res.status(200).send(user_site_availabilities);\n  });\n};\nexports.updateUserSiteAvailability = (req, res) => {\n  const user_site_availability_updates = {\n    ...req.body\n  };\n  UserSiteAvailability.findOneAndUpdate({\n    _id: req.params.id\n  }, user_site_availability_updates, {\n    new: true\n  }).exec((err, user_site_availability) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!user_site_availability) {\n      return res.status(404).send({\n        message: \"UserSiteAvailability Not found.\"\n      });\n    }\n    res.status(200).send(user_site_availability);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJVc2VyU2l0ZUF2YWlsYWJpbGl0eSIsInVzZXJfc2l0ZV9hdmFpbGFiaWxpdHkiLCJleHBvcnRzIiwiY3JlYXRlVXNlclNpdGVBdmFpbGFiaWxpdHkiLCJyZXEiLCJyZXMiLCJuZXdfdXNlcl9zaXRlX2F2YWlsYWJpbGl0eSIsInVzZXJfaWQiLCJib2R5Iiwic2l0ZV9pZCIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImdldFVzZXJTaXRlQXZhaWxhYmlsaXRpZXMiLCJmaW5kIiwiZXhlYyIsInVzZXJfc2l0ZV9hdmFpbGFiaWxpdGllcyIsInVwZGF0ZVVzZXJTaXRlQXZhaWxhYmlsaXR5IiwidXNlcl9zaXRlX2F2YWlsYWJpbGl0eV91cGRhdGVzIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsInBhcmFtcyIsImlkIiwibmV3Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NpdGUvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJ1c2VyX3NpdGVfYXZhaWxhYmlsaXR5LmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgY29kZSBleHBvcnRzIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSwgcmVhZCwgdXBkYXRlLCBhbmQgZGVsZXRlIHVzZXIgc2l0ZSBhdmFpbGFiaWxpdHkgZGF0YS5cclxuICovXHJcbmNvbnN0IGRiID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVsc1wiKTtcclxuY29uc3QgVXNlclNpdGVBdmFpbGFiaWxpdHkgPSBkYi51c2VyX3NpdGVfYXZhaWxhYmlsaXR5O1xyXG5cclxuZXhwb3J0cy5jcmVhdGVVc2VyU2l0ZUF2YWlsYWJpbGl0eSA9IChyZXEsIHJlcykgPT4ge1xyXG5cdGNvbnN0IG5ld191c2VyX3NpdGVfYXZhaWxhYmlsaXR5ID0gbmV3IFVzZXJTaXRlQXZhaWxhYmlsaXR5KHtcclxuXHRcdHVzZXJfaWQ6IHJlcS5ib2R5LnVzZXJfaWQsXHJcblx0XHRzaXRlX2lkOiByZXEuYm9keS5zaXRlX2lkXHJcblx0fSk7XHJcblxyXG5cdG5ld191c2VyX3NpdGVfYXZhaWxhYmlsaXR5LnNhdmUoKGVyciwgdXNlcl9zaXRlX2F2YWlsYWJpbGl0eSkgPT4ge1xyXG5cdFx0aWYgKGVycikge1xyXG5cdFx0XHRyZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh1c2VyX3NpdGVfYXZhaWxhYmlsaXR5KTtcclxuXHR9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0VXNlclNpdGVBdmFpbGFiaWxpdGllcyA9IChyZXEsIHJlcykgPT4ge1xyXG5cdFVzZXJTaXRlQXZhaWxhYmlsaXR5LmZpbmQoKVxyXG4gICAgLmV4ZWMoKGVyciwgdXNlcl9zaXRlX2F2YWlsYWJpbGl0aWVzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF1c2VyX3NpdGVfYXZhaWxhYmlsaXRpZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJVc2VyU2l0ZUF2YWlsYWJpbGl0aWVzIE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHVzZXJfc2l0ZV9hdmFpbGFiaWxpdGllcyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMudXBkYXRlVXNlclNpdGVBdmFpbGFiaWxpdHkgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHVzZXJfc2l0ZV9hdmFpbGFiaWxpdHlfdXBkYXRlcyA9IHtcclxuICAgICAgICAuLi5yZXEuYm9keVxyXG4gICAgfTtcclxuXHJcbiAgICBVc2VyU2l0ZUF2YWlsYWJpbGl0eS5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIHVzZXJfc2l0ZV9hdmFpbGFiaWxpdHlfdXBkYXRlcywgeyBuZXc6IHRydWUgfSlcclxuICAgICAgICAuZXhlYygoZXJyLCB1c2VyX3NpdGVfYXZhaWxhYmlsaXR5KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXVzZXJfc2l0ZV9hdmFpbGFiaWxpdHkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiVXNlclNpdGVBdmFpbGFiaWxpdHkgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh1c2VyX3NpdGVfYXZhaWxhYmlsaXR5KTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDckMsTUFBTUMsb0JBQW9CLEdBQUdGLEVBQUUsQ0FBQ0csc0JBQXNCO0FBRXREQyxPQUFPLENBQUNDLDBCQUEwQixHQUFHLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2xELE1BQU1DLDBCQUEwQixHQUFHLElBQUlOLG9CQUFvQixDQUFDO0lBQzNETyxPQUFPLEVBQUVILEdBQUcsQ0FBQ0ksSUFBSSxDQUFDRCxPQUFPO0lBQ3pCRSxPQUFPLEVBQUVMLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDQztFQUNuQixDQUFDLENBQUM7RUFFRkgsMEJBQTBCLENBQUNJLElBQUksQ0FBQyxDQUFDQyxHQUFHLEVBQUVWLHNCQUFzQixLQUFLO0lBQ2hFLElBQUlVLEdBQUcsRUFBRTtNQUNSTixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRUg7TUFBSSxDQUFDLENBQUM7TUFDdEM7SUFDRDtJQUVNTixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDWixzQkFBc0IsQ0FBQztFQUNuRCxDQUFDLENBQUM7QUFDSCxDQUFDO0FBRURDLE9BQU8sQ0FBQ2EseUJBQXlCLEdBQUcsQ0FBQ1gsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDakRMLG9CQUFvQixDQUFDZ0IsSUFBSSxDQUFDLENBQUMsQ0FDdkJDLElBQUksQ0FBQyxDQUFDTixHQUFHLEVBQUVPLHdCQUF3QixLQUFLO0lBQ3JDLElBQUlQLEdBQUcsRUFBRTtNQUNMTixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRUg7TUFBSSxDQUFDLENBQUM7TUFDdEM7SUFDSjtJQUVBLElBQUksQ0FBQ08sd0JBQXdCLEVBQUU7TUFDM0IsT0FBT2IsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUU7TUFBb0MsQ0FBQyxDQUFDO0lBQ2pGO0lBRUFULEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNLLHdCQUF3QixDQUFDO0VBQ2xELENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRGhCLE9BQU8sQ0FBQ2lCLDBCQUEwQixHQUFHLENBQUNmLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQy9DLE1BQU1lLDhCQUE4QixHQUFHO0lBQ25DLEdBQUdoQixHQUFHLENBQUNJO0VBQ1gsQ0FBQztFQUVEUixvQkFBb0IsQ0FBQ3FCLGdCQUFnQixDQUFDO0lBQUVDLEdBQUcsRUFBRWxCLEdBQUcsQ0FBQ21CLE1BQU0sQ0FBQ0M7RUFBRyxDQUFDLEVBQUVKLDhCQUE4QixFQUFFO0lBQUVLLEdBQUcsRUFBRTtFQUFLLENBQUMsQ0FBQyxDQUN2R1IsSUFBSSxDQUFDLENBQUNOLEdBQUcsRUFBRVYsc0JBQXNCLEtBQUs7SUFDbkMsSUFBSVUsR0FBRyxFQUFFO01BQ0xOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFSDtNQUFJLENBQUMsQ0FBQztNQUN0QztJQUNKO0lBRUEsSUFBSSxDQUFDVixzQkFBc0IsRUFBRTtNQUN6QixPQUFPSSxHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUFrQyxDQUFDLENBQUM7SUFDL0U7SUFFQVQsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ1osc0JBQXNCLENBQUM7RUFDaEQsQ0FBQyxDQUFDO0FBQ1YsQ0FBQyJ9","map":{"version":3,"names":["db","require","UserSiteAvailability","user_site_availability","exports","createUserSiteAvailability","req","res","new_user_site_availability","user_id","body","site_id","save","err","status","send","message","getUserSiteAvailabilities","find","exec","user_site_availabilities","updateUserSiteAvailability","user_site_availability_updates","findOneAndUpdate","_id","params","id","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/","sources":["user_site_availability.controller.js"],"sourcesContent":["/**\r\n * This code exports functions that can be used to create, read, update, and delete user site availability data.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst UserSiteAvailability = db.user_site_availability;\r\n\r\nexports.createUserSiteAvailability = (req, res) => {\r\n\tconst new_user_site_availability = new UserSiteAvailability({\r\n\t\tuser_id: req.body.user_id,\r\n\t\tsite_id: req.body.site_id\r\n\t});\r\n\r\n\tnew_user_site_availability.save((err, user_site_availability) => {\r\n\t\tif (err) {\r\n\t\t\tres.status(500).send({ message: err });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n        res.status(200).send(user_site_availability);\r\n\t});\r\n};\r\n\r\nexports.getUserSiteAvailabilities = (req, res) => {\r\n\tUserSiteAvailability.find()\r\n    .exec((err, user_site_availabilities) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!user_site_availabilities) {\r\n            return res.status(404).send({ message: \"UserSiteAvailabilities Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(user_site_availabilities);\r\n    });\r\n};\r\n\r\nexports.updateUserSiteAvailability = (req, res) => {\r\n    const user_site_availability_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    UserSiteAvailability.findOneAndUpdate({ _id: req.params.id }, user_site_availability_updates, { new: true })\r\n        .exec((err, user_site_availability) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!user_site_availability) {\r\n                return res.status(404).send({ message: \"UserSiteAvailability Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(user_site_availability);\r\n        });\r\n};\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA,MAAMA,EAAE,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AACrC,MAAMC,oBAAoB,GAAGF,EAAE,CAACG,sBAAsB;AAEtDC,OAAO,CAACC,0BAA0B,GAAG,CAACC,GAAG,EAAEC,GAAG,KAAK;EAClD,MAAMC,0BAA0B,GAAG,IAAIN,oBAAoB,CAAC;IAC3DO,OAAO,EAAEH,GAAG,CAACI,IAAI,CAACD,OAAO;IACzBE,OAAO,EAAEL,GAAG,CAACI,IAAI,CAACC;EACnB,CAAC,CAAC;EAEFH,0BAA0B,CAACI,IAAI,CAAC,CAACC,GAAG,EAAEV,sBAAsB,KAAK;IAChE,IAAIU,GAAG,EAAE;MACRN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACD;IAEMN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACZ,sBAAsB,CAAC;EACnD,CAAC,CAAC;AACH,CAAC;AAEDC,OAAO,CAACa,yBAAyB,GAAG,CAACX,GAAG,EAAEC,GAAG,KAAK;EACjDL,oBAAoB,CAACgB,IAAI,CAAC,CAAC,CACvBC,IAAI,CAAC,CAACN,GAAG,EAAEO,wBAAwB,KAAK;IACrC,IAAIP,GAAG,EAAE;MACLN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACJ;IAEA,IAAI,CAACO,wBAAwB,EAAE;MAC3B,OAAOb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAoC,CAAC,CAAC;IACjF;IAEAT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACK,wBAAwB,CAAC;EAClD,CAAC,CAAC;AACN,CAAC;AAEDhB,OAAO,CAACiB,0BAA0B,GAAG,CAACf,GAAG,EAAEC,GAAG,KAAK;EAC/C,MAAMe,8BAA8B,GAAG;IACnC,GAAGhB,GAAG,CAACI;EACX,CAAC;EAEDR,oBAAoB,CAACqB,gBAAgB,CAAC;IAAEC,GAAG,EAAElB,GAAG,CAACmB,MAAM,CAACC;EAAG,CAAC,EAAEJ,8BAA8B,EAAE;IAAEK,GAAG,EAAE;EAAK,CAAC,CAAC,CACvGR,IAAI,CAAC,CAACN,GAAG,EAAEV,sBAAsB,KAAK;IACnC,IAAIU,GAAG,EAAE;MACLN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACJ;IAEA,IAAI,CAACV,sBAAsB,EAAE;MACzB,OAAOI,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAkC,CAAC,CAAC;IAC/E;IAEAT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACZ,sBAAsB,CAAC;EAChD,CAAC,CAAC;AACV,CAAC"}},"mtime":1697752512327},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/site_product_availability.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the site_product_availability route.\r\n * It contains the different HTTP methods that can be used for the site_product_availability route and what middleware is required for each method.\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/site_product_availability.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/site_product_availability/\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.getSiteProductAvailabilities);\n  //   app.get(\"/api/site_product_availability/:id\", controller.getSiteProductAvailability);\n  app.post(\"/api/site_product_availability\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createSiteProductAvailability);\n  app.delete(\"/api/site_product_availability/:id\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.deleteSiteProductAvailability);\n  app.put(\"/api/site_product_availability/:id\", [authJwt.verifyToken], controller.updateSiteProductAvailability);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTaXRlQWRtaW4iLCJnZXRTaXRlUHJvZHVjdEF2YWlsYWJpbGl0aWVzIiwicG9zdCIsImNyZWF0ZVNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5IiwiZGVsZXRlIiwiZGVsZXRlU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkiLCJwdXQiLCJ1cGRhdGVTaXRlUHJvZHVjdEF2YWlsYWJpbGl0eSJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL3JvdXRlcy8iLCJzb3VyY2VzIjpbInNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGlzIGNvZGUgaXMgdGhlIHNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkgcm91dGUuXHJcbiAqIEl0IGNvbnRhaW5zIHRoZSBkaWZmZXJlbnQgSFRUUCBtZXRob2RzIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHRoZSBzaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5IHJvdXRlIGFuZCB3aGF0IG1pZGRsZXdhcmUgaXMgcmVxdWlyZWQgZm9yIGVhY2ggbWV0aG9kLlxyXG4gKi9cclxuY29uc3QgeyBhdXRoSnd0IH0gPSByZXF1aXJlKFwiLi4vLi4vLi4vbWlkZGxld2FyZXNcIik7XHJcbmNvbnN0IGNvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi4vY29udHJvbGxlcnMvc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eS5jb250cm9sbGVyXCIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcHApIHtcclxuICBhcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICByZXMuaGVhZGVyKFxyXG4gICAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcclxuICAgICAgXCJ4LWFjY2Vzcy10b2tlbiwgT3JpZ2luLCBDb250ZW50LVR5cGUsIEFjY2VwdFwiXHJcbiAgICApO1xyXG4gICAgbmV4dCgpO1xyXG4gIH0pO1xyXG5cclxuICBhcHAuZ2V0KFwiL2FwaS9zaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5L1wiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc1NpdGVBZG1pbl0sIGNvbnRyb2xsZXIuZ2V0U2l0ZVByb2R1Y3RBdmFpbGFiaWxpdGllcyk7XHJcbi8vICAgYXBwLmdldChcIi9hcGkvc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eS86aWRcIiwgY29udHJvbGxlci5nZXRTaXRlUHJvZHVjdEF2YWlsYWJpbGl0eSk7XHJcbiAgYXBwLnBvc3QoXCIvYXBpL3NpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHlcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTaXRlQWRtaW5dLCBjb250cm9sbGVyLmNyZWF0ZVNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5KTtcclxuICBhcHAuZGVsZXRlKFwiL2FwaS9zaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5LzppZFwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc1NpdGVBZG1pbl0sIGNvbnRyb2xsZXIuZGVsZXRlU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkpO1xyXG4gIGFwcC5wdXQoXCIvYXBpL3NpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkvOmlkXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuXSwgY29udHJvbGxlci51cGRhdGVTaXRlUHJvZHVjdEF2YWlsYWJpbGl0eSk7XHJcblxyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0VBQUVBO0FBQVEsQ0FBQyxHQUFHQyxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDbkQsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMscURBQXFELENBQUM7QUFFakZFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQVNDLEdBQUcsRUFBRTtFQUM3QkEsR0FBRyxDQUFDQyxHQUFHLENBQUMsVUFBU0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtJQUMvQkQsR0FBRyxDQUFDRSxNQUFNLENBQ1IsOEJBQThCLEVBQzlCLDhDQUNGLENBQUM7SUFDREQsSUFBSSxDQUFDLENBQUM7RUFDUixDQUFDLENBQUM7RUFFRkosR0FBRyxDQUFDTSxHQUFHLENBQUMsaUNBQWlDLEVBQUUsQ0FBQ1gsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2EsV0FBVyxDQUFDLEVBQUVYLFVBQVUsQ0FBQ1ksNEJBQTRCLENBQUM7RUFDakk7RUFDRVQsR0FBRyxDQUFDVSxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsQ0FBQ2YsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2EsV0FBVyxDQUFDLEVBQUVYLFVBQVUsQ0FBQ2MsNkJBQTZCLENBQUM7RUFDaElYLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDLG9DQUFvQyxFQUFFLENBQUNqQixPQUFPLENBQUNZLFdBQVcsRUFBRVosT0FBTyxDQUFDYSxXQUFXLENBQUMsRUFBRVgsVUFBVSxDQUFDZ0IsNkJBQTZCLENBQUM7RUFDdEliLEdBQUcsQ0FBQ2MsR0FBRyxDQUFDLG9DQUFvQyxFQUFFLENBQUNuQixPQUFPLENBQUNZLFdBQVcsQ0FBQyxFQUFFVixVQUFVLENBQUNrQiw2QkFBNkIsQ0FBQztBQUVoSCxDQUFDIn0=","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSiteAdmin","getSiteProductAvailabilities","post","createSiteProductAvailability","delete","deleteSiteProductAvailability","put","updateSiteProductAvailability"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/","sources":["site_product_availability.routes.js"],"sourcesContent":["/**\r\n * This code is the site_product_availability route.\r\n * It contains the different HTTP methods that can be used for the site_product_availability route and what middleware is required for each method.\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/site_product_availability.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.get(\"/api/site_product_availability/\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.getSiteProductAvailabilities);\r\n//   app.get(\"/api/site_product_availability/:id\", controller.getSiteProductAvailability);\r\n  app.post(\"/api/site_product_availability\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createSiteProductAvailability);\r\n  app.delete(\"/api/site_product_availability/:id\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.deleteSiteProductAvailability);\r\n  app.put(\"/api/site_product_availability/:id\", [authJwt.verifyToken], controller.updateSiteProductAvailability);\r\n\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,qDAAqD,CAAC;AAEjFE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,iCAAiC,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,4BAA4B,CAAC;EACjI;EACET,GAAG,CAACU,IAAI,CAAC,gCAAgC,EAAE,CAACf,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACc,6BAA6B,CAAC;EAChIX,GAAG,CAACY,MAAM,CAAC,oCAAoC,EAAE,CAACjB,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACgB,6BAA6B,CAAC;EACtIb,GAAG,CAACc,GAAG,CAAC,oCAAoC,EAAE,CAACnB,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACkB,6BAA6B,CAAC;AAEhH,CAAC"}},"mtime":1697752512339},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/site_product_availability.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * The code is creating, retrieving, updating, and deleting site product availabilities.\r\n */\nconst db = require(\"../../../models\");\nconst SiteProductAvailability = db.site_product_availability;\nexports.createSiteProductAvailability = (req, res) => {\n  const site_product_availability = new SiteProductAvailability({\n    product_id: req.body.product_id,\n    site_id: req.body.site_id\n  });\n  site_product_availability.save((err, product_availability) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    res.status(200).send(product_availability);\n  });\n};\nexports.getSiteProductAvailabilities = (req, res) => {\n  SiteProductAvailability.find().exec((err, site_product_availabilities) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_product_availabilities) {\n      return res.status(404).send({\n        message: \"SiteProductAvailabilities Not found.\"\n      });\n    }\n    res.status(200).send(site_product_availabilities);\n  });\n};\nexports.getSiteProductAvailability = (req, res) => {\n  SiteProductAvailability.find().exec((err, site_product_availabilities) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_product_availabilities) {\n      return res.status(404).send({\n        message: \"SiteProductAvailability Not found.\"\n      });\n    }\n    res.status(200).send(site_product_availabilities);\n  });\n};\nexports.deleteSiteProductAvailability = (req, res) => {\n  SiteProductAvailability.deleteOne({\n    _id: req.id\n  }).exec((err, site_product_availability) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_product_availabilities) {\n      return res.status(404).send({\n        message: \"SiteProductAvailability Not found.\"\n      });\n    }\n    res.status(200).send(req.id);\n  });\n};\nexports.updateSiteProductAvailability = (req, res) => {\n  const site_product_availability_updates = {\n    ...req.body\n  };\n  SiteProductAvailability.findOneAndUpdate({\n    _id: req.params.id\n  }, site_product_availability_updates, {\n    new: true\n  }).exec((err, site_product_availability) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_product_availability) {\n      return res.status(404).send({\n        message: \"SiteProductAvailability Not found.\"\n      });\n    }\n    res.status(200).send(site_product_availability);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJTaXRlUHJvZHVjdEF2YWlsYWJpbGl0eSIsInNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkiLCJleHBvcnRzIiwiY3JlYXRlU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkiLCJyZXEiLCJyZXMiLCJwcm9kdWN0X2lkIiwiYm9keSIsInNpdGVfaWQiLCJzYXZlIiwiZXJyIiwicHJvZHVjdF9hdmFpbGFiaWxpdHkiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImdldFNpdGVQcm9kdWN0QXZhaWxhYmlsaXRpZXMiLCJmaW5kIiwiZXhlYyIsInNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdGllcyIsImdldFNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5IiwiZGVsZXRlU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkiLCJkZWxldGVPbmUiLCJfaWQiLCJpZCIsInVwZGF0ZVNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5Iiwic2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eV91cGRhdGVzIiwiZmluZE9uZUFuZFVwZGF0ZSIsInBhcmFtcyIsIm5ldyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsic2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eS5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGUgY29kZSBpcyBjcmVhdGluZywgcmV0cmlldmluZywgdXBkYXRpbmcsIGFuZCBkZWxldGluZyBzaXRlIHByb2R1Y3QgYXZhaWxhYmlsaXRpZXMuXHJcbiAqL1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHNcIik7XHJcbmNvbnN0IFNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5ID0gZGIuc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eTtcclxuXHJcbmV4cG9ydHMuY3JlYXRlU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkgPSAocmVxLCByZXMpID0+IHtcclxuXHRjb25zdCBzaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5ID0gbmV3IFNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5KHtcclxuXHRcdHByb2R1Y3RfaWQ6IHJlcS5ib2R5LnByb2R1Y3RfaWQsXHJcblx0XHRzaXRlX2lkOiByZXEuYm9keS5zaXRlX2lkXHJcblx0fSk7XHJcblxyXG5cdHNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkuc2F2ZSgoZXJyLCBwcm9kdWN0X2F2YWlsYWJpbGl0eSkgPT4ge1xyXG5cdFx0aWYgKGVycikge1xyXG5cdFx0XHRyZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHByb2R1Y3RfYXZhaWxhYmlsaXR5KTtcclxuICAgIFxyXG5cdH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRTaXRlUHJvZHVjdEF2YWlsYWJpbGl0aWVzID0gKHJlcSwgcmVzKSA9PiB7XHJcblx0U2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkuZmluZCgpXHJcbiAgICAuZXhlYygoZXJyLCBzaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXRpZXMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlNpdGVQcm9kdWN0QXZhaWxhYmlsaXRpZXMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0aWVzKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRTaXRlUHJvZHVjdEF2YWlsYWJpbGl0eSA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkuZmluZCgpXHJcbiAgICAuZXhlYygoZXJyLCBzaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXRpZXMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5IE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdGllcyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZGVsZXRlU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkgPSAocmVxLCByZXMpID0+IHtcclxuICAgIFNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5LmRlbGV0ZU9uZSh7X2lkOiByZXEuaWR9KVxyXG4gICAgLmV4ZWMoKGVyciwgc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eSkgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0aWVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiU2l0ZVByb2R1Y3RBdmFpbGFiaWxpdHkgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocmVxLmlkKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy51cGRhdGVTaXRlUHJvZHVjdEF2YWlsYWJpbGl0eSA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eV91cGRhdGVzID0ge1xyXG4gICAgICAgIC4uLnJlcS5ib2R5XHJcbiAgICB9O1xyXG5cclxuICAgIFNpdGVQcm9kdWN0QXZhaWxhYmlsaXR5LmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eV91cGRhdGVzLCB7IG5ldzogdHJ1ZSB9KVxyXG4gICAgICAgIC5leGVjKChlcnIsIHNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTaXRlUHJvZHVjdEF2YWlsYWJpbGl0eSBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkpO1xyXG4gICAgICAgIH0pO1xyXG59OyJdLCJtYXBwaW5ncyI6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","map":{"version":3,"names":["db","require","SiteProductAvailability","site_product_availability","exports","createSiteProductAvailability","req","res","product_id","body","site_id","save","err","product_availability","status","send","message","getSiteProductAvailabilities","find","exec","site_product_availabilities","getSiteProductAvailability","deleteSiteProductAvailability","deleteOne","_id","id","updateSiteProductAvailability","site_product_availability_updates","findOneAndUpdate","params","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/","sources":["site_product_availability.controller.js"],"sourcesContent":["/**\r\n * The code is creating, retrieving, updating, and deleting site product availabilities.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst SiteProductAvailability = db.site_product_availability;\r\n\r\nexports.createSiteProductAvailability = (req, res) => {\r\n\tconst site_product_availability = new SiteProductAvailability({\r\n\t\tproduct_id: req.body.product_id,\r\n\t\tsite_id: req.body.site_id\r\n\t});\r\n\r\n\tsite_product_availability.save((err, product_availability) => {\r\n\t\tif (err) {\r\n\t\t\tres.status(500).send({ message: err });\r\n\t\t\treturn;\r\n\t\t}\r\n        \r\n        res.status(200).send(product_availability);\r\n    \r\n\t});\r\n};\r\n\r\nexports.getSiteProductAvailabilities = (req, res) => {\r\n\tSiteProductAvailability.find()\r\n    .exec((err, site_product_availabilities) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!site_product_availabilities) {\r\n            return res.status(404).send({ message: \"SiteProductAvailabilities Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(site_product_availabilities);\r\n    });\r\n};\r\n\r\nexports.getSiteProductAvailability = (req, res) => {\r\n    SiteProductAvailability.find()\r\n    .exec((err, site_product_availabilities) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!site_product_availabilities) {\r\n            return res.status(404).send({ message: \"SiteProductAvailability Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(site_product_availabilities);\r\n    });\r\n};\r\n\r\nexports.deleteSiteProductAvailability = (req, res) => {\r\n    SiteProductAvailability.deleteOne({_id: req.id})\r\n    .exec((err, site_product_availability) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!site_product_availabilities) {\r\n            return res.status(404).send({ message: \"SiteProductAvailability Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(req.id);\r\n    });\r\n};\r\n\r\nexports.updateSiteProductAvailability = (req, res) => {\r\n    const site_product_availability_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    SiteProductAvailability.findOneAndUpdate({ _id: req.params.id }, site_product_availability_updates, { new: true })\r\n        .exec((err, site_product_availability) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!site_product_availability) {\r\n                return res.status(404).send({ message: \"SiteProductAvailability Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(site_product_availability);\r\n        });\r\n};"],"mappings":"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"}},"mtime":1697752512327},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/routes/site_object.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code is the routes for the site_object controller.\n * The first route is for getting all site_object, the second is for getting site_object for a specific user, the third is for getting site_object for a specific superUser, the fourth is for getting site_object for a specific admin, and the fifth is for getting site_object for a specific site\n */\n\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/site_object.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/site_object/\", controller.getSiteObjects);\n  app.post(\"/api/site_object/by-id/\", controller.getSiteObjectById);\n  app.post(\"/api/site_object\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createSiteObject);\n  app.put(\"/api/site_object/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateSiteObject);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsImdldFNpdGVPYmplY3RzIiwicG9zdCIsImdldFNpdGVPYmplY3RCeUlkIiwidmVyaWZ5VG9rZW4iLCJpc0dsb2JhbEFkbWluIiwiY3JlYXRlU2l0ZU9iamVjdCIsInB1dCIsInVwZGF0ZVNpdGVPYmplY3QiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZV9idWlsZGVyL3JvdXRlcy8iLCJzb3VyY2VzIjpbInNpdGVfb2JqZWN0LnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgY29kZSBpcyB0aGUgcm91dGVzIGZvciB0aGUgc2l0ZV9vYmplY3QgY29udHJvbGxlci5cbiAqIFRoZSBmaXJzdCByb3V0ZSBpcyBmb3IgZ2V0dGluZyBhbGwgc2l0ZV9vYmplY3QsIHRoZSBzZWNvbmQgaXMgZm9yIGdldHRpbmcgc2l0ZV9vYmplY3QgZm9yIGEgc3BlY2lmaWMgdXNlciwgdGhlIHRoaXJkIGlzIGZvciBnZXR0aW5nIHNpdGVfb2JqZWN0IGZvciBhIHNwZWNpZmljIHN1cGVyVXNlciwgdGhlIGZvdXJ0aCBpcyBmb3IgZ2V0dGluZyBzaXRlX29iamVjdCBmb3IgYSBzcGVjaWZpYyBhZG1pbiwgYW5kIHRoZSBmaWZ0aCBpcyBmb3IgZ2V0dGluZyBzaXRlX29iamVjdCBmb3IgYSBzcGVjaWZpYyBzaXRlXG4gKi9cblxuY29uc3QgeyBhdXRoSnd0IH0gPSByZXF1aXJlKFwiLi4vLi4vLi4vbWlkZGxld2FyZXNcIik7XG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL3NpdGVfb2JqZWN0LmNvbnRyb2xsZXJcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcCkge1xuICAgIGFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIHJlcy5oZWFkZXIoXG4gICAgICAgICAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcbiAgICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxuICAgICAgICApO1xuICAgICAgICBuZXh0KCk7XG4gICAgfSk7XG5cblxuICAgIGFwcC5nZXQoXCIvYXBpL3NpdGVfb2JqZWN0L1wiLCBjb250cm9sbGVyLmdldFNpdGVPYmplY3RzKTtcbiAgICBhcHAucG9zdChcIi9hcGkvc2l0ZV9vYmplY3QvYnktaWQvXCIsIGNvbnRyb2xsZXIuZ2V0U2l0ZU9iamVjdEJ5SWQpO1xuICAgIGFwcC5wb3N0KFwiL2FwaS9zaXRlX29iamVjdFwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc0dsb2JhbEFkbWluXSwgY29udHJvbGxlci5jcmVhdGVTaXRlT2JqZWN0KTtcbiAgICBhcHAucHV0KFwiL2FwaS9zaXRlX29iamVjdC86aWRcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNHbG9iYWxBZG1pbl0sIGNvbnRyb2xsZXIudXBkYXRlU2l0ZU9iamVjdCk7XG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ25ELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLHVDQUF1QyxDQUFDO0FBRW5FRSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFVQyxHQUFHLEVBQUU7RUFDNUJBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFVBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDOUJELEdBQUcsQ0FBQ0UsTUFBTSxDQUNOLDhCQUE4QixFQUM5Qiw4Q0FDSixDQUFDO0lBQ0RELElBQUksQ0FBQyxDQUFDO0VBQ1YsQ0FBQyxDQUFDO0VBR0ZKLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLG1CQUFtQixFQUFFVCxVQUFVLENBQUNVLGNBQWMsQ0FBQztFQUN2RFAsR0FBRyxDQUFDUSxJQUFJLENBQUMseUJBQXlCLEVBQUVYLFVBQVUsQ0FBQ1ksaUJBQWlCLENBQUM7RUFDakVULEdBQUcsQ0FBQ1EsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUNiLE9BQU8sQ0FBQ2UsV0FBVyxFQUFFZixPQUFPLENBQUNnQixhQUFhLENBQUMsRUFBRWQsVUFBVSxDQUFDZSxnQkFBZ0IsQ0FBQztFQUN2R1osR0FBRyxDQUFDYSxHQUFHLENBQUMsc0JBQXNCLEVBQUUsQ0FBQ2xCLE9BQU8sQ0FBQ2UsV0FBVyxFQUFFZixPQUFPLENBQUNnQixhQUFhLENBQUMsRUFBRWQsVUFBVSxDQUFDaUIsZ0JBQWdCLENBQUM7QUFDOUcsQ0FBQyJ9","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","getSiteObjects","post","getSiteObjectById","verifyToken","isGlobalAdmin","createSiteObject","put","updateSiteObject"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/routes/","sources":["site_object.routes.js"],"sourcesContent":["/**\n * This code is the routes for the site_object controller.\n * The first route is for getting all site_object, the second is for getting site_object for a specific user, the third is for getting site_object for a specific superUser, the fourth is for getting site_object for a specific admin, and the fifth is for getting site_object for a specific site\n */\n\nconst { authJwt } = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/site_object.controller\");\n\nmodule.exports = function (app) {\n    app.use(function (req, res, next) {\n        res.header(\n            \"Access-Control-Allow-Headers\",\n            \"x-access-token, Origin, Content-Type, Accept\"\n        );\n        next();\n    });\n\n\n    app.get(\"/api/site_object/\", controller.getSiteObjects);\n    app.post(\"/api/site_object/by-id/\", controller.getSiteObjectById);\n    app.post(\"/api/site_object\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createSiteObject);\n    app.put(\"/api/site_object/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateSiteObject);\n};"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,uCAAuC,CAAC;AAEnEE,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EAC5BA,GAAG,CAACC,GAAG,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9BD,GAAG,CAACE,MAAM,CACN,8BAA8B,EAC9B,8CACJ,CAAC;IACDD,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;EAGFJ,GAAG,CAACM,GAAG,CAAC,mBAAmB,EAAET,UAAU,CAACU,cAAc,CAAC;EACvDP,GAAG,CAACQ,IAAI,CAAC,yBAAyB,EAAEX,UAAU,CAACY,iBAAiB,CAAC;EACjET,GAAG,CAACQ,IAAI,CAAC,kBAAkB,EAAE,CAACb,OAAO,CAACe,WAAW,EAAEf,OAAO,CAACgB,aAAa,CAAC,EAAEd,UAAU,CAACe,gBAAgB,CAAC;EACvGZ,GAAG,CAACa,GAAG,CAAC,sBAAsB,EAAE,CAAClB,OAAO,CAACe,WAAW,EAAEf,OAAO,CAACgB,aAAa,CAAC,EAAEd,UAAU,CAACiB,gBAAgB,CAAC;AAC9G,CAAC"}},"mtime":1697752512347},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/controllers/site_object.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code contains the CRUD operations for site_object.\n */\n\nconst db = require(\"../../../models\");\nconst SiteObject = db.site_object;\nexports.createSiteObject = (req, res) => {\n  const new_site_object = new SiteObject({\n    ...req.body\n  });\n  console.log(new_site_object);\n  new_site_object.save((err, site_object) => {\n    console.log(site_object);\n    console.log(err);\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    res.status(200).send(site_object);\n  });\n};\nexports.getSiteObjects = (req, res) => {\n  SiteObject.find().exec((err, site_objects) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_objects) {\n      return res.status(404).send({\n        message: \"SiteObject Not found.\"\n      });\n    }\n    res.status(200).send(site_objects);\n  });\n};\nexports.getSiteObjectById = (req, res) => {\n  SiteObject.findOne({\n    _id: req.body.site_object_id\n  }).exec((err, site_object) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_object) {\n      return res.status(404).send({\n        message: \"SiteObject Not found.\"\n      });\n    }\n    site_object.id = site_object._id;\n    res.status(200).send(site_object);\n  });\n};\nexports.updateSiteObject = (req, res) => {\n  const site_object_updates = {\n    ...req.body\n  };\n  SiteObject.findOneAndUpdate({\n    _id: req.params.id\n  }, site_object_updates, {\n    new: true\n  }).exec((err, site_object) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!site_object) {\n      return res.status(404).send({\n        message: \"SiteObject Not found.\"\n      });\n    }\n    res.status(200).send(site_object);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJTaXRlT2JqZWN0Iiwic2l0ZV9vYmplY3QiLCJleHBvcnRzIiwiY3JlYXRlU2l0ZU9iamVjdCIsInJlcSIsInJlcyIsIm5ld19zaXRlX29iamVjdCIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwic2F2ZSIsImVyciIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwiZ2V0U2l0ZU9iamVjdHMiLCJmaW5kIiwiZXhlYyIsInNpdGVfb2JqZWN0cyIsImdldFNpdGVPYmplY3RCeUlkIiwiZmluZE9uZSIsIl9pZCIsInNpdGVfb2JqZWN0X2lkIiwiaWQiLCJ1cGRhdGVTaXRlT2JqZWN0Iiwic2l0ZV9vYmplY3RfdXBkYXRlcyIsImZpbmRPbmVBbmRVcGRhdGUiLCJwYXJhbXMiLCJuZXciXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZV9idWlsZGVyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsic2l0ZV9vYmplY3QuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgY29kZSBjb250YWlucyB0aGUgQ1JVRCBvcGVyYXRpb25zIGZvciBzaXRlX29iamVjdC5cbiAqL1xuICBcbiAgY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzXCIpO1xuICBjb25zdCBTaXRlT2JqZWN0ID0gZGIuc2l0ZV9vYmplY3Q7XG4gIFxuICBleHBvcnRzLmNyZWF0ZVNpdGVPYmplY3QgPSAocmVxLCByZXMpID0+IHtcbiAgICAgIGNvbnN0IG5ld19zaXRlX29iamVjdCA9IG5ldyBTaXRlT2JqZWN0KHtcbiAgICAgICAgICAuLi5yZXEuYm9keVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKG5ld19zaXRlX29iamVjdCk7XG4gICAgICBuZXdfc2l0ZV9vYmplY3Quc2F2ZSgoZXJyLCBzaXRlX29iamVjdCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhzaXRlX29iamVjdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChzaXRlX29iamVjdCk7XG4gICAgICB9KTtcbiAgfTtcbiAgXG4gIGV4cG9ydHMuZ2V0U2l0ZU9iamVjdHMgPSAocmVxLCByZXMpID0+IHtcbiAgICAgIFNpdGVPYmplY3QuZmluZCgpXG4gICAgICAuZXhlYygoZXJyLCBzaXRlX29iamVjdHMpID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICBpZiAoIXNpdGVfb2JqZWN0cykge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlNpdGVPYmplY3QgTm90IGZvdW5kLlwiIH0pO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoc2l0ZV9vYmplY3RzKTtcbiAgICAgIH0pO1xuICB9O1xuICBcbiAgZXhwb3J0cy5nZXRTaXRlT2JqZWN0QnlJZCA9IChyZXEsIHJlcykgPT4ge1xuICAgICAgU2l0ZU9iamVjdC5maW5kT25lKHtfaWQ6IHJlcS5ib2R5LnNpdGVfb2JqZWN0X2lkfSlcbiAgICAgIC5leGVjKChlcnIsIHNpdGVfb2JqZWN0KSA9PiB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgaWYgKCFzaXRlX29iamVjdCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlNpdGVPYmplY3QgTm90IGZvdW5kLlwiIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaXRlX29iamVjdC5pZCA9IHNpdGVfb2JqZWN0Ll9pZDtcbiAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChzaXRlX29iamVjdCk7XG4gICAgICB9KTtcbiAgfTtcbiAgXG4gIGV4cG9ydHMudXBkYXRlU2l0ZU9iamVjdCA9IChyZXEsIHJlcykgPT4ge1xuICAgICAgY29uc3Qgc2l0ZV9vYmplY3RfdXBkYXRlcyA9IHtcbiAgICAgICAgICAuLi5yZXEuYm9keVxuICAgICAgfTtcbiAgXG4gICAgICBTaXRlT2JqZWN0LmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgc2l0ZV9vYmplY3RfdXBkYXRlcywgeyBuZXc6IHRydWUgfSlcbiAgICAgICAgICAuZXhlYygoZXJyLCBzaXRlX29iamVjdCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICBcbiAgICAgICAgICAgICAgaWYgKCFzaXRlX29iamVjdCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTaXRlT2JqZWN0IE5vdCBmb3VuZC5cIiB9KTtcbiAgICAgICAgICAgICAgfVxuICBcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoc2l0ZV9vYmplY3QpO1xuICAgICAgICAgIH0pO1xuICB9OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFD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","map":{"version":3,"names":["db","require","SiteObject","site_object","exports","createSiteObject","req","res","new_site_object","body","console","log","save","err","status","send","message","getSiteObjects","find","exec","site_objects","getSiteObjectById","findOne","_id","site_object_id","id","updateSiteObject","site_object_updates","findOneAndUpdate","params","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/controllers/","sources":["site_object.controller.js"],"sourcesContent":["/**\n * This code contains the CRUD operations for site_object.\n */\n  \n  const db = require(\"../../../models\");\n  const SiteObject = db.site_object;\n  \n  exports.createSiteObject = (req, res) => {\n      const new_site_object = new SiteObject({\n          ...req.body\n      });\n      \n      console.log(new_site_object);\n      new_site_object.save((err, site_object) => {\n        console.log(site_object);\n        console.log(err);\n          if (err) {\n              res.status(500).send({ message: err });\n              return;\n          }\n          res.status(200).send(site_object);\n      });\n  };\n  \n  exports.getSiteObjects = (req, res) => {\n      SiteObject.find()\n      .exec((err, site_objects) => {\n          if (err) {\n              res.status(500).send({ message: err });\n              return;\n          }\n  \n          if (!site_objects) {\n              return res.status(404).send({ message: \"SiteObject Not found.\" });\n          }\n  \n          res.status(200).send(site_objects);\n      });\n  };\n  \n  exports.getSiteObjectById = (req, res) => {\n      SiteObject.findOne({_id: req.body.site_object_id})\n      .exec((err, site_object) => {\n          if (err) {\n              res.status(500).send({ message: err });\n              return;\n          }\n  \n          if (!site_object) {\n              return res.status(404).send({ message: \"SiteObject Not found.\" });\n          }\n          site_object.id = site_object._id;\n          res.status(200).send(site_object);\n      });\n  };\n  \n  exports.updateSiteObject = (req, res) => {\n      const site_object_updates = {\n          ...req.body\n      };\n  \n      SiteObject.findOneAndUpdate({ _id: req.params.id }, site_object_updates, { new: true })\n          .exec((err, site_object) => {\n              if (err) {\n                  res.status(500).send({ message: err });\n                  return;\n              }\n  \n              if (!site_object) {\n                  return res.status(404).send({ message: \"SiteObject Not found.\" });\n              }\n  \n              res.status(200).send(site_object);\n          });\n  };"],"mappings":"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"}},"mtime":1698251777513},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/content.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the routes for the content controller.\r\n * The first route is for getting all content, the second is for getting content for a specific user, the third is for getting content for a specific superUser, the fourth is for getting content for a specific admin, and the fifth is for getting content for a specific site\r\n */\n\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/content.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/content/all\", controller.allAccess);\n  app.get(\"/api/content/user\", [authJwt.verifyToken], controller.userBoard);\n  app.get(\"/api/content/superUser\", [authJwt.verifyToken, authJwt.isSuperUser], controller.superUserBoard);\n  app.get(\"/api/content/admin\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.adminBoard);\n  app.get(\"/api/content/global_admin\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.globalAdminBoard);\n  app.get(\"/api/content/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getContent);\n  app.post(\"/api/content/by-site/\", controller.getContentBySite);\n  app.post(\"/api/content\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createContent);\n  app.put(\"/api/content/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateContent);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsImFsbEFjY2VzcyIsInZlcmlmeVRva2VuIiwidXNlckJvYXJkIiwiaXNTdXBlclVzZXIiLCJzdXBlclVzZXJCb2FyZCIsImlzU2l0ZUFkbWluIiwiYWRtaW5Cb2FyZCIsImlzR2xvYmFsQWRtaW4iLCJnbG9iYWxBZG1pbkJvYXJkIiwiZ2V0Q29udGVudCIsInBvc3QiLCJnZXRDb250ZW50QnlTaXRlIiwiY3JlYXRlQ29udGVudCIsInB1dCIsInVwZGF0ZUNvbnRlbnQiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZS9yb3V0ZXMvIiwic291cmNlcyI6WyJjb250ZW50LnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhpcyBjb2RlIGlzIHRoZSByb3V0ZXMgZm9yIHRoZSBjb250ZW50IGNvbnRyb2xsZXIuXHJcbiAqIFRoZSBmaXJzdCByb3V0ZSBpcyBmb3IgZ2V0dGluZyBhbGwgY29udGVudCwgdGhlIHNlY29uZCBpcyBmb3IgZ2V0dGluZyBjb250ZW50IGZvciBhIHNwZWNpZmljIHVzZXIsIHRoZSB0aGlyZCBpcyBmb3IgZ2V0dGluZyBjb250ZW50IGZvciBhIHNwZWNpZmljIHN1cGVyVXNlciwgdGhlIGZvdXJ0aCBpcyBmb3IgZ2V0dGluZyBjb250ZW50IGZvciBhIHNwZWNpZmljIGFkbWluLCBhbmQgdGhlIGZpZnRoIGlzIGZvciBnZXR0aW5nIGNvbnRlbnQgZm9yIGEgc3BlY2lmaWMgc2l0ZVxyXG4gKi9cclxuXHJcbmNvbnN0IHsgYXV0aEp3dCB9ID0gcmVxdWlyZShcIi4uLy4uLy4uL21pZGRsZXdhcmVzXCIpO1xyXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL2NvbnRlbnQuY29udHJvbGxlclwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcCkge1xyXG4gICAgYXBwLnVzZShmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcclxuICAgICAgICByZXMuaGVhZGVyKFxyXG4gICAgICAgICAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcclxuICAgICAgICAgICAgXCJ4LWFjY2Vzcy10b2tlbiwgT3JpZ2luLCBDb250ZW50LVR5cGUsIEFjY2VwdFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBuZXh0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhcHAuZ2V0KFwiL2FwaS9jb250ZW50L2FsbFwiLCBjb250cm9sbGVyLmFsbEFjY2Vzcyk7XHJcblxyXG4gICAgYXBwLmdldChcIi9hcGkvY29udGVudC91c2VyXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuXSwgY29udHJvbGxlci51c2VyQm9hcmQpO1xyXG5cclxuICAgIGFwcC5nZXQoXHJcbiAgICAgICAgXCIvYXBpL2NvbnRlbnQvc3VwZXJVc2VyXCIsXHJcbiAgICAgICAgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTdXBlclVzZXJdLFxyXG4gICAgICAgIGNvbnRyb2xsZXIuc3VwZXJVc2VyQm9hcmRcclxuICAgICk7XHJcblxyXG4gICAgYXBwLmdldChcclxuICAgICAgICBcIi9hcGkvY29udGVudC9hZG1pblwiLFxyXG4gICAgICAgIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU2l0ZUFkbWluXSxcclxuICAgICAgICBjb250cm9sbGVyLmFkbWluQm9hcmRcclxuICAgICk7XHJcblxyXG4gICAgYXBwLmdldChcclxuICAgICAgICBcIi9hcGkvY29udGVudC9nbG9iYWxfYWRtaW5cIixcclxuICAgICAgICBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc0dsb2JhbEFkbWluXSxcclxuICAgICAgICBjb250cm9sbGVyLmdsb2JhbEFkbWluQm9hcmRcclxuICAgICk7XHJcblxyXG5cclxuICAgIGFwcC5nZXQoXCIvYXBpL2NvbnRlbnQvXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU3VwZXJVc2VyXSwgY29udHJvbGxlci5nZXRDb250ZW50KTtcclxuICAgIGFwcC5wb3N0KFwiL2FwaS9jb250ZW50L2J5LXNpdGUvXCIsIGNvbnRyb2xsZXIuZ2V0Q29udGVudEJ5U2l0ZSk7XHJcbiAgICBhcHAucG9zdChcIi9hcGkvY29udGVudFwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc0dsb2JhbEFkbWluXSwgY29udHJvbGxlci5jcmVhdGVDb250ZW50KTtcclxuICAgIGFwcC5wdXQoXCIvYXBpL2NvbnRlbnQvOmlkXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzR2xvYmFsQWRtaW5dLCBjb250cm9sbGVyLnVwZGF0ZUNvbnRlbnQpO1xyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ25ELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBRS9ERSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFVQyxHQUFHLEVBQUU7RUFDNUJBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFVBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDOUJELEdBQUcsQ0FBQ0UsTUFBTSxDQUNOLDhCQUE4QixFQUM5Qiw4Q0FDSixDQUFDO0lBQ0RELElBQUksQ0FBQyxDQUFDO0VBQ1YsQ0FBQyxDQUFDO0VBRUZKLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLGtCQUFrQixFQUFFVCxVQUFVLENBQUNVLFNBQVMsQ0FBQztFQUVqRFAsR0FBRyxDQUFDTSxHQUFHLENBQUMsbUJBQW1CLEVBQUUsQ0FBQ1gsT0FBTyxDQUFDYSxXQUFXLENBQUMsRUFBRVgsVUFBVSxDQUFDWSxTQUFTLENBQUM7RUFFekVULEdBQUcsQ0FBQ00sR0FBRyxDQUNILHdCQUF3QixFQUN4QixDQUFDWCxPQUFPLENBQUNhLFdBQVcsRUFBRWIsT0FBTyxDQUFDZSxXQUFXLENBQUMsRUFDMUNiLFVBQVUsQ0FBQ2MsY0FDZixDQUFDO0VBRURYLEdBQUcsQ0FBQ00sR0FBRyxDQUNILG9CQUFvQixFQUNwQixDQUFDWCxPQUFPLENBQUNhLFdBQVcsRUFBRWIsT0FBTyxDQUFDaUIsV0FBVyxDQUFDLEVBQzFDZixVQUFVLENBQUNnQixVQUNmLENBQUM7RUFFRGIsR0FBRyxDQUFDTSxHQUFHLENBQ0gsMkJBQTJCLEVBQzNCLENBQUNYLE9BQU8sQ0FBQ2EsV0FBVyxFQUFFYixPQUFPLENBQUNtQixhQUFhLENBQUMsRUFDNUNqQixVQUFVLENBQUNrQixnQkFDZixDQUFDO0VBR0RmLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLGVBQWUsRUFBRSxDQUFDWCxPQUFPLENBQUNhLFdBQVcsRUFBRWIsT0FBTyxDQUFDZSxXQUFXLENBQUMsRUFBRWIsVUFBVSxDQUFDbUIsVUFBVSxDQUFDO0VBQzNGaEIsR0FBRyxDQUFDaUIsSUFBSSxDQUFDLHVCQUF1QixFQUFFcEIsVUFBVSxDQUFDcUIsZ0JBQWdCLENBQUM7RUFDOURsQixHQUFHLENBQUNpQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUN0QixPQUFPLENBQUNhLFdBQVcsRUFBRWIsT0FBTyxDQUFDbUIsYUFBYSxDQUFDLEVBQUVqQixVQUFVLENBQUNzQixhQUFhLENBQUM7RUFDaEduQixHQUFHLENBQUNvQixHQUFHLENBQUMsa0JBQWtCLEVBQUUsQ0FBQ3pCLE9BQU8sQ0FBQ2EsV0FBVyxFQUFFYixPQUFPLENBQUNtQixhQUFhLENBQUMsRUFBRWpCLFVBQVUsQ0FBQ3dCLGFBQWEsQ0FBQztBQUN2RyxDQUFDIn0=","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","allAccess","verifyToken","userBoard","isSuperUser","superUserBoard","isSiteAdmin","adminBoard","isGlobalAdmin","globalAdminBoard","getContent","post","getContentBySite","createContent","put","updateContent"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/routes/","sources":["content.routes.js"],"sourcesContent":["/**\r\n * This code is the routes for the content controller.\r\n * The first route is for getting all content, the second is for getting content for a specific user, the third is for getting content for a specific superUser, the fourth is for getting content for a specific admin, and the fifth is for getting content for a specific site\r\n */\r\n\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/content.controller\");\r\n\r\nmodule.exports = function (app) {\r\n    app.use(function (req, res, next) {\r\n        res.header(\r\n            \"Access-Control-Allow-Headers\",\r\n            \"x-access-token, Origin, Content-Type, Accept\"\r\n        );\r\n        next();\r\n    });\r\n\r\n    app.get(\"/api/content/all\", controller.allAccess);\r\n\r\n    app.get(\"/api/content/user\", [authJwt.verifyToken], controller.userBoard);\r\n\r\n    app.get(\r\n        \"/api/content/superUser\",\r\n        [authJwt.verifyToken, authJwt.isSuperUser],\r\n        controller.superUserBoard\r\n    );\r\n\r\n    app.get(\r\n        \"/api/content/admin\",\r\n        [authJwt.verifyToken, authJwt.isSiteAdmin],\r\n        controller.adminBoard\r\n    );\r\n\r\n    app.get(\r\n        \"/api/content/global_admin\",\r\n        [authJwt.verifyToken, authJwt.isGlobalAdmin],\r\n        controller.globalAdminBoard\r\n    );\r\n\r\n\r\n    app.get(\"/api/content/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getContent);\r\n    app.post(\"/api/content/by-site/\", controller.getContentBySite);\r\n    app.post(\"/api/content\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createContent);\r\n    app.put(\"/api/content/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateContent);\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,mCAAmC,CAAC;AAE/DE,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EAC5BA,GAAG,CAACC,GAAG,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9BD,GAAG,CAACE,MAAM,CACN,8BAA8B,EAC9B,8CACJ,CAAC;IACDD,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,kBAAkB,EAAET,UAAU,CAACU,SAAS,CAAC;EAEjDP,GAAG,CAACM,GAAG,CAAC,mBAAmB,EAAE,CAACX,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,SAAS,CAAC;EAEzET,GAAG,CAACM,GAAG,CACH,wBAAwB,EACxB,CAACX,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACe,WAAW,CAAC,EAC1Cb,UAAU,CAACc,cACf,CAAC;EAEDX,GAAG,CAACM,GAAG,CACH,oBAAoB,EACpB,CAACX,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACiB,WAAW,CAAC,EAC1Cf,UAAU,CAACgB,UACf,CAAC;EAEDb,GAAG,CAACM,GAAG,CACH,2BAA2B,EAC3B,CAACX,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACmB,aAAa,CAAC,EAC5CjB,UAAU,CAACkB,gBACf,CAAC;EAGDf,GAAG,CAACM,GAAG,CAAC,eAAe,EAAE,CAACX,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACe,WAAW,CAAC,EAAEb,UAAU,CAACmB,UAAU,CAAC;EAC3FhB,GAAG,CAACiB,IAAI,CAAC,uBAAuB,EAAEpB,UAAU,CAACqB,gBAAgB,CAAC;EAC9DlB,GAAG,CAACiB,IAAI,CAAC,cAAc,EAAE,CAACtB,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACmB,aAAa,CAAC,EAAEjB,UAAU,CAACsB,aAAa,CAAC;EAChGnB,GAAG,CAACoB,GAAG,CAAC,kBAAkB,EAAE,CAACzB,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACmB,aAAa,CAAC,EAAEjB,UAAU,CAACwB,aAAa,CAAC;AACvG,CAAC"}},"mtime":1697752512335},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/content.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code contains the CRUD operations for content.\n */\nexports.allAccess = (req, res) => {\n  res.status(200).send(\"Welcome to the Altus SuperUsership Program. This will be where our teacher and product catalogue will go.\");\n};\nexports.userBoard = (req, res) => {\n  res.status(200).send(\"Student Dashboard! USECASE: products that the user is enrolled in\");\n};\nexports.adminBoard = (req, res) => {\n  res.status(200).send(\"Content Admin Dashboard! USECASE: products and users that are connected to the site\");\n};\nexports.superUserBoard = (req, res) => {\n  res.status(200).send(\"SuperUser dashboard! USECASE: products, and users enrolled in those products, connected to the superUser\");\n};\nexports.globalAdminBoard = (req, res) => {\n  res.status(200).send(\"Global Admin Dashboard! USECASE: all products and users\");\n};\nconst db = require(\"../../../models\");\nconst Content = db.content;\nexports.createContent = (req, res) => {\n  const content = new Content({\n    ...req.body\n  });\n  content.save((err, content) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n  });\n};\nexports.getContent = (req, res) => {\n  Content.find().exec((err, content) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!content) {\n      return res.status(404).send({\n        message: \"Content Not found.\"\n      });\n    }\n    res.status(200).send(contents);\n  });\n};\nexports.getContentBySite = (req, res) => {\n  Content.findOne({\n    site_id: req.body.site\n  }).exec((err, content) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!content) {\n      return res.status(404).send({\n        message: \"Content Not found.\"\n      });\n    }\n    res.status(200).send(content);\n  });\n};\nexports.updateContent = (req, res) => {\n  const content_updates = {\n    ...req.body\n  };\n  Content.findOneAndUpdate({\n    _id: req.params.id\n  }, content_updates, {\n    new: true\n  }).exec((err, content) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!content) {\n      return res.status(404).send({\n        message: \"Content Not found.\"\n      });\n    }\n    res.status(200).send(content);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiYWxsQWNjZXNzIiwicmVxIiwicmVzIiwic3RhdHVzIiwic2VuZCIsInVzZXJCb2FyZCIsImFkbWluQm9hcmQiLCJzdXBlclVzZXJCb2FyZCIsImdsb2JhbEFkbWluQm9hcmQiLCJkYiIsInJlcXVpcmUiLCJDb250ZW50IiwiY29udGVudCIsImNyZWF0ZUNvbnRlbnQiLCJib2R5Iiwic2F2ZSIsImVyciIsIm1lc3NhZ2UiLCJnZXRDb250ZW50IiwiZmluZCIsImV4ZWMiLCJjb250ZW50cyIsImdldENvbnRlbnRCeVNpdGUiLCJmaW5kT25lIiwic2l0ZV9pZCIsInNpdGUiLCJ1cGRhdGVDb250ZW50IiwiY29udGVudF91cGRhdGVzIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsInBhcmFtcyIsImlkIiwibmV3Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NpdGUvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJjb250ZW50LmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGlzIGNvZGUgY29udGFpbnMgdGhlIENSVUQgb3BlcmF0aW9ucyBmb3IgY29udGVudC5cbiAqL1xuZXhwb3J0cy5hbGxBY2Nlc3MgPSAocmVxLCByZXMpID0+IHtcbiAgcmVzLnN0YXR1cygyMDApLnNlbmQoXCJXZWxjb21lIHRvIHRoZSBBbHR1cyBTdXBlclVzZXJzaGlwIFByb2dyYW0uIFRoaXMgd2lsbCBiZSB3aGVyZSBvdXIgdGVhY2hlciBhbmQgcHJvZHVjdCBjYXRhbG9ndWUgd2lsbCBnby5cIik7XG59O1xuXG5leHBvcnRzLnVzZXJCb2FyZCA9IChyZXEsIHJlcykgPT4ge1xuICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIlN0dWRlbnQgRGFzaGJvYXJkISBVU0VDQVNFOiBwcm9kdWN0cyB0aGF0IHRoZSB1c2VyIGlzIGVucm9sbGVkIGluXCIpO1xufTtcblxuZXhwb3J0cy5hZG1pbkJvYXJkID0gKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiQ29udGVudCBBZG1pbiBEYXNoYm9hcmQhIFVTRUNBU0U6IHByb2R1Y3RzIGFuZCB1c2VycyB0aGF0IGFyZSBjb25uZWN0ZWQgdG8gdGhlIHNpdGVcIik7XG59O1xuXG5leHBvcnRzLnN1cGVyVXNlckJvYXJkID0gKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zdGF0dXMoMjAwKS5zZW5kKFwiU3VwZXJVc2VyIGRhc2hib2FyZCEgVVNFQ0FTRTogcHJvZHVjdHMsIGFuZCB1c2VycyBlbnJvbGxlZCBpbiB0aG9zZSBwcm9kdWN0cywgY29ubmVjdGVkIHRvIHRoZSBzdXBlclVzZXJcIik7XG59O1xuXG5leHBvcnRzLmdsb2JhbEFkbWluQm9hcmQgPSAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChcIkdsb2JhbCBBZG1pbiBEYXNoYm9hcmQhIFVTRUNBU0U6IGFsbCBwcm9kdWN0cyBhbmQgdXNlcnNcIik7XG59O1xuXG5cblxuY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzXCIpO1xuY29uc3QgQ29udGVudCA9IGRiLmNvbnRlbnQ7XG5cbmV4cG9ydHMuY3JlYXRlQ29udGVudCA9IChyZXEsIHJlcykgPT4ge1xuXHRjb25zdCBjb250ZW50ID0gbmV3IENvbnRlbnQoe1xuICAgICAgICAuLi5yZXEuYm9keVxuXHR9KTtcblxuXHRjb250ZW50LnNhdmUoKGVyciwgY29udGVudCkgPT4ge1xuXHRcdGlmIChlcnIpIHtcblx0XHRcdHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fSk7XG59O1xuXG5leHBvcnRzLmdldENvbnRlbnQgPSAocmVxLCByZXMpID0+IHtcbiAgICBDb250ZW50LmZpbmQoKVxuICAgIC5leGVjKChlcnIsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiQ29udGVudCBOb3QgZm91bmQuXCIgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChjb250ZW50cyk7XG4gICAgfSk7XG59O1xuXG5leHBvcnRzLmdldENvbnRlbnRCeVNpdGUgPSAocmVxLCByZXMpID0+IHtcbiAgICBDb250ZW50LmZpbmRPbmUoe3NpdGVfaWQ6IHJlcS5ib2R5LnNpdGV9KVxuICAgIC5leGVjKChlcnIsIGNvbnRlbnQpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiQ29udGVudCBOb3QgZm91bmQuXCIgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChjb250ZW50KTtcbiAgICB9KTtcbn07XG5cbmV4cG9ydHMudXBkYXRlQ29udGVudCA9IChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IGNvbnRlbnRfdXBkYXRlcyA9IHtcbiAgICAgICAgLi4ucmVxLmJvZHlcbiAgICB9O1xuXG4gICAgQ29udGVudC5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIGNvbnRlbnRfdXBkYXRlcywgeyBuZXc6IHRydWUgfSlcbiAgICAgICAgLmV4ZWMoKGVyciwgY29udGVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJDb250ZW50IE5vdCBmb3VuZC5cIiB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoY29udGVudCk7XG4gICAgICAgIH0pO1xufTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBQSxPQUFPLENBQUNDLFNBQVMsR0FBRyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNoQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQywyR0FBMkcsQ0FBQztBQUNuSSxDQUFDO0FBRURMLE9BQU8sQ0FBQ00sU0FBUyxHQUFHLENBQUNKLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2hDQSxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLG1FQUFtRSxDQUFDO0FBQzNGLENBQUM7QUFFREwsT0FBTyxDQUFDTyxVQUFVLEdBQUcsQ0FBQ0wsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDakNBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMscUZBQXFGLENBQUM7QUFDN0csQ0FBQztBQUVETCxPQUFPLENBQUNRLGNBQWMsR0FBRyxDQUFDTixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNyQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQywwR0FBMEcsQ0FBQztBQUNsSSxDQUFDO0FBRURMLE9BQU8sQ0FBQ1MsZ0JBQWdCLEdBQUcsQ0FBQ1AsR0FB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","map":{"version":3,"names":["exports","allAccess","req","res","status","send","userBoard","adminBoard","superUserBoard","globalAdminBoard","db","require","Content","content","createContent","body","save","err","message","getContent","find","exec","contents","getContentBySite","findOne","site_id","site","updateContent","content_updates","findOneAndUpdate","_id","params","id","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site/controllers/","sources":["content.controller.js"],"sourcesContent":["/**\n * This code contains the CRUD operations for content.\n */\nexports.allAccess = (req, res) => {\n  res.status(200).send(\"Welcome to the Altus SuperUsership Program. This will be where our teacher and product catalogue will go.\");\n};\n\nexports.userBoard = (req, res) => {\n  res.status(200).send(\"Student Dashboard! USECASE: products that the user is enrolled in\");\n};\n\nexports.adminBoard = (req, res) => {\n  res.status(200).send(\"Content Admin Dashboard! USECASE: products and users that are connected to the site\");\n};\n\nexports.superUserBoard = (req, res) => {\n  res.status(200).send(\"SuperUser dashboard! USECASE: products, and users enrolled in those products, connected to the superUser\");\n};\n\nexports.globalAdminBoard = (req, res) => {\n    res.status(200).send(\"Global Admin Dashboard! USECASE: all products and users\");\n};\n\n\n\nconst db = require(\"../../../models\");\nconst Content = db.content;\n\nexports.createContent = (req, res) => {\n\tconst content = new Content({\n        ...req.body\n\t});\n\n\tcontent.save((err, content) => {\n\t\tif (err) {\n\t\t\tres.status(500).send({ message: err });\n\t\t\treturn;\n\t\t}\n\t});\n};\n\nexports.getContent = (req, res) => {\n    Content.find()\n    .exec((err, content) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n\n        if (!content) {\n            return res.status(404).send({ message: \"Content Not found.\" });\n        }\n\n        res.status(200).send(contents);\n    });\n};\n\nexports.getContentBySite = (req, res) => {\n    Content.findOne({site_id: req.body.site})\n    .exec((err, content) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n\n        if (!content) {\n            return res.status(404).send({ message: \"Content Not found.\" });\n        }\n\n        res.status(200).send(content);\n    });\n};\n\nexports.updateContent = (req, res) => {\n    const content_updates = {\n        ...req.body\n    };\n\n    Content.findOneAndUpdate({ _id: req.params.id }, content_updates, { new: true })\n        .exec((err, content) => {\n            if (err) {\n                res.status(500).send({ message: err });\n                return;\n            }\n\n            if (!content) {\n                return res.status(404).send({ message: \"Content Not found.\" });\n            }\n\n            res.status(200).send(content);\n        });\n};"],"mappings":"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"}},"mtime":1701964582874},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/routes/file.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code is the routes for the file controller.\n * The first route is for getting all file, the second is for getting file for a specific user, the third is for getting file for a specific superUser, the fourth is for getting file for a specific admin, and the fifth is for getting file for a specific media\n */\n\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/file.controller\");\nconst processFileMiddleware = require(\"../middlewares/upload\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/file/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getFiles);\n  app.get(\"/api/file/by-id/\", controller.getFileById);\n  app.post(\"/api/file\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createFile);\n  app.put(\"/api/file/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateFile);\n  app.get('/api/file/progress/:id', controller.getUploadProgress);\n  app.post('/api/file/upload', processFileMiddleware, controller.uploadFile);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJwcm9jZXNzRmlsZU1pZGRsZXdhcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTdXBlclVzZXIiLCJnZXRGaWxlcyIsImdldEZpbGVCeUlkIiwicG9zdCIsImlzR2xvYmFsQWRtaW4iLCJjcmVhdGVGaWxlIiwicHV0IiwidXBkYXRlRmlsZSIsImdldFVwbG9hZFByb2dyZXNzIiwidXBsb2FkRmlsZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zdG9yYWdlL3JvdXRlcy8iLCJzb3VyY2VzIjpbImZpbGUucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBjb2RlIGlzIHRoZSByb3V0ZXMgZm9yIHRoZSBmaWxlIGNvbnRyb2xsZXIuXG4gKiBUaGUgZmlyc3Qgcm91dGUgaXMgZm9yIGdldHRpbmcgYWxsIGZpbGUsIHRoZSBzZWNvbmQgaXMgZm9yIGdldHRpbmcgZmlsZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCB0aGUgdGhpcmQgaXMgZm9yIGdldHRpbmcgZmlsZSBmb3IgYSBzcGVjaWZpYyBzdXBlclVzZXIsIHRoZSBmb3VydGggaXMgZm9yIGdldHRpbmcgZmlsZSBmb3IgYSBzcGVjaWZpYyBhZG1pbiwgYW5kIHRoZSBmaWZ0aCBpcyBmb3IgZ2V0dGluZyBmaWxlIGZvciBhIHNwZWNpZmljIG1lZGlhXG4gKi9cblxuY29uc3QgeyBhdXRoSnd0IH0gPSByZXF1aXJlKFwiLi4vLi4vLi4vbWlkZGxld2FyZXNcIik7XG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL2ZpbGUuY29udHJvbGxlclwiKTtcbmNvbnN0IHByb2Nlc3NGaWxlTWlkZGxld2FyZSA9IHJlcXVpcmUoXCIuLi9taWRkbGV3YXJlcy91cGxvYWRcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcCkge1xuICAgIGFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIHJlcy5oZWFkZXIoXG4gICAgICAgICAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcbiAgICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxuICAgICAgICApO1xuICAgICAgICBuZXh0KCk7XG4gICAgfSk7XG4gICAgXG4gICAgYXBwLmdldChcIi9hcGkvZmlsZS9cIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTdXBlclVzZXJdLCBjb250cm9sbGVyLmdldEZpbGVzKTtcbiAgICBhcHAuZ2V0KFwiL2FwaS9maWxlL2J5LWlkL1wiLCBjb250cm9sbGVyLmdldEZpbGVCeUlkKTtcbiAgICBhcHAucG9zdChcIi9hcGkvZmlsZVwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc0dsb2JhbEFkbWluXSwgY29udHJvbGxlci5jcmVhdGVGaWxlKTtcbiAgICBhcHAucHV0KFwiL2FwaS9maWxlLzppZFwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc0dsb2JhbEFkbWluXSwgY29udHJvbGxlci51cGRhdGVGaWxlKTtcbiAgICBhcHAuZ2V0KCcvYXBpL2ZpbGUvcHJvZ3Jlc3MvOmlkJywgY29udHJvbGxlci5nZXRVcGxvYWRQcm9ncmVzcyk7XG4gICAgYXBwLnBvc3QoJy9hcGkvZmlsZS91cGxvYWQnLCBwcm9jZXNzRmlsZU1pZGRsZXdhcmUsIGNvbnRyb2xsZXIudXBsb2FkRmlsZSk7XG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ25ELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQzVELE1BQU1FLHFCQUFxQixHQUFHRixPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFFOURHLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQVVDLEdBQUcsRUFBRTtFQUM1QkEsR0FBRyxDQUFDQyxHQUFHLENBQUMsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtJQUM5QkQsR0FBRyxDQUFDRSxNQUFNLENBQ04sOEJBQThCLEVBQzlCLDhDQUNKLENBQUM7SUFDREQsSUFBSSxDQUFDLENBQUM7RUFDVixDQUFDLENBQUM7RUFFRkosR0FBRyxDQUFDTSxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUNaLE9BQU8sQ0FBQ2EsV0FBVyxFQUFFYixPQUFPLENBQUNjLFdBQVcsQ0FBQyxFQUFFWixVQUFVLENBQUNhLFFBQVEsQ0FBQztFQUN0RlQsR0FBRyxDQUFDTSxHQUFHLENBQUMsa0JBQWtCLEVBQUVWLFVBQVUsQ0FBQ2MsV0FBVyxDQUFDO0VBQ25EVixHQUFHLENBQUNXLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQ2pCLE9BQU8sQ0FBQ2EsV0FBVyxFQUFFYixPQUFPLENBQUNrQixhQUFhLENBQUMsRUFBRWhCLFVBQVUsQ0FBQ2lCLFVBQVUsQ0FBQztFQUMxRmIsR0FBRyxDQUFDYyxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUNwQixPQUFPLENBQUNhLFdBQVcsRUFBRWIsT0FBTyxDQUFDa0IsYUFBYSxDQUFDLEVBQUVoQixVQUFVLENBQUNtQixVQUFVLENBQUM7RUFDN0ZmLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLHdCQUF3QixFQUFFVixVQUFVLENBQUNvQixpQkFBaUIsQ0FBQztFQUMvRGhCLEdBQUcsQ0FBQ1csSUFBSSxDQUFDLGtCQUFrQixFQUFFZCxxQkFBcUIsRUFBRUQsVUFBVSxDQUFDcUIsVUFBVSxDQUFDO0FBQzlFLENBQUMifQ==","map":{"version":3,"names":["authJwt","require","controller","processFileMiddleware","module","exports","app","use","req","res","next","header","get","verifyToken","isSuperUser","getFiles","getFileById","post","isGlobalAdmin","createFile","put","updateFile","getUploadProgress","uploadFile"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/routes/","sources":["file.routes.js"],"sourcesContent":["/**\n * This code is the routes for the file controller.\n * The first route is for getting all file, the second is for getting file for a specific user, the third is for getting file for a specific superUser, the fourth is for getting file for a specific admin, and the fifth is for getting file for a specific media\n */\n\nconst { authJwt } = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/file.controller\");\nconst processFileMiddleware = require(\"../middlewares/upload\");\n\nmodule.exports = function (app) {\n    app.use(function (req, res, next) {\n        res.header(\n            \"Access-Control-Allow-Headers\",\n            \"x-access-token, Origin, Content-Type, Accept\"\n        );\n        next();\n    });\n    \n    app.get(\"/api/file/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getFiles);\n    app.get(\"/api/file/by-id/\", controller.getFileById);\n    app.post(\"/api/file\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createFile);\n    app.put(\"/api/file/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateFile);\n    app.get('/api/file/progress/:id', controller.getUploadProgress);\n    app.post('/api/file/upload', processFileMiddleware, controller.uploadFile);\n};"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAC5D,MAAME,qBAAqB,GAAGF,OAAO,CAAC,uBAAuB,CAAC;AAE9DG,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EAC5BA,GAAG,CAACC,GAAG,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9BD,GAAG,CAACE,MAAM,CACN,8BAA8B,EAC9B,8CACJ,CAAC;IACDD,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,YAAY,EAAE,CAACZ,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACc,WAAW,CAAC,EAAEZ,UAAU,CAACa,QAAQ,CAAC;EACtFT,GAAG,CAACM,GAAG,CAAC,kBAAkB,EAAEV,UAAU,CAACc,WAAW,CAAC;EACnDV,GAAG,CAACW,IAAI,CAAC,WAAW,EAAE,CAACjB,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACkB,aAAa,CAAC,EAAEhB,UAAU,CAACiB,UAAU,CAAC;EAC1Fb,GAAG,CAACc,GAAG,CAAC,eAAe,EAAE,CAACpB,OAAO,CAACa,WAAW,EAAEb,OAAO,CAACkB,aAAa,CAAC,EAAEhB,UAAU,CAACmB,UAAU,CAAC;EAC7Ff,GAAG,CAACM,GAAG,CAAC,wBAAwB,EAAEV,UAAU,CAACoB,iBAAiB,CAAC;EAC/DhB,GAAG,CAACW,IAAI,CAAC,kBAAkB,EAAEd,qBAAqB,EAAED,UAAU,CAACqB,UAAU,CAAC;AAC9E,CAAC"}},"mtime":1698876938070},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/controllers/file.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code contains the CRUD operations for file.\n */\n\nconst db = require(\"../../../models\");\nconst File = db.file;\nconst processFileMiddleware = require(\"../middlewares/upload\");\nconst {\n  format\n} = require(\"util\");\nconst {\n  Storage\n} = require(\"@google-cloud/storage\");\nconst {\n  Readable\n} = require('stream');\n\n// Instantiate a storage client with credentials\nconst storage = new Storage({\n  keyFilename: \"config/google-cloud-key.json\"\n});\nconst bucket = storage.bucket(\"poms-web-build-storage-bucket\");\nexports.createFile = (req, res) => {\n  const file = new File({\n    ...req.body\n  });\n  file.save((err, file) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n  });\n};\nexports.getFiles = (req, res) => {\n  File.find().exec((err, files) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!files) {\n      return res.status(404).send({\n        message: \"File Not found.\"\n      });\n    }\n    res.status(200).send(files);\n  });\n};\nexports.getFileById = (req, res) => {\n  File.findOne({\n    _id: req.body.file_id\n  }).exec((err, file) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!file) {\n      return res.status(404).send({\n        message: \"File Not found.\"\n      });\n    }\n    res.status(200).send(file);\n  });\n};\nexports.updateFile = (req, res) => {\n  const file_updates = {\n    ...req.body\n  };\n  File.findOneAndUpdate({\n    _id: req.params.id\n  }, file_updates, {\n    new: true\n  }).exec((err, file) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!file) {\n      return res.status(404).send({\n        message: \"File Not found.\"\n      });\n    }\n    res.status(200).send(file);\n  });\n};\nexports.getUploadProgress = (req, res) => {\n  const fileId = req.params.id;\n  console.log(fileId);\n  File.findById({\n    _id: fileId\n  }).exec((err, file) => {\n    if (err || !file) {\n      console.error('Error finding file:', err);\n      res.status(500).send('Error finding file');\n    } else {\n      console.log(file);\n      res.status(200).send(file);\n    }\n  });\n};\nexports.uploadFile = async (req, res) => {\n  const uploadedFile = req.file;\n  const folder_id = req.body.folder_id;\n  if (!uploadedFile) {\n    return res.status(400).send({\n      message: \"Please upload a file!\"\n    });\n  }\n  const {\n    originalname,\n    size,\n    mimetype\n  } = uploadedFile;\n  try {\n    const blob = bucket.file(originalname);\n    const blobStream = blob.createWriteStream();\n\n    // Readable stream to track upload progress\n    const fileBufferStream = new Readable();\n    fileBufferStream.push(uploadedFile.buffer);\n    fileBufferStream.push(null); // Signal the end of the stream\n\n    const file = new File({\n      name: originalname,\n      folder_id: folder_id,\n      size: size,\n      type: mimetype,\n      uploadProgress: 100\n    });\n    // Create and update the document in a single atomic operation\n    const savedFile = await file.save();\n\n    // Save the file immediately and return it to the client\n    res.status(200).json({\n      savedFile\n    });\n\n    // Pipe the file buffer to the blob stream\n    fileBufferStream.pipe(blobStream).on(\"error\", async err => {\n      console.error(\"Error uploading to Google Cloud Storage:\", err);\n      res.status(500).send({\n        message: \"Error uploading file\"\n      });\n\n      // Update the upload progress in the document with an error status\n      await File.findOneAndUpdate({\n        _id: savedFile._id\n      }, {\n        $set: {\n          uploadProgress: \"error\"\n        }\n      }, {\n        new: true\n      }).exec();\n    }).on(\"finish\", async () => {\n      console.log(\"Upload complete!\");\n\n      // Set the file as public\n      await blob.makePublic();\n\n      // Get public URL\n      const publicUrl = format(`https://storage.googleapis.com/${bucket.name}/${blob.name}`);\n\n      // Update file in the database with the public URL\n      const updatedFile = await File.findOneAndUpdate({\n        _id: savedFile._id\n      }, {\n        $set: {\n          source: publicUrl,\n          type: mimetype,\n          folder_id: folder_id,\n          uploadProgress: 100\n        }\n      }, {\n        new: true\n      }).exec();\n      console.log('Final file updated:', updatedFile);\n    });\n\n    // // Use the \"progress\" event to track upload progress\n    // blobStream.on(\"progress\", (progress) => {\n    // // Calculate upload progress based on the total bytes to be uploaded\n    // const uploadProgress = (progress.bytesWritten / size) * 100;\n\n    // // Update the upload progress in the document\n    // File.findOneAndUpdate(\n    //     { _id: savedFile._id },\n    //     { $set: { uploadProgress: uploadProgress.toFixed(2) } },\n    // ).exec();\n\n    // console.log(`Progress: ${uploadProgress.toFixed(2)}%`);\n    // });\n  } catch (error) {\n    console.error(\"Error uploading file to Google Cloud Storage:\", error);\n    res.status(500).send({\n      message: \"Error uploading file\"\n    });\n  }\n};\nexports.getListFiles = async (req, res) => {\n  try {\n    const [files] = await bucket.getFiles();\n    let fileInfos = [];\n    files.forEach(file => {\n      fileInfos.push({\n        name: file.name,\n        url: file.metadata.mediaLink\n      });\n    });\n    res.status(200).send(fileInfos);\n  } catch (err) {\n    console.log(err);\n    res.status(500).send({\n      message: \"Unable to read list of files!\"\n    });\n  }\n};\nexports.download = async (req, res) => {\n  try {\n    const [metaData] = await bucket.file(req.params.name).getMetadata();\n    res.redirect(metaData.mediaLink);\n  } catch (err) {\n    res.status(500).send({\n      message: \"Could not download the file. \" + err\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJGaWxlIiwiZmlsZSIsInByb2Nlc3NGaWxlTWlkZGxld2FyZSIsImZvcm1hdCIsIlN0b3JhZ2UiLCJSZWFkYWJsZSIsInN0b3JhZ2UiLCJrZXlGaWxlbmFtZSIsImJ1Y2tldCIsImV4cG9ydHMiLCJjcmVhdGVGaWxlIiwicmVxIiwicmVzIiwiYm9keSIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImdldEZpbGVzIiwiZmluZCIsImV4ZWMiLCJmaWxlcyIsImdldEZpbGVCeUlkIiwiZmluZE9uZSIsIl9pZCIsImZpbGVfaWQiLCJ1cGRhdGVGaWxlIiwiZmlsZV91cGRhdGVzIiwiZmluZE9uZUFuZFVwZGF0ZSIsInBhcmFtcyIsImlkIiwibmV3IiwiZ2V0VXBsb2FkUHJvZ3Jlc3MiLCJmaWxlSWQiLCJjb25zb2xlIiwibG9nIiwiZmluZEJ5SWQiLCJlcnJvciIsInVwbG9hZEZpbGUiLCJ1cGxvYWRlZEZpbGUiLCJmb2xkZXJfaWQiLCJvcmlnaW5hbG5hbWUiLCJzaXplIiwibWltZXR5cGUiLCJibG9iIiwiYmxvYlN0cmVhbSIsImNyZWF0ZVdyaXRlU3RyZWFtIiwiZmlsZUJ1ZmZlclN0cmVhbSIsInB1c2giLCJidWZmZXIiLCJuYW1lIiwidHlwZSIsInVwbG9hZFByb2dyZXNzIiwic2F2ZWRGaWxlIiwianNvbiIsInBpcGUiLCJvbiIsIiRzZXQiLCJtYWtlUHVibGljIiwicHVibGljVXJsIiwidXBkYXRlZEZpbGUiLCJzb3VyY2UiLCJnZXRMaXN0RmlsZXMiLCJmaWxlSW5mb3MiLCJmb3JFYWNoIiwidXJsIiwibWV0YWRhdGEiLCJtZWRpYUxpbmsiLCJkb3dubG9hZCIsIm1ldGFEYXRhIiwiZ2V0TWV0YWRhdGEiLCJyZWRpcmVjdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zdG9yYWdlL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiZmlsZS5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBjb2RlIGNvbnRhaW5zIHRoZSBDUlVEIG9wZXJhdGlvbnMgZm9yIGZpbGUuXG4gKi9cblxuY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzXCIpO1xuY29uc3QgRmlsZSA9IGRiLmZpbGU7XG5jb25zdCBwcm9jZXNzRmlsZU1pZGRsZXdhcmUgPSByZXF1aXJlKFwiLi4vbWlkZGxld2FyZXMvdXBsb2FkXCIpO1xuY29uc3QgeyBmb3JtYXQgfSA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xuY29uc3QgeyBTdG9yYWdlIH0gPSByZXF1aXJlKFwiQGdvb2dsZS1jbG91ZC9zdG9yYWdlXCIpO1xuY29uc3QgeyBSZWFkYWJsZSB9ID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbi8vIEluc3RhbnRpYXRlIGEgc3RvcmFnZSBjbGllbnQgd2l0aCBjcmVkZW50aWFsc1xuY29uc3Qgc3RvcmFnZSA9IG5ldyBTdG9yYWdlKHsga2V5RmlsZW5hbWU6IFwiY29uZmlnL2dvb2dsZS1jbG91ZC1rZXkuanNvblwiIH0pO1xuY29uc3QgYnVja2V0ID0gc3RvcmFnZS5idWNrZXQoXCJwb21zLXdlYi1idWlsZC1zdG9yYWdlLWJ1Y2tldFwiKTtcblxuZXhwb3J0cy5jcmVhdGVGaWxlID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgZmlsZSA9IG5ldyBGaWxlKHtcbiAgICAgICAgLi4ucmVxLmJvZHlcbiAgICB9KTtcblxuICAgIGZpbGUuc2F2ZSgoZXJyLCBmaWxlKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnRzLmdldEZpbGVzID0gKHJlcSwgcmVzKSA9PiB7XG4gICAgRmlsZS5maW5kKClcbiAgICAgICAgLmV4ZWMoKGVyciwgZmlsZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZmlsZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIkZpbGUgTm90IGZvdW5kLlwiIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChmaWxlcyk7XG4gICAgICAgIH0pO1xufTtcblxuZXhwb3J0cy5nZXRGaWxlQnlJZCA9IChyZXEsIHJlcykgPT4ge1xuICAgIEZpbGUuZmluZE9uZSh7IF9pZDogcmVxLmJvZHkuZmlsZV9pZCB9KVxuICAgICAgICAuZXhlYygoZXJyLCBmaWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIkZpbGUgTm90IGZvdW5kLlwiIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChmaWxlKTtcbiAgICAgICAgfSk7XG59O1xuXG5leHBvcnRzLnVwZGF0ZUZpbGUgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBmaWxlX3VwZGF0ZXMgPSB7XG4gICAgICAgIC4uLnJlcS5ib2R5XG4gICAgfTtcblxuICAgIEZpbGUuZmluZE9uZUFuZFVwZGF0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9LCBmaWxlX3VwZGF0ZXMsIHsgbmV3OiB0cnVlIH0pXG4gICAgICAgIC5leGVjKChlcnIsIGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiRmlsZSBOb3QgZm91bmQuXCIgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGZpbGUpO1xuICAgICAgICB9KTtcbn07XG5cblxuZXhwb3J0cy5nZXRVcGxvYWRQcm9ncmVzcyA9IChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IGZpbGVJZCA9IHJlcS5wYXJhbXMuaWQ7XG4gICAgY29uc29sZS5sb2coZmlsZUlkKTtcbiAgICBGaWxlLmZpbmRCeUlkKHsgX2lkOiBmaWxlSWQgfSlcbiAgICAuZXhlYygoZXJyLCBmaWxlKSA9PiB7XG4gICAgICAgIGlmIChlcnIgfHwgIWZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIGZpbGU6JywgZXJyKTtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCgnRXJyb3IgZmluZGluZyBmaWxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbn07XG5cblxuZXhwb3J0cy51cGxvYWRGaWxlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXBsb2FkZWRGaWxlID0gcmVxLmZpbGU7XG4gICAgY29uc3QgZm9sZGVyX2lkID0gcmVxLmJvZHkuZm9sZGVyX2lkO1xuXG4gICAgaWYgKCF1cGxvYWRlZEZpbGUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgbWVzc2FnZTogXCJQbGVhc2UgdXBsb2FkIGEgZmlsZSFcIiB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IG9yaWdpbmFsbmFtZSwgc2l6ZSwgbWltZXR5cGUgfSA9IHVwbG9hZGVkRmlsZTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBidWNrZXQuZmlsZShvcmlnaW5hbG5hbWUpO1xuICAgICAgICBjb25zdCBibG9iU3RyZWFtID0gYmxvYi5jcmVhdGVXcml0ZVN0cmVhbSgpO1xuXG4gICAgICAgIC8vIFJlYWRhYmxlIHN0cmVhbSB0byB0cmFjayB1cGxvYWQgcHJvZ3Jlc3NcbiAgICAgICAgY29uc3QgZmlsZUJ1ZmZlclN0cmVhbSA9IG5ldyBSZWFkYWJsZSgpO1xuICAgICAgICBmaWxlQnVmZmVyU3RyZWFtLnB1c2godXBsb2FkZWRGaWxlLmJ1ZmZlcik7XG4gICAgICAgIGZpbGVCdWZmZXJTdHJlYW0ucHVzaChudWxsKTsgLy8gU2lnbmFsIHRoZSBlbmQgb2YgdGhlIHN0cmVhbVxuXG4gICAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZSh7XG4gICAgICAgICAgICBuYW1lOiBvcmlnaW5hbG5hbWUsXG4gICAgICAgICAgICBmb2xkZXJfaWQ6IGZvbGRlcl9pZCxcbiAgICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgICB0eXBlOiBtaW1ldHlwZSxcbiAgICAgICAgICAgIHVwbG9hZFByb2dyZXNzOiAxMDAsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDcmVhdGUgYW5kIHVwZGF0ZSB0aGUgZG9jdW1lbnQgaW4gYSBzaW5nbGUgYXRvbWljIG9wZXJhdGlvblxuICAgICAgICBjb25zdCBzYXZlZEZpbGUgPSBhd2FpdCBmaWxlLnNhdmUoKTtcblxuICAgICAgICAvLyBTYXZlIHRoZSBmaWxlIGltbWVkaWF0ZWx5IGFuZCByZXR1cm4gaXQgdG8gdGhlIGNsaWVudFxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHNhdmVkRmlsZSB9KTtcblxuICAgICAgICAvLyBQaXBlIHRoZSBmaWxlIGJ1ZmZlciB0byB0aGUgYmxvYiBzdHJlYW1cbmZpbGVCdWZmZXJTdHJlYW0ucGlwZShibG9iU3RyZWFtKVxuLm9uKFwiZXJyb3JcIiwgYXN5bmMgKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGxvYWRpbmcgdG8gR29vZ2xlIENsb3VkIFN0b3JhZ2U6XCIsIGVycik7XG4gICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBcIkVycm9yIHVwbG9hZGluZyBmaWxlXCIgfSk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIHVwbG9hZCBwcm9ncmVzcyBpbiB0aGUgZG9jdW1lbnQgd2l0aCBhbiBlcnJvciBzdGF0dXNcbiAgICBhd2FpdCBGaWxlLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgIHsgX2lkOiBzYXZlZEZpbGUuX2lkIH0sXG4gICAgICAgIHsgJHNldDogeyB1cGxvYWRQcm9ncmVzczogXCJlcnJvclwiIH0gfSxcbiAgICAgICAgeyBuZXc6IHRydWUgfVxuICAgICkuZXhlYygpO1xufSlcbi5vbihcImZpbmlzaFwiLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJVcGxvYWQgY29tcGxldGUhXCIpO1xuXG4gICAgLy8gU2V0IHRoZSBmaWxlIGFzIHB1YmxpY1xuICAgIGF3YWl0IGJsb2IubWFrZVB1YmxpYygpO1xuXG4gICAgLy8gR2V0IHB1YmxpYyBVUkxcbiAgICBjb25zdCBwdWJsaWNVcmwgPSBmb3JtYXQoYGh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS8ke2J1Y2tldC5uYW1lfS8ke2Jsb2IubmFtZX1gKTtcblxuICAgIC8vIFVwZGF0ZSBmaWxlIGluIHRoZSBkYXRhYmFzZSB3aXRoIHRoZSBwdWJsaWMgVVJMXG4gICAgY29uc3QgdXBkYXRlZEZpbGUgPSBhd2FpdCBGaWxlLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgIHsgX2lkOiBzYXZlZEZpbGUuX2lkIH0sXG4gICAgICAgIHsgJHNldDogeyBzb3VyY2U6IHB1YmxpY1VybCwgdHlwZTogbWltZXR5cGUsIGZvbGRlcl9pZDogZm9sZGVyX2lkLCB1cGxvYWRQcm9ncmVzczogMTAwIH0gfSxcbiAgICAgICAgeyBuZXc6IHRydWUgfVxuICAgICkuZXhlYygpO1xuXG4gICAgY29uc29sZS5sb2coJ0ZpbmFsIGZpbGUgdXBkYXRlZDonLCB1cGRhdGVkRmlsZSk7XG59KTtcblxuLy8gLy8gVXNlIHRoZSBcInByb2dyZXNzXCIgZXZlbnQgdG8gdHJhY2sgdXBsb2FkIHByb2dyZXNzXG4vLyBibG9iU3RyZWFtLm9uKFwicHJvZ3Jlc3NcIiwgKHByb2dyZXNzKSA9PiB7XG4vLyAvLyBDYWxjdWxhdGUgdXBsb2FkIHByb2dyZXNzIGJhc2VkIG9uIHRoZSB0b3RhbCBieXRlcyB0byBiZSB1cGxvYWRlZFxuLy8gY29uc3QgdXBsb2FkUHJvZ3Jlc3MgPSAocHJvZ3Jlc3MuYnl0ZXNXcml0dGVuIC8gc2l6ZSkgKiAxMDA7XG5cbi8vIC8vIFVwZGF0ZSB0aGUgdXBsb2FkIHByb2dyZXNzIGluIHRoZSBkb2N1bWVudFxuLy8gRmlsZS5maW5kT25lQW5kVXBkYXRlKFxuLy8gICAgIHsgX2lkOiBzYXZlZEZpbGUuX2lkIH0sXG4vLyAgICAgeyAkc2V0OiB7IHVwbG9hZFByb2dyZXNzOiB1cGxvYWRQcm9ncmVzcy50b0ZpeGVkKDIpIH0gfSxcbi8vICkuZXhlYygpO1xuXG4vLyBjb25zb2xlLmxvZyhgUHJvZ3Jlc3M6ICR7dXBsb2FkUHJvZ3Jlc3MudG9GaXhlZCgyKX0lYCk7XG4vLyB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gR29vZ2xlIENsb3VkIFN0b3JhZ2U6XCIsIGVycm9yKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBcIkVycm9yIHVwbG9hZGluZyBmaWxlXCIgfSk7XG4gICAgfVxufTtcblxuZXhwb3J0cy5nZXRMaXN0RmlsZXMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBbZmlsZXNdID0gYXdhaXQgYnVja2V0LmdldEZpbGVzKCk7XG4gICAgICAgIGxldCBmaWxlSW5mb3MgPSBbXTtcblxuICAgICAgICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICAgICAgICBmaWxlSW5mb3MucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgIHVybDogZmlsZS5tZXRhZGF0YS5tZWRpYUxpbmssXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZmlsZUluZm9zKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcblxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7XG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVuYWJsZSB0byByZWFkIGxpc3Qgb2YgZmlsZXMhXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cblxuZXhwb3J0cy5kb3dubG9hZCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFttZXRhRGF0YV0gPSBhd2FpdCBidWNrZXQuZmlsZShyZXEucGFyYW1zLm5hbWUpLmdldE1ldGFkYXRhKCk7XG4gICAgICAgIHJlcy5yZWRpcmVjdChtZXRhRGF0YS5tZWRpYUxpbmspO1xuXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ291bGQgbm90IGRvd25sb2FkIHRoZSBmaWxlLiBcIiAr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","map":{"version":3,"names":["db","require","File","file","processFileMiddleware","format","Storage","Readable","storage","keyFilename","bucket","exports","createFile","req","res","body","save","err","status","send","message","getFiles","find","exec","files","getFileById","findOne","_id","file_id","updateFile","file_updates","findOneAndUpdate","params","id","new","getUploadProgress","fileId","console","log","findById","error","uploadFile","uploadedFile","folder_id","originalname","size","mimetype","blob","blobStream","createWriteStream","fileBufferStream","push","buffer","name","type","uploadProgress","savedFile","json","pipe","on","$set","makePublic","publicUrl","updatedFile","source","getListFiles","fileInfos","forEach","url","metadata","mediaLink","download","metaData","getMetadata","redirect"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/controllers/","sources":["file.controller.js"],"sourcesContent":["/**\n * This code contains the CRUD operations for file.\n */\n\nconst db = require(\"../../../models\");\nconst File = db.file;\nconst processFileMiddleware = require(\"../middlewares/upload\");\nconst { format } = require(\"util\");\nconst { Storage } = require(\"@google-cloud/storage\");\nconst { Readable } = require('stream');\n\n// Instantiate a storage client with credentials\nconst storage = new Storage({ keyFilename: \"config/google-cloud-key.json\" });\nconst bucket = storage.bucket(\"poms-web-build-storage-bucket\");\n\nexports.createFile = (req, res) => {\n    const file = new File({\n        ...req.body\n    });\n\n    file.save((err, file) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n    });\n};\n\nexports.getFiles = (req, res) => {\n    File.find()\n        .exec((err, files) => {\n            if (err) {\n                res.status(500).send({ message: err });\n                return;\n            }\n\n            if (!files) {\n                return res.status(404).send({ message: \"File Not found.\" });\n            }\n\n            res.status(200).send(files);\n        });\n};\n\nexports.getFileById = (req, res) => {\n    File.findOne({ _id: req.body.file_id })\n        .exec((err, file) => {\n            if (err) {\n                res.status(500).send({ message: err });\n                return;\n            }\n\n            if (!file) {\n                return res.status(404).send({ message: \"File Not found.\" });\n            }\n\n            res.status(200).send(file);\n        });\n};\n\nexports.updateFile = (req, res) => {\n    const file_updates = {\n        ...req.body\n    };\n\n    File.findOneAndUpdate({ _id: req.params.id }, file_updates, { new: true })\n        .exec((err, file) => {\n            if (err) {\n                res.status(500).send({ message: err });\n                return;\n            }\n\n            if (!file) {\n                return res.status(404).send({ message: \"File Not found.\" });\n            }\n\n            res.status(200).send(file);\n        });\n};\n\n\nexports.getUploadProgress = (req, res) => {\n    const fileId = req.params.id;\n    console.log(fileId);\n    File.findById({ _id: fileId })\n    .exec((err, file) => {\n        if (err || !file) {\n                console.error('Error finding file:', err);\n                res.status(500).send('Error finding file');\n            } else {\n                console.log(file);\n                res.status(200).send(file);\n            }\n        });\n};\n\n\nexports.uploadFile = async (req, res) => {\n    const uploadedFile = req.file;\n    const folder_id = req.body.folder_id;\n\n    if (!uploadedFile) {\n        return res.status(400).send({ message: \"Please upload a file!\" });\n    }\n\n    const { originalname, size, mimetype } = uploadedFile;\n\n    try {\n        const blob = bucket.file(originalname);\n        const blobStream = blob.createWriteStream();\n\n        // Readable stream to track upload progress\n        const fileBufferStream = new Readable();\n        fileBufferStream.push(uploadedFile.buffer);\n        fileBufferStream.push(null); // Signal the end of the stream\n\n        const file = new File({\n            name: originalname,\n            folder_id: folder_id,\n            size: size,\n            type: mimetype,\n            uploadProgress: 100,\n        });\n        // Create and update the document in a single atomic operation\n        const savedFile = await file.save();\n\n        // Save the file immediately and return it to the client\n        res.status(200).json({ savedFile });\n\n        // Pipe the file buffer to the blob stream\nfileBufferStream.pipe(blobStream)\n.on(\"error\", async (err) => {\n    console.error(\"Error uploading to Google Cloud Storage:\", err);\n    res.status(500).send({ message: \"Error uploading file\" });\n\n    // Update the upload progress in the document with an error status\n    await File.findOneAndUpdate(\n        { _id: savedFile._id },\n        { $set: { uploadProgress: \"error\" } },\n        { new: true }\n    ).exec();\n})\n.on(\"finish\", async () => {\n    console.log(\"Upload complete!\");\n\n    // Set the file as public\n    await blob.makePublic();\n\n    // Get public URL\n    const publicUrl = format(`https://storage.googleapis.com/${bucket.name}/${blob.name}`);\n\n    // Update file in the database with the public URL\n    const updatedFile = await File.findOneAndUpdate(\n        { _id: savedFile._id },\n        { $set: { source: publicUrl, type: mimetype, folder_id: folder_id, uploadProgress: 100 } },\n        { new: true }\n    ).exec();\n\n    console.log('Final file updated:', updatedFile);\n});\n\n// // Use the \"progress\" event to track upload progress\n// blobStream.on(\"progress\", (progress) => {\n// // Calculate upload progress based on the total bytes to be uploaded\n// const uploadProgress = (progress.bytesWritten / size) * 100;\n\n// // Update the upload progress in the document\n// File.findOneAndUpdate(\n//     { _id: savedFile._id },\n//     { $set: { uploadProgress: uploadProgress.toFixed(2) } },\n// ).exec();\n\n// console.log(`Progress: ${uploadProgress.toFixed(2)}%`);\n// });\n    } catch (error) {\n        console.error(\"Error uploading file to Google Cloud Storage:\", error);\n        res.status(500).send({ message: \"Error uploading file\" });\n    }\n};\n\nexports.getListFiles = async (req, res) => {\n    try {\n        const [files] = await bucket.getFiles();\n        let fileInfos = [];\n\n        files.forEach((file) => {\n            fileInfos.push({\n                name: file.name,\n                url: file.metadata.mediaLink,\n            });\n        });\n\n        res.status(200).send(fileInfos);\n    } catch (err) {\n        console.log(err);\n\n        res.status(500).send({\n            message: \"Unable to read list of files!\",\n        });\n    }\n};\n\n\nexports.download = async (req, res) => {\n    try {\n        const [metaData] = await bucket.file(req.params.name).getMetadata();\n        res.redirect(metaData.mediaLink);\n\n    } catch (err) {\n        res.status(500).send({\n            message: \"Could not download the file. \" + err,\n        });\n    }\n};"],"mappings":"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"}},"mtime":1701964727322},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/middlewares/upload.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"const util = require(\"util\");\nconst Multer = require(\"multer\");\nconst maxSize = 10000000000;\nlet processFile = Multer({\n  storage: Multer.memoryStorage(),\n  limits: {\n    fileSize: maxSize\n  }\n}).single(\"file\");\nlet processFileMiddleware = util.promisify(processFile);\nmodule.exports = processFileMiddleware;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1dGlsIiwicmVxdWlyZSIsIk11bHRlciIsIm1heFNpemUiLCJwcm9jZXNzRmlsZSIsInN0b3JhZ2UiLCJtZW1vcnlTdG9yYWdlIiwibGltaXRzIiwiZmlsZVNpemUiLCJzaW5nbGUiLCJwcm9jZXNzRmlsZU1pZGRsZXdhcmUiLCJwcm9taXNpZnkiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3N0b3JhZ2UvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJ1cGxvYWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdXRpbCA9IHJlcXVpcmUoXCJ1dGlsXCIpO1xuY29uc3QgTXVsdGVyID0gcmVxdWlyZShcIm11bHRlclwiKTtcbmNvbnN0IG1heFNpemUgPSAxMDAwMDAwMDAwMDtcblxubGV0IHByb2Nlc3NGaWxlID0gTXVsdGVyKHtcbiAgc3RvcmFnZTogTXVsdGVyLm1lbW9yeVN0b3JhZ2UoKSxcbiAgbGltaXRzOiB7IGZpbGVTaXplOiBtYXhTaXplIH0sXG59KS5zaW5nbGUoXCJmaWxlXCIpO1xuXG5sZXQgcHJvY2Vzc0ZpbGVNaWRkbGV3YXJlID0gdXRpbC5wcm9taXNpZnkocHJvY2Vzc0ZpbGUpO1xubW9kdWxlLmV4cG9ydHMgPSBwcm9jZXNzRmlsZU1pZGRsZXdhcmU7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTUUsT0FBTyxHQUFHLFdBQVc7QUFFM0IsSUFBSUMsV0FBVyxHQUFHRixNQUFNLENBQUM7RUFDdkJHLE9BQU8sRUFBRUgsTUFBTSxDQUFDSSxhQUFhLENBQUMsQ0FBQztFQUMvQkMsTUFBTSxFQUFFO0lBQUVDLFFBQVEsRUFBRUw7RUFBUTtBQUM5QixDQUFDLENBQUMsQ0FBQ00sTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUVqQixJQUFJQyxxQkFBcUIsR0FBR1YsSUFBSSxDQUFDVyxTQUFTLENBQUNQLFdBQVcsQ0FBQztBQUN2RFEsTUFBTSxDQUFDQyxPQUFPLEdBQUdILHFCQUFxQiJ9","map":{"version":3,"names":["util","require","Multer","maxSize","processFile","storage","memoryStorage","limits","fileSize","single","processFileMiddleware","promisify","module","exports"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/middlewares/","sources":["upload.js"],"sourcesContent":["const util = require(\"util\");\nconst Multer = require(\"multer\");\nconst maxSize = 10000000000;\n\nlet processFile = Multer({\n  storage: Multer.memoryStorage(),\n  limits: { fileSize: maxSize },\n}).single(\"file\");\n\nlet processFileMiddleware = util.promisify(processFile);\nmodule.exports = processFileMiddleware;\n"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAME,OAAO,GAAG,WAAW;AAE3B,IAAIC,WAAW,GAAGF,MAAM,CAAC;EACvBG,OAAO,EAAEH,MAAM,CAACI,aAAa,CAAC,CAAC;EAC/BC,MAAM,EAAE;IAAEC,QAAQ,EAAEL;EAAQ;AAC9B,CAAC,CAAC,CAACM,MAAM,CAAC,MAAM,CAAC;AAEjB,IAAIC,qBAAqB,GAAGV,IAAI,CAACW,SAAS,CAACP,WAAW,CAAC;AACvDQ,MAAM,CAACC,OAAO,GAAGH,qBAAqB"}},"mtime":1700249816565},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/routes/folder.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code is the routes for the folder controller.\n * The first route is for getting all folder, the second is for getting folder for a specific user, the third is for getting folder for a specific superUser, the fourth is for getting folder for a specific admin, and the fifth is for getting folder for a specific media\n */\n\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/folder.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/folder/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getFolders);\n  app.post(\"/api/folder/by-id/\", controller.getFolderById);\n  app.post(\"/api/folder\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createFolder);\n  app.put(\"/api/folder/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateFolder);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTdXBlclVzZXIiLCJnZXRGb2xkZXJzIiwicG9zdCIsImdldEZvbGRlckJ5SWQiLCJpc0dsb2JhbEFkbWluIiwiY3JlYXRlRm9sZGVyIiwicHV0IiwidXBkYXRlRm9sZGVyIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3N0b3JhZ2Uvcm91dGVzLyIsInNvdXJjZXMiOlsiZm9sZGVyLnJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoaXMgY29kZSBpcyB0aGUgcm91dGVzIGZvciB0aGUgZm9sZGVyIGNvbnRyb2xsZXIuXG4gKiBUaGUgZmlyc3Qgcm91dGUgaXMgZm9yIGdldHRpbmcgYWxsIGZvbGRlciwgdGhlIHNlY29uZCBpcyBmb3IgZ2V0dGluZyBmb2xkZXIgZm9yIGEgc3BlY2lmaWMgdXNlciwgdGhlIHRoaXJkIGlzIGZvciBnZXR0aW5nIGZvbGRlciBmb3IgYSBzcGVjaWZpYyBzdXBlclVzZXIsIHRoZSBmb3VydGggaXMgZm9yIGdldHRpbmcgZm9sZGVyIGZvciBhIHNwZWNpZmljIGFkbWluLCBhbmQgdGhlIGZpZnRoIGlzIGZvciBnZXR0aW5nIGZvbGRlciBmb3IgYSBzcGVjaWZpYyBtZWRpYVxuICovXG5cbmNvbnN0IHsgYXV0aEp3dCB9ID0gcmVxdWlyZShcIi4uLy4uLy4uL21pZGRsZXdhcmVzXCIpO1xuY29uc3QgY29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy9mb2xkZXIuY29udHJvbGxlclwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgYXBwLnVzZShmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgcmVzLmhlYWRlcihcbiAgICAgICAgICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLFxuICAgICAgICAgICAgXCJ4LWFjY2Vzcy10b2tlbiwgT3JpZ2luLCBDb250ZW50LVR5cGUsIEFjY2VwdFwiXG4gICAgICAgICk7XG4gICAgICAgIG5leHQoKTtcbiAgICB9KTtcblxuICAgIGFwcC5nZXQoXCIvYXBpL2ZvbGRlci9cIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTdXBlclVzZXJdLCBjb250cm9sbGVyLmdldEZvbGRlcnMpO1xuICAgIGFwcC5wb3N0KFwiL2FwaS9mb2xkZXIvYnktaWQvXCIsIGNvbnRyb2xsZXIuZ2V0Rm9sZGVyQnlJZCk7XG4gICAgYXBwLnBvc3QoXCIvYXBpL2ZvbGRlclwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc0dsb2JhbEFkbWluXSwgY29udHJvbGxlci5jcmVhdGVGb2xkZXIpO1xuICAgIGFwcC5wdXQoXCIvYXBpL2ZvbGRlci86aWRcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNHbG9iYWxBZG1pbl0sIGNvbnRyb2xsZXIudXBkYXRlRm9sZGVyKTtcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQUVBO0FBQVEsQ0FBQyxHQUFHQyxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDbkQsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsa0NBQWtDLENBQUM7QUFFOURFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQVVDLEdBQUcsRUFBRTtFQUM1QkEsR0FBRyxDQUFDQyxHQUFHLENBQUMsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtJQUM5QkQsR0FBRyxDQUFDRSxNQUFNLENBQ04sOEJBQThCLEVBQzlCLDhDQUNKLENBQUM7SUFDREQsSUFBSSxDQUFDLENBQUM7RUFDVixDQUFDLENBQUM7RUFFRkosR0FBRyxDQUFDTSxHQUFHLENBQUMsY0FBYyxFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxFQUFFWixPQUFPLENBQUNhLFdBQVcsQ0FBQyxFQUFFWCxVQUFVLENBQUNZLFVBQVUsQ0FBQztFQUMxRlQsR0FBRyxDQUFDVSxJQUFJLENBQUMsb0JBQW9CLEVBQUViLFVBQVUsQ0FBQ2MsYUFBYSxDQUFDO0VBQ3hEWCxHQUFHLENBQUNVLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQ2YsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2lCLGFBQWEsQ0FBQyxFQUFFZixVQUFVLENBQUNnQixZQUFZLENBQUM7RUFDOUZiLEdBQUcsQ0FBQ2MsR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUNuQixPQUFPLENBQUNZLFdBQVcsRUFBRVosT0FBTyxDQUFDaUIsYUFBYSxDQUFDLEVBQUVmLFVBQVUsQ0FBQ2tCLFlBQVksQ0FBQztBQUNyRyxDQUFDIn0=","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSuperUser","getFolders","post","getFolderById","isGlobalAdmin","createFolder","put","updateFolder"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/routes/","sources":["folder.routes.js"],"sourcesContent":["/**\n * This code is the routes for the folder controller.\n * The first route is for getting all folder, the second is for getting folder for a specific user, the third is for getting folder for a specific superUser, the fourth is for getting folder for a specific admin, and the fifth is for getting folder for a specific media\n */\n\nconst { authJwt } = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/folder.controller\");\n\nmodule.exports = function (app) {\n    app.use(function (req, res, next) {\n        res.header(\n            \"Access-Control-Allow-Headers\",\n            \"x-access-token, Origin, Content-Type, Accept\"\n        );\n        next();\n    });\n\n    app.get(\"/api/folder/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getFolders);\n    app.post(\"/api/folder/by-id/\", controller.getFolderById);\n    app.post(\"/api/folder\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.createFolder);\n    app.put(\"/api/folder/:id\", [authJwt.verifyToken, authJwt.isGlobalAdmin], controller.updateFolder);\n};"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,kCAAkC,CAAC;AAE9DE,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EAC5BA,GAAG,CAACC,GAAG,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9BD,GAAG,CAACE,MAAM,CACN,8BAA8B,EAC9B,8CACJ,CAAC;IACDD,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,cAAc,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,UAAU,CAAC;EAC1FT,GAAG,CAACU,IAAI,CAAC,oBAAoB,EAAEb,UAAU,CAACc,aAAa,CAAC;EACxDX,GAAG,CAACU,IAAI,CAAC,aAAa,EAAE,CAACf,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACiB,aAAa,CAAC,EAAEf,UAAU,CAACgB,YAAY,CAAC;EAC9Fb,GAAG,CAACc,GAAG,CAAC,iBAAiB,EAAE,CAACnB,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACiB,aAAa,CAAC,EAAEf,UAAU,CAACkB,YAAY,CAAC;AACrG,CAAC"}},"mtime":1701280164693},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/controllers/folder.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\n * This code contains the CRUD operations for folder.\n */\n\nconst db = require(\"../../../models\");\nconst Folder = db.folder;\nexports.createFolder = (req, res) => {\n  const folder = new Folder({\n    ...req.body\n  });\n  console.log(folder);\n  folder.save((err, folder) => {\n    if (req.body.parent_id) {\n      Folder.findOneAndUpdate({\n        _id: req.body.parent_id\n      }, {\n        $push: {\n          'folders': folder._id\n        }\n      }, {\n        new: true\n      }).exec((err, folder) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        if (!folder) {\n          return res.status(404).send({\n            message: \"Folder Not found.\"\n          });\n        }\n        res.status(200).send(folder);\n      });\n    } else {\n      res.status(200).send(folder);\n    }\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n  });\n};\nexports.getFolders = (req, res) => {\n  Folder.find({\n    parent_id: null\n  }).populate(\"folders\", \"-__v\").exec((err, folders) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!folders) {\n      return res.status(404).send({\n        message: \"Folder Not found.\"\n      });\n    }\n    res.status(200).send(folders);\n  });\n};\nexports.getFolderById = (req, res) => {\n  Folder.findOne({\n    _id: req.body.folder_id\n  }).exec((err, folder) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!folder) {\n      return res.status(404).send({\n        message: \"Folder Not found.\"\n      });\n    }\n    res.status(200).send(folder);\n  });\n};\nexports.updateFolder = (req, res) => {\n  const folder_updates = {\n    ...req.body\n  };\n  Folder.findOneAndUpdate({\n    _id: req.params.id\n  }, folder_updates, {\n    new: true\n  }).exec((err, folder) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!folder) {\n      return res.status(404).send({\n        message: \"Folder Not found.\"\n      });\n    }\n    res.status(200).send(folder);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJGb2xkZXIiLCJmb2xkZXIiLCJleHBvcnRzIiwiY3JlYXRlRm9sZGVyIiwicmVxIiwicmVzIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJzYXZlIiwiZXJyIiwicGFyZW50X2lkIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsIiRwdXNoIiwibmV3IiwiZXhlYyIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwiZ2V0Rm9sZGVycyIsImZpbmQiLCJwb3B1bGF0ZSIsImZvbGRlcnMiLCJnZXRGb2xkZXJCeUlkIiwiZmluZE9uZSIsImZvbGRlcl9pZCIsInVwZGF0ZUZvbGRlciIsImZvbGRlcl91cGRhdGVzIiwicGFyYW1zIiwiaWQiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc3RvcmFnZS9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImZvbGRlci5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBjb2RlIGNvbnRhaW5zIHRoZSBDUlVEIG9wZXJhdGlvbnMgZm9yIGZvbGRlci5cbiAqL1xuICBcbmNvbnN0IGRiID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVsc1wiKTtcbmNvbnN0IEZvbGRlciA9IGRiLmZvbGRlcjtcblxuZXhwb3J0cy5jcmVhdGVGb2xkZXIgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBmb2xkZXIgPSBuZXcgRm9sZGVyKHtcbiAgICAgICAgLi4ucmVxLmJvZHlcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhmb2xkZXIpO1xuICAgIGZvbGRlci5zYXZlKChlcnIsIGZvbGRlcikgPT4ge1xuICAgICAgICBpZiAocmVxLmJvZHkucGFyZW50X2lkKSB7XG4gICAgICAgICAgICBGb2xkZXIuZmluZE9uZUFuZFVwZGF0ZSh7IF9pZDogcmVxLmJvZHkucGFyZW50X2lkIH0sIHsgJHB1c2g6eyAnZm9sZGVycycgOiBmb2xkZXIuX2lkIH19LCB7IG5ldzogdHJ1ZSB9KVxuICAgICAgICAgICAgLmV4ZWMoKGVyciwgZm9sZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIkZvbGRlciBOb3QgZm91bmQuXCIgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGZvbGRlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGZvbGRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydHMuZ2V0Rm9sZGVycyA9IChyZXEsIHJlcykgPT4ge1xuICAgIEZvbGRlci5maW5kKHtwYXJlbnRfaWQ6IG51bGx9KVxuICAgIC5wb3B1bGF0ZShcImZvbGRlcnNcIiwgXCItX192XCIpXG4gICAgLmV4ZWMoKGVyciwgZm9sZGVycykgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm9sZGVycykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJGb2xkZXIgTm90IGZvdW5kLlwiIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZm9sZGVycyk7XG4gICAgfSk7XG59O1xuXG5leHBvcnRzLmdldEZvbGRlckJ5SWQgPSAocmVxLCByZXMpID0+IHtcbiAgICBGb2xkZXIuZmluZE9uZSh7X2lkOiByZXEuYm9keS5mb2xkZXJfaWR9KVxuICAgIC5leGVjKChlcnIsIGZvbGRlcikgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIkZvbGRlciBOb3QgZm91bmQuXCIgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChmb2xkZXIpO1xuICAgIH0pO1xufTtcblxuZXhwb3J0cy51cGRhdGVGb2xkZXIgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBmb2xkZXJfdXBkYXRlcyA9IHtcbiAgICAgICAgLi4ucmVxLmJvZHlcbiAgICB9O1xuXG4gICAgRm9sZGVyLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgZm9sZGVyX3VwZGF0ZXMsIHsgbmV3OiB0cnVlIH0pXG4gICAgICAgIC5leGVjKChlcnIsIGZvbGRlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFmb2xkZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIkZvbGRlciBOb3QgZm91bmQuXCIgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGZvbGRlcik7XG4gICAgICAgIH0pO1xufTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNyQyxNQUFNQyxNQUFNLEdBQUdGLEVBQUUsQ0FBQ0csTUFBTTtBQUV4QkMsT0FBTyxDQUFDQyxZQUFZLEdBQUcsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDakMsTUFBTUosTUFBTSxHQUFHLElBQUlELE1BQU0sQ0FBQztJQUN0QixHQUFHSSxHQUFHLENBQUNFO0VBQ1gsQ0FBQyxDQUFDO0VBQ0ZDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUCxNQUFNLENBQUM7RUFDbkJBLE1BQU0sQ0FBQ1EsSUFBSSxDQUFDLENBQUNDLEdBQUcsRUFBRVQsTUFBTSxLQUFLO0lBQ3pCLElBQUlHLEdBQUcsQ0FBQ0UsSUFBSSxDQUFDSyxTQUFTLEVBQUU7TUFDcEJYLE1BQU0sQ0FBQ1ksZ0JBQWdCLENBQUM7UUFBRUMsR0FBRyxFQUFFVCxHQUFHLENBQUNFLElBQUksQ0FBQ0s7TUFBVSxDQUFDLEVBQUU7UUFBRUcsS0FBSyxFQUFDO1VBQUUsU0FBUyxFQUFHYixNQUFNLENBQUNZO1FBQUk7TUFBQyxDQUFDLEVBQUU7UUFBRUUsR0FBRyxFQUFFO01BQUssQ0FBQyxDQUFDLENBQ3ZHQyxJQUFJLENBQUMsQ0FBQ04sR0FBRyxFQUFFVCxNQUFNLEtBQUs7UUFDbkIsSUFBSVMsR0FBRyxFQUFFO1VBQ0xMLEdBQUcsQ0FBQ1ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7WUFBRUMsT0FBTyxFQUFFVDtVQUFJLENBQUMsQ0FBQztVQUN0QztRQUNKO1FBRUEsSUFBSSxD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","map":{"version":3,"names":["db","require","Folder","folder","exports","createFolder","req","res","body","console","log","save","err","parent_id","findOneAndUpdate","_id","$push","new","exec","status","send","message","getFolders","find","populate","folders","getFolderById","findOne","folder_id","updateFolder","folder_updates","params","id"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/storage/controllers/","sources":["folder.controller.js"],"sourcesContent":["/**\n * This code contains the CRUD operations for folder.\n */\n  \nconst db = require(\"../../../models\");\nconst Folder = db.folder;\n\nexports.createFolder = (req, res) => {\n    const folder = new Folder({\n        ...req.body\n    });\n    console.log(folder);\n    folder.save((err, folder) => {\n        if (req.body.parent_id) {\n            Folder.findOneAndUpdate({ _id: req.body.parent_id }, { $push:{ 'folders' : folder._id }}, { new: true })\n            .exec((err, folder) => {\n                if (err) {\n                    res.status(500).send({ message: err });\n                    return;\n                }\n    \n                if (!folder) {\n                    return res.status(404).send({ message: \"Folder Not found.\" });\n                }\n    \n                res.status(200).send(folder);\n            });\n        } else {\n            res.status(200).send(folder);\n        }\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n    });\n};\n\nexports.getFolders = (req, res) => {\n    Folder.find({parent_id: null})\n    .populate(\"folders\", \"-__v\")\n    .exec((err, folders) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n\n        if (!folders) {\n            return res.status(404).send({ message: \"Folder Not found.\" });\n        }\n\n        res.status(200).send(folders);\n    });\n};\n\nexports.getFolderById = (req, res) => {\n    Folder.findOne({_id: req.body.folder_id})\n    .exec((err, folder) => {\n        if (err) {\n            res.status(500).send({ message: err });\n            return;\n        }\n\n        if (!folder) {\n            return res.status(404).send({ message: \"Folder Not found.\" });\n        }\n\n        res.status(200).send(folder);\n    });\n};\n\nexports.updateFolder = (req, res) => {\n    const folder_updates = {\n        ...req.body\n    };\n\n    Folder.findOneAndUpdate({ _id: req.params.id }, folder_updates, { new: true })\n        .exec((err, folder) => {\n            if (err) {\n                res.status(500).send({ message: err });\n                return;\n            }\n\n            if (!folder) {\n                return res.status(404).send({ message: \"Folder Not found.\" });\n            }\n\n            res.status(200).send(folder);\n        });\n};"],"mappings":"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"}},"mtime":1701964738062},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/session.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is a module that exports functions that allow for the creation, reading, and updating of sessions.\r\n * The module requires the 'authJwt' middleware for authentication and the 'controller' module for the actual functions.\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/session.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/session/\", controller.getSessions);\n  app.get(\"/api/session/:id\", controller.getSession);\n  app.post(\"/api/session\", [authJwt.verifyToken], controller.createSession);\n  app.put(\"/api/session/:id\", [authJwt.verifyToken], controller.updateSession);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsImdldFNlc3Npb25zIiwiZ2V0U2Vzc2lvbiIsInBvc3QiLCJ2ZXJpZnlUb2tlbiIsImNyZWF0ZVNlc3Npb24iLCJwdXQiLCJ1cGRhdGVTZXNzaW9uIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NjaGVkdWxpbmcvcm91dGVzLyIsInNvdXJjZXMiOlsic2Vzc2lvbi5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgY29kZSBpcyBhIG1vZHVsZSB0aGF0IGV4cG9ydHMgZnVuY3Rpb25zIHRoYXQgYWxsb3cgZm9yIHRoZSBjcmVhdGlvbiwgcmVhZGluZywgYW5kIHVwZGF0aW5nIG9mIHNlc3Npb25zLlxyXG4gKiBUaGUgbW9kdWxlIHJlcXVpcmVzIHRoZSAnYXV0aEp3dCcgbWlkZGxld2FyZSBmb3IgYXV0aGVudGljYXRpb24gYW5kIHRoZSAnY29udHJvbGxlcicgbW9kdWxlIGZvciB0aGUgYWN0dWFsIGZ1bmN0aW9ucy5cclxuICovXHJcbmNvbnN0IHsgYXV0aEp3dCB9ID0gcmVxdWlyZShcIi4uLy4uLy4uL21pZGRsZXdhcmVzXCIpO1xyXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL3Nlc3Npb24uY29udHJvbGxlclwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXBwKSB7XHJcbiAgYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgcmVzLmhlYWRlcihcclxuICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbiAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxyXG4gICAgKTtcclxuICAgIG5leHQoKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLmdldChcIi9hcGkvc2Vzc2lvbi9cIiwgY29udHJvbGxlci5nZXRTZXNzaW9ucyk7XHJcbiAgYXBwLmdldChcIi9hcGkvc2Vzc2lvbi86aWRcIiwgY29udHJvbGxlci5nZXRTZXNzaW9uKTtcclxuICBhcHAucG9zdChcIi9hcGkvc2Vzc2lvblwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbl0sIGNvbnRyb2xsZXIuY3JlYXRlU2Vzc2lvbik7XHJcbiAgYXBwLnB1dChcIi9hcGkvc2Vzc2lvbi86aWRcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW5dLCBjb250cm9sbGVyLnVwZGF0ZVNlc3Npb24pO1xyXG5cclxufTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ25ELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBRS9ERSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFTQyxHQUFHLEVBQUU7RUFDN0JBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFVBQVNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDL0JELEdBQUcsQ0FBQ0UsTUFBTSxDQUNSLDhCQUE4QixFQUM5Qiw4Q0FDRixDQUFDO0lBQ0RELElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDO0VBRUZKLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLGVBQWUsRUFBRVQsVUFBVSxDQUFDVSxXQUFXLENBQUM7RUFDaERQLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLGtCQUFrQixFQUFFVCxVQUFVLENBQUNXLFVBQVUsQ0FBQztFQUNsRFIsR0FBRyxDQUFDUyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUNkLE9BQU8sQ0FBQ2UsV0FBVyxDQUFDLEVBQUViLFVBQVUsQ0FBQ2MsYUFBYSxDQUFDO0VBQ3pFWCxHQUFHLENBQUNZLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDakIsT0FBTyxDQUFDZSxXQUFXLENBQUMsRUFBRWIsVUFBVSxDQUFDZ0IsYUFBYSxDQUFDO0FBRTlFLENBQUMifQ==","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","getSessions","getSession","post","verifyToken","createSession","put","updateSession"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/","sources":["session.routes.js"],"sourcesContent":["/**\r\n * This code is a module that exports functions that allow for the creation, reading, and updating of sessions.\r\n * The module requires the 'authJwt' middleware for authentication and the 'controller' module for the actual functions.\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/session.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.get(\"/api/session/\", controller.getSessions);\r\n  app.get(\"/api/session/:id\", controller.getSession);\r\n  app.post(\"/api/session\", [authJwt.verifyToken], controller.createSession);\r\n  app.put(\"/api/session/:id\", [authJwt.verifyToken], controller.updateSession);\r\n\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,mCAAmC,CAAC;AAE/DE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,eAAe,EAAET,UAAU,CAACU,WAAW,CAAC;EAChDP,GAAG,CAACM,GAAG,CAAC,kBAAkB,EAAET,UAAU,CAACW,UAAU,CAAC;EAClDR,GAAG,CAACS,IAAI,CAAC,cAAc,EAAE,CAACd,OAAO,CAACe,WAAW,CAAC,EAAEb,UAAU,CAACc,aAAa,CAAC;EACzEX,GAAG,CAACY,GAAG,CAAC,kBAAkB,EAAE,CAACjB,OAAO,CAACe,WAAW,CAAC,EAAEb,UAAU,CAACgB,aAAa,CAAC;AAE9E,CAAC"}},"mtime":1697752512319},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/session.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * The code above is creating, retrieving, and updating sessions.\r\n */\nconst db = require(\"../../../models\");\nconst Session = db.session;\nexports.createSession = (req, res) => {\n  // const session = {\n  //     ...req.body\n  // };\n\n  const session = new Session({\n    title: req.body.title,\n    start: req.body.start,\n    end: req.body.end,\n    status: req.body.status\n  });\n  session.save((err, session) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    res.status(200).send(session);\n  });\n};\nexports.getSessions = (req, res) => {\n  Session.find().exec((err, sessions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!sessions) {\n      return res.status(404).send({\n        message: \"Sessions Not found.\"\n      });\n    }\n    const editedSessions = sessions.map(session => {\n      let id = session._id;\n      return {\n        title: session.title,\n        start: session.start,\n        id: id,\n        end: session.end,\n        status: session.status\n      };\n    });\n    res.status(200).send(editedSessions);\n  });\n};\nexports.getSession = (req, res) => {\n  Session.find().exec((err, sessions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!sessions) {\n      return res.status(404).send({\n        message: \"Session Not found.\"\n      });\n    }\n    res.status(200).send(sessions);\n  });\n};\nexports.updateSession = (req, res) => {\n  const session_updates = {\n    ...req.body\n  };\n  Session.findOneAndUpdate({\n    _id: req.params.id\n  }, session_updates, {\n    new: true\n  }).exec((err, session) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!session) {\n      return res.status(404).send({\n        message: \"Session Not found.\"\n      });\n    }\n    res.status(200).send(session);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJTZXNzaW9uIiwic2Vzc2lvbiIsImV4cG9ydHMiLCJjcmVhdGVTZXNzaW9uIiwicmVxIiwicmVzIiwidGl0bGUiLCJib2R5Iiwic3RhcnQiLCJlbmQiLCJzdGF0dXMiLCJzYXZlIiwiZXJyIiwic2VuZCIsIm1lc3NhZ2UiLCJnZXRTZXNzaW9ucyIsImZpbmQiLCJleGVjIiwic2Vzc2lvbnMiLCJlZGl0ZWRTZXNzaW9ucyIsIm1hcCIsImlkIiwiX2lkIiwiZ2V0U2Vzc2lvbiIsInVwZGF0ZVNlc3Npb24iLCJzZXNzaW9uX3VwZGF0ZXMiLCJmaW5kT25lQW5kVXBkYXRlIiwicGFyYW1zIiwibmV3Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NjaGVkdWxpbmcvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJzZXNzaW9uLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoZSBjb2RlIGFib3ZlIGlzIGNyZWF0aW5nLCByZXRyaWV2aW5nLCBhbmQgdXBkYXRpbmcgc2Vzc2lvbnMuXHJcbiAqL1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHNcIik7XHJcbmNvbnN0IFNlc3Npb24gPSBkYi5zZXNzaW9uO1xyXG5cclxuZXhwb3J0cy5jcmVhdGVTZXNzaW9uID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAvLyBjb25zdCBzZXNzaW9uID0ge1xyXG4gICAgLy8gICAgIC4uLnJlcS5ib2R5XHJcbiAgICAvLyB9O1xyXG5cclxuICAgIGNvbnN0IHNlc3Npb24gPSBuZXcgU2Vzc2lvbih7XHJcblx0XHR0aXRsZTogcmVxLmJvZHkudGl0bGUsXHJcbiAgICAgICAgc3RhcnQ6IHJlcS5ib2R5LnN0YXJ0LFxyXG4gICAgICAgIGVuZDogcmVxLmJvZHkuZW5kLFxyXG4gICAgICAgIHN0YXR1czogcmVxLmJvZHkuc3RhdHVzXHJcblx0fSk7XHJcblxyXG5cclxuXHRzZXNzaW9uLnNhdmUoKGVyciwgc2Vzc2lvbikgPT4ge1xyXG5cdFx0aWYgKGVycikge1xyXG5cdFx0XHRyZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHNlc3Npb24pO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRTZXNzaW9ucyA9IChyZXEsIHJlcykgPT4ge1xyXG5cdFNlc3Npb24uZmluZCgpXHJcbiAgICAuZXhlYygoZXJyLCBzZXNzaW9ucykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2Vzc2lvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTZXNzaW9ucyBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBlZGl0ZWRTZXNzaW9ucyA9IHNlc3Npb25zLm1hcCgoc2Vzc2lvbikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSBzZXNzaW9uLl9pZDtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBzZXNzaW9uLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHNlc3Npb24uc3RhcnQsXHJcbiAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICBlbmQ6IHNlc3Npb24uZW5kLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBzZXNzaW9uLnN0YXR1c1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGVkaXRlZFNlc3Npb25zKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRTZXNzaW9uID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBTZXNzaW9uLmZpbmQoKVxyXG4gICAgLmV4ZWMoKGVyciwgc2Vzc2lvbnMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXNlc3Npb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiU2Vzc2lvbiBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChzZXNzaW9ucyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMudXBkYXRlU2Vzc2lvbiA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2Vzc2lvbl91cGRhdGVzID0ge1xyXG4gICAgICAgIC4uLnJlcS5ib2R5XHJcbiAgICB9O1xyXG5cclxuICAgIFNlc3Npb24uZmluZE9uZUFuZFVwZGF0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9LCBzZXNzaW9uX3VwZGF0ZXMsIHsgbmV3OiB0cnVlIH0pXHJcbiAgICAgICAgLmV4ZWMoKGVyciwgc2Vzc2lvbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlNlc3Npb24gTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChzZXNzaW9uKTtcclxuICAgICAgICB9KTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNyQyxNQUFNQyxPQUFPLEdBQUdGLEVBQUUsQ0FBQ0csT0FBTztBQUUxQkMsT0FBTyxDQUFDQyxhQUFhLEdBQUcsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbEM7RUFDQTtFQUNBOztFQUVBLE1BQU1KLE9BQU8sR0FBRyxJQUFJRCxPQUFPLENBQUM7SUFDOUJNLEtBQUssRUFBRUYsR0FBRyxDQUFDRyxJQUFJLENBQUNELEtBQUs7SUFDZkUsS0FBSyxFQUFFSixHQUFHLENBQUNHLElBQUksQ0FBQ0MsS0FBSztJQUNyQkMsR0FBRyxFQUFFTCxHQUFHLENBQUNHLElBQUksQ0FBQ0UsR0FBRztJQUNqQkMsTUFBTSxFQUFFTixHQUFHLENBQUNHLElBQUksQ0FBQ0c7RUFDeEIsQ0FBQyxDQUFDO0VBR0ZULE9BQU8sQ0FBQ1UsSUFBSSxDQUFDLENBQUNDLEdBQUcsRUFBRVgsT0FBTyxLQUFLO0lBQzlCLElBQUlXLEdBQUcsRUFBRTtNQUNSUCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0csSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRUY7TUFBSSxDQUFDLENBQUM7TUFDdEM7SUFDRDtJQUNNUCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0csSUFBSSxDQUFDWixPQUFPLENBQUM7RUFDcEMsQ0FBQyxDQUFDO0FBQ0gsQ0FBQztBQUVEQyxPQUFPLENBQUNhLFdBQVcsR0FBRyxDQUFDWCxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNuQ0wsT0FBTyxDQUFD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","map":{"version":3,"names":["db","require","Session","session","exports","createSession","req","res","title","body","start","end","status","save","err","send","message","getSessions","find","exec","sessions","editedSessions","map","id","_id","getSession","updateSession","session_updates","findOneAndUpdate","params","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/","sources":["session.controller.js"],"sourcesContent":["/**\r\n * The code above is creating, retrieving, and updating sessions.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst Session = db.session;\r\n\r\nexports.createSession = (req, res) => {\r\n    // const session = {\r\n    //     ...req.body\r\n    // };\r\n\r\n    const session = new Session({\r\n\t\ttitle: req.body.title,\r\n        start: req.body.start,\r\n        end: req.body.end,\r\n        status: req.body.status\r\n\t});\r\n\r\n\r\n\tsession.save((err, session) => {\r\n\t\tif (err) {\r\n\t\t\tres.status(500).send({ message: err });\r\n\t\t\treturn;\r\n\t\t}\r\n        res.status(200).send(session);\r\n\t});\r\n};\r\n\r\nexports.getSessions = (req, res) => {\r\n\tSession.find()\r\n    .exec((err, sessions) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!sessions) {\r\n            return res.status(404).send({ message: \"Sessions Not found.\" });\r\n        }\r\n\r\n        const editedSessions = sessions.map((session) => {\r\n            let id = session._id;\r\n            return {\r\n                title: session.title,\r\n                start: session.start,\r\n                id: id,\r\n                end: session.end,\r\n                status: session.status\r\n            }\r\n        });\r\n\r\n        res.status(200).send(editedSessions);\r\n    });\r\n};\r\n\r\nexports.getSession = (req, res) => {\r\n    Session.find()\r\n    .exec((err, sessions) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!sessions) {\r\n            return res.status(404).send({ message: \"Session Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(sessions);\r\n    });\r\n};\r\n\r\nexports.updateSession = (req, res) => {\r\n    const session_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    Session.findOneAndUpdate({ _id: req.params.id }, session_updates, { new: true })\r\n        .exec((err, session) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!session) {\r\n                return res.status(404).send({ message: \"Session Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(session);\r\n        });\r\n};\r\n"],"mappings":"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"}},"mtime":1704312436627},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/enrollment.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the routes for the enrollment controller.\r\n * The first two routes are for getting enrollments, one for all enrollments and one for enrollments for a specific site.\r\n * The next route is for creating an enrollment.\r\n * The last route is for updating an enrollment.\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/enrollment.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/enrollment/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getEnrollments);\n  app.get(\"/api/enrollment/for-site\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getEnrollmentsForSite);\n  app.get(\"/api/enrollment/for-user\", [authJwt.verifyToken], controller.getEnrollmentsForUser);\n  app.post(\"/api/enrollment\", [authJwt.verifyToken], controller.createEnrollment);\n  app.put(\"/api/enrollment/:id\", [authJwt.verifyToken], controller.updateEnrollment);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTdXBlclVzZXIiLCJnZXRFbnJvbGxtZW50cyIsImdldEVucm9sbG1lbnRzRm9yU2l0ZSIsImdldEVucm9sbG1lbnRzRm9yVXNlciIsInBvc3QiLCJjcmVhdGVFbnJvbGxtZW50IiwicHV0IiwidXBkYXRlRW5yb2xsbWVudCJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zY2hlZHVsaW5nL3JvdXRlcy8iLCJzb3VyY2VzIjpbImVucm9sbG1lbnQucm91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGlzIGNvZGUgaXMgdGhlIHJvdXRlcyBmb3IgdGhlIGVucm9sbG1lbnQgY29udHJvbGxlci5cclxuICogVGhlIGZpcnN0IHR3byByb3V0ZXMgYXJlIGZvciBnZXR0aW5nIGVucm9sbG1lbnRzLCBvbmUgZm9yIGFsbCBlbnJvbGxtZW50cyBhbmQgb25lIGZvciBlbnJvbGxtZW50cyBmb3IgYSBzcGVjaWZpYyBzaXRlLlxyXG4gKiBUaGUgbmV4dCByb3V0ZSBpcyBmb3IgY3JlYXRpbmcgYW4gZW5yb2xsbWVudC5cclxuICogVGhlIGxhc3Qgcm91dGUgaXMgZm9yIHVwZGF0aW5nIGFuIGVucm9sbG1lbnQuXHJcbiAqL1xyXG5jb25zdCB7IGF1dGhKd3QgfSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9taWRkbGV3YXJlc1wiKTtcclxuY29uc3QgY29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy9lbnJvbGxtZW50LmNvbnRyb2xsZXJcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkge1xyXG4gIGFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcclxuICAgIHJlcy5oZWFkZXIoXHJcbiAgICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLFxyXG4gICAgICBcIngtYWNjZXNzLXRva2VuLCBPcmlnaW4sIENvbnRlbnQtVHlwZSwgQWNjZXB0XCJcclxuICAgICk7XHJcbiAgICBuZXh0KCk7XHJcbiAgfSk7XHJcblxyXG4gIGFwcC5nZXQoXCIvYXBpL2Vucm9sbG1lbnQvXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU3VwZXJVc2VyXSwgY29udHJvbGxlci5nZXRFbnJvbGxtZW50cyk7XHJcbiAgYXBwLmdldChcIi9hcGkvZW5yb2xsbWVudC9mb3Itc2l0ZVwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc1N1cGVyVXNlcl0sIGNvbnRyb2xsZXIuZ2V0RW5yb2xsbWVudHNGb3JTaXRlKTtcclxuICBhcHAuZ2V0KFwiL2FwaS9lbnJvbGxtZW50L2Zvci11c2VyXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuXSwgY29udHJvbGxlci5nZXRFbnJvbGxtZW50c0ZvclVzZXIpO1xyXG4gIGFwcC5wb3N0KFwiL2FwaS9lbnJvbGxtZW50XCIsIFthdXRoSnd0LnZlcmlmeVRva2VuXSwgY29udHJvbGxlci5jcmVhdGVFbnJvbGxtZW50KTtcclxuICBhcHAucHV0KFwiL2FwaS9lbnJvbGxtZW50LzppZFwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbl0sIGNvbnRyb2xsZXIudXBkYXRlRW5yb2xsbWVudCk7XHJcblxyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ25ELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLHNDQUFzQyxDQUFDO0FBRWxFRSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFTQyxHQUFHLEVBQUU7RUFDN0JBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFVBQVNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDL0JELEdBQUcsQ0FBQ0UsTUFBTSxDQUNSLDhCQUE4QixFQUM5Qiw4Q0FDRixDQUFDO0lBQ0RELElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDO0VBRUZKLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLGtCQUFrQixFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxFQUFFWixPQUFPLENBQUNhLFdBQVcsQ0FBQyxFQUFFWCxVQUFVLENBQUNZLGNBQWMsQ0FBQztFQUNsR1QsR0FBRyxDQUFDTSxHQUFHLENBQUMsMEJBQTBCLEVBQUUsQ0FBQ1gsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2EsV0FBVyxDQUFDLEVBQUVYLFVBQVUsQ0FBQ2EscUJBQXFCLENBQUM7RUFDakhWLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLDBCQUEwQixFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxDQUFDLEVBQUVWLFVBQVUsQ0FBQ2MscUJBQXFCLENBQUM7RUFDNUZYLEdBQUcsQ0FBQ1ksSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUNqQixPQUFPLENBQUNZLFdBQVcsQ0FBQyxFQUFFVixVQUFVLENBQUNnQixnQkFBZ0IsQ0FBQztFQUMvRWIsR0FBRyxDQUFDYyxHQUFHLENBQUMscUJBQXFCLEVBQUUsQ0FBQ25CLE9BQU8sQ0FBQ1ksV0FBVyxDQUFDLEVBQUVWLFVBQVUsQ0FBQ2tCLGdCQUFnQixDQUFDO0FBRXBGLENBQUMifQ==","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSuperUser","getEnrollments","getEnrollmentsForSite","getEnrollmentsForUser","post","createEnrollment","put","updateEnrollment"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/","sources":["enrollment.routes.js"],"sourcesContent":["/**\r\n * This code is the routes for the enrollment controller.\r\n * The first two routes are for getting enrollments, one for all enrollments and one for enrollments for a specific site.\r\n * The next route is for creating an enrollment.\r\n * The last route is for updating an enrollment.\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/enrollment.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.get(\"/api/enrollment/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getEnrollments);\r\n  app.get(\"/api/enrollment/for-site\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getEnrollmentsForSite);\r\n  app.get(\"/api/enrollment/for-user\", [authJwt.verifyToken], controller.getEnrollmentsForUser);\r\n  app.post(\"/api/enrollment\", [authJwt.verifyToken], controller.createEnrollment);\r\n  app.put(\"/api/enrollment/:id\", [authJwt.verifyToken], controller.updateEnrollment);\r\n\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,sCAAsC,CAAC;AAElEE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,kBAAkB,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,cAAc,CAAC;EAClGT,GAAG,CAACM,GAAG,CAAC,0BAA0B,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACa,qBAAqB,CAAC;EACjHV,GAAG,CAACM,GAAG,CAAC,0BAA0B,EAAE,CAACX,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACc,qBAAqB,CAAC;EAC5FX,GAAG,CAACY,IAAI,CAAC,iBAAiB,EAAE,CAACjB,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACgB,gBAAgB,CAAC;EAC/Eb,GAAG,CAACc,GAAG,CAAC,qBAAqB,EAAE,CAACnB,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACkB,gBAAgB,CAAC;AAEpF,CAAC"}},"mtime":1697752512319},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/enrollment.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is creating an enrollment, updating an enrollment, and getting enrollments.\r\n */\nconst db = require(\"../../../models\");\nconst siteHelper = require(\"../../../helper/site\");\nconst Enrollment = db.enrollment;\nconst User = db.user;\nconst Site = db.site;\nexports.createEnrollment = (req, res) => {\n  const enrollment = new Enrollment({\n    user_id: req.body.user_id,\n    product_id: req.body.product_id,\n    enrolled: req.body.enrolled\n  });\n  enrollment.save((err, enrollment) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    User.findByIdAndUpdate(req.body.user_id, {\n      $push: {\n        enrollment: enrollment\n      }\n    }).exec(err => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      res.status(200).send(enrollment);\n    });\n  });\n};\nexports.getEnrollments = (req, res) => {\n  Enrollment.find().exec((err, enrollments) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!enrollments) {\n      return res.status(404).send({\n        message: \"Enrollment Not found.\"\n      });\n    }\n    res.status(200).send(enrollments);\n  });\n};\nexports.getEnrollmentsForSite = (req, res) => {\n  const site_name = siteHelper.getSiteName(req);\n  Site.findOne({\n    domain: site_name\n  }).exec((err, site) => {\n    if (err || !site) {\n      return res.status(404).send({\n        message: \"Site not found.\"\n      });\n    }\n    Enrollment.find({\n      site_id: site._id\n    }).exec((err, enrollments) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      if (!enrollments) {\n        return res.status(404).send({\n          message: \"Enrollment Not found.\"\n        });\n      }\n      res.status(200).send(enrollments);\n    });\n  });\n};\nexports.getEnrollment = (req, res) => {\n  Enrollment.find().exec((err, enrollments) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!enrollments) {\n      return res.status(404).send({\n        message: \"Enrollment Not found.\"\n      });\n    }\n    res.status(200).send(enrollments);\n  });\n};\nexports.getEnrollmentsForUser = (req, res) => {\n  Enrollment.find({\n    user_id: req.userId\n  }).exec((err, enrollments) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!enrollments) {\n      return res.status(404).send({\n        message: \"Enrollment Not found.\"\n      });\n    }\n    res.status(200).send(enrollments);\n  });\n};\nexports.updateEnrollment = (req, res) => {\n  const enrollment_updates = {\n    ...req.body\n  };\n  Enrollment.findOneAndUpdate({\n    _id: req.params.id\n  }, enrollment_updates, {\n    new: true\n  }).exec((err, enrollment) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!enrollment) {\n      return res.status(404).send({\n        message: \"Enrollment Not found.\"\n      });\n    }\n    res.status(200).send(enrollment);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJzaXRlSGVscGVyIiwiRW5yb2xsbWVudCIsImVucm9sbG1lbnQiLCJVc2VyIiwidXNlciIsIlNpdGUiLCJzaXRlIiwiZXhwb3J0cyIsImNyZWF0ZUVucm9sbG1lbnQiLCJyZXEiLCJyZXMiLCJ1c2VyX2lkIiwiYm9keSIsInByb2R1Y3RfaWQiLCJlbnJvbGxlZCIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImZpbmRCeUlkQW5kVXBkYXRlIiwiJHB1c2giLCJleGVjIiwiZ2V0RW5yb2xsbWVudHMiLCJmaW5kIiwiZW5yb2xsbWVudHMiLCJnZXRFbnJvbGxtZW50c0ZvclNpdGUiLCJzaXRlX25hbWUiLCJnZXRTaXRlTmFtZSIsImZpbmRPbmUiLCJkb21haW4iLCJzaXRlX2lkIiwiX2lkIiwiZ2V0RW5yb2xsbWVudCIsImdldEVucm9sbG1lbnRzRm9yVXNlciIsInVzZXJJZCIsInVwZGF0ZUVucm9sbG1lbnQiLCJlbnJvbGxtZW50X3VwZGF0ZXMiLCJmaW5kT25lQW5kVXBkYXRlIiwicGFyYW1zIiwiaWQiLCJuZXciXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2NoZWR1bGluZy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImVucm9sbG1lbnQuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhpcyBjb2RlIGlzIGNyZWF0aW5nIGFuIGVucm9sbG1lbnQsIHVwZGF0aW5nIGFuIGVucm9sbG1lbnQsIGFuZCBnZXR0aW5nIGVucm9sbG1lbnRzLlxyXG4gKi9cclxuY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzXCIpO1xyXG5jb25zdCBzaXRlSGVscGVyID0gcmVxdWlyZShcIi4uLy4uLy4uL2hlbHBlci9zaXRlXCIpO1xyXG5cclxuY29uc3QgRW5yb2xsbWVudCA9IGRiLmVucm9sbG1lbnQ7XHJcbmNvbnN0IFVzZXIgPSBkYi51c2VyO1xyXG5jb25zdCBTaXRlID0gZGIuc2l0ZTtcclxuZXhwb3J0cy5jcmVhdGVFbnJvbGxtZW50ID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBlbnJvbGxtZW50ID0gbmV3IEVucm9sbG1lbnQoe1xyXG4gICAgICAgIHVzZXJfaWQ6IHJlcS5ib2R5LnVzZXJfaWQsXHJcbiAgICAgICAgcHJvZHVjdF9pZDogcmVxLmJvZHkucHJvZHVjdF9pZCxcclxuICAgICAgICBlbnJvbGxlZDogcmVxLmJvZHkuZW5yb2xsZWRcclxuICAgIH0pO1xyXG5cclxuICAgIGVucm9sbG1lbnQuc2F2ZSgoZXJyLCBlbnJvbGxtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS5ib2R5LnVzZXJfaWQsIHsgJHB1c2g6IHsgZW5yb2xsbWVudDogZW5yb2xsbWVudCB9IH0pXHJcbiAgICAgICAgICAgIC5leGVjKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZW5yb2xsbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRFbnJvbGxtZW50cyA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgRW5yb2xsbWVudC5maW5kKClcclxuICAgICAgICAuZXhlYygoZXJyLCBlbnJvbGxtZW50cykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFlbnJvbGxtZW50cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJFbnJvbGxtZW50IE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZW5yb2xsbWVudHMpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRFbnJvbGxtZW50c0ZvclNpdGUgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcclxuXHJcbiAgICBTaXRlLmZpbmRPbmUoeyBkb21haW46IHNpdGVfbmFtZSB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcclxuICAgICAgICBpZiAoZXJyIHx8ICFzaXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiU2l0ZSBub3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEVucm9sbG1lbnQuZmluZCh7IHNpdGVfaWQ6IHNpdGUuX2lkIH0pXHJcbiAgICAgICAgICAgIC5leGVjKChlcnIsIGVucm9sbG1lbnRzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZW5yb2xsbWVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIkVucm9sbG1lbnQgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGVucm9sbG1lbnRzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0RW5yb2xsbWVudCA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgRW5yb2xsbWVudC5maW5kKClcclxuICAgICAgICAuZXhlYygoZXJyLCBlbnJvbGxtZW50cykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFlbnJvbGxtZW50cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJFbnJvbGxtZW50IE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZW5yb2xsbWVudHMpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRFbnJvbGxtZW50c0ZvclVzZXIgPSAocmVxLCByZXMpID0+IHtcclxuICAgIEVucm9sbG1lbnQuZmluZCh7IHVzZXJfaWQ6IHJlcS51c2VySWR9KVxyXG4gICAgICAgIC5leGVjKChlcnIsIGVucm9sbG1lbnRzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWVucm9sbG1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIkVucm9sbG1lbnQgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChlbnJvbGxtZW50cyk7XHJcbiAgICAgICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLnVwZGF0ZUVucm9sbG1lbnQgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IGVucm9sbG1lbnRfdXBkYXRlcyA9IHtcclxuICAgICAgICAuLi5yZXEuYm9keVxyXG4gICAgfTtcclxuXHJcbiAgICBFbnJvbGxtZW50LmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgZW5yb2xsbWVudF91cGRhdGVzLCB7IG5ldzogdHJ1ZSB9KVxyXG4gICAgICAgIC5leGVjKChlcnIsIGVucm9sbG1lbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghZW5yb2xsbWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJFbnJvbGxtZW50IE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoZW5yb2xsbWVudCk7XHJcbiAgICAg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","map":{"version":3,"names":["db","require","siteHelper","Enrollment","enrollment","User","user","Site","site","exports","createEnrollment","req","res","user_id","body","product_id","enrolled","save","err","status","send","message","findByIdAndUpdate","$push","exec","getEnrollments","find","enrollments","getEnrollmentsForSite","site_name","getSiteName","findOne","domain","site_id","_id","getEnrollment","getEnrollmentsForUser","userId","updateEnrollment","enrollment_updates","findOneAndUpdate","params","id","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/","sources":["enrollment.controller.js"],"sourcesContent":["/**\r\n * This code is creating an enrollment, updating an enrollment, and getting enrollments.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst siteHelper = require(\"../../../helper/site\");\r\n\r\nconst Enrollment = db.enrollment;\r\nconst User = db.user;\r\nconst Site = db.site;\r\nexports.createEnrollment = (req, res) => {\r\n    const enrollment = new Enrollment({\r\n        user_id: req.body.user_id,\r\n        product_id: req.body.product_id,\r\n        enrolled: req.body.enrolled\r\n    });\r\n\r\n    enrollment.save((err, enrollment) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n        User.findByIdAndUpdate(req.body.user_id, { $push: { enrollment: enrollment } })\r\n            .exec(err => {\r\n                if (err) {\r\n                    res.status(500).send({ message: err });\r\n                    return;\r\n                }\r\n                res.status(200).send(enrollment);\r\n            });\r\n    });\r\n\r\n};\r\n\r\nexports.getEnrollments = (req, res) => {\r\n    Enrollment.find()\r\n        .exec((err, enrollments) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!enrollments) {\r\n                return res.status(404).send({ message: \"Enrollment Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(enrollments);\r\n        });\r\n};\r\n\r\nexports.getEnrollmentsForSite = (req, res) => {\r\n    const site_name = siteHelper.getSiteName(req);\r\n\r\n    Site.findOne({ domain: site_name }).exec((err, site) => {\r\n        if (err || !site) {\r\n            return res.status(404).send({ message: \"Site not found.\" });\r\n        }\r\n        Enrollment.find({ site_id: site._id })\r\n            .exec((err, enrollments) => {\r\n                if (err) {\r\n                    res.status(500).send({ message: err });\r\n                    return;\r\n                }\r\n\r\n                if (!enrollments) {\r\n                    return res.status(404).send({ message: \"Enrollment Not found.\" });\r\n                }\r\n\r\n                res.status(200).send(enrollments);\r\n            });\r\n    });\r\n};\r\n\r\nexports.getEnrollment = (req, res) => {\r\n    Enrollment.find()\r\n        .exec((err, enrollments) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!enrollments) {\r\n                return res.status(404).send({ message: \"Enrollment Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(enrollments);\r\n        });\r\n};\r\n\r\nexports.getEnrollmentsForUser = (req, res) => {\r\n    Enrollment.find({ user_id: req.userId})\r\n        .exec((err, enrollments) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!enrollments) {\r\n                return res.status(404).send({ message: \"Enrollment Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(enrollments);\r\n        });\r\n};\r\n\r\nexports.updateEnrollment = (req, res) => {\r\n    const enrollment_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    Enrollment.findOneAndUpdate({ _id: req.params.id }, enrollment_updates, { new: true })\r\n        .exec((err, enrollment) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!enrollment) {\r\n                return res.status(404).send({ message: \"Enrollment Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(enrollment);\r\n        });\r\n};\r\n"],"mappings":"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"}},"mtime":1697752512315},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/attendance.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the routes for the attendance controller.\r\n * The routes are:\r\n\r\nGET /api/attendance\r\nGET /api/attendance/:id\r\nPOST /api/attendance\r\nPUT /api/attendance/:id\r\n */\n\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/attendance.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/attendance/\", controller.getAttendances);\n  app.get(\"/api/attendance/:id\", controller.getAttendance);\n  app.post(\"/api/attendance\", [authJwt.verifyToken], controller.createAttendance);\n  app.put(\"/api/attendance/:id\", [authJwt.verifyToken], controller.updateAttendance);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsImdldEF0dGVuZGFuY2VzIiwiZ2V0QXR0ZW5kYW5jZSIsInBvc3QiLCJ2ZXJpZnlUb2tlbiIsImNyZWF0ZUF0dGVuZGFuY2UiLCJwdXQiLCJ1cGRhdGVBdHRlbmRhbmNlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NjaGVkdWxpbmcvcm91dGVzLyIsInNvdXJjZXMiOlsiYXR0ZW5kYW5jZS5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgY29kZSBpcyB0aGUgcm91dGVzIGZvciB0aGUgYXR0ZW5kYW5jZSBjb250cm9sbGVyLlxyXG4gKiBUaGUgcm91dGVzIGFyZTpcclxuXHJcbkdFVCAvYXBpL2F0dGVuZGFuY2VcclxuR0VUIC9hcGkvYXR0ZW5kYW5jZS86aWRcclxuUE9TVCAvYXBpL2F0dGVuZGFuY2VcclxuUFVUIC9hcGkvYXR0ZW5kYW5jZS86aWRcclxuICovXHJcblxyXG5jb25zdCB7IGF1dGhKd3QgfSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9taWRkbGV3YXJlc1wiKTtcclxuY29uc3QgY29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy9hdHRlbmRhbmNlLmNvbnRyb2xsZXJcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkge1xyXG4gIGFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcclxuICAgIHJlcy5oZWFkZXIoXHJcbiAgICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLFxyXG4gICAgICBcIngtYWNjZXNzLXRva2VuLCBPcmlnaW4sIENvbnRlbnQtVHlwZSwgQWNjZXB0XCJcclxuICAgICk7XHJcbiAgICBuZXh0KCk7XHJcbiAgfSk7XHJcblxyXG4gIGFwcC5nZXQoXCIvYXBpL2F0dGVuZGFuY2UvXCIsIGNvbnRyb2xsZXIuZ2V0QXR0ZW5kYW5jZXMpO1xyXG4gIGFwcC5nZXQoXCIvYXBpL2F0dGVuZGFuY2UvOmlkXCIsIGNvbnRyb2xsZXIuZ2V0QXR0ZW5kYW5jZSk7XHJcbiAgYXBwLnBvc3QoXCIvYXBpL2F0dGVuZGFuY2VcIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW5dLCBjb250cm9sbGVyLmNyZWF0ZUF0dGVuZGFuY2UpO1xyXG4gIGFwcC5wdXQoXCIvYXBpL2F0dGVuZGFuY2UvOmlkXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuXSwgY29udHJvbGxlci51cGRhdGVBdHRlbmRhbmNlKTtcclxuXHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtFQUFFQTtBQUFRLENBQUMsR0FBR0MsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQ25ELE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLHNDQUFzQyxDQUFDO0FBRWxFRSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFTQyxHQUFHLEVBQUU7RUFDN0JBLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLFVBQVNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDL0JELEdBQUcsQ0FBQ0UsTUFBTSxDQUNSLDhCQUE4QixFQUM5Qiw4Q0FDRixDQUFDO0lBQ0RELElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxDQUFDO0VBRUZKLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLGtCQUFrQixFQUFFVCxVQUFVLENBQUNVLGNBQWMsQ0FBQztFQUN0RFAsR0FBRyxDQUFDTSxHQUFHLENBQUMscUJBQXFCLEVBQUVULFVBQVUsQ0FBQ1csYUFBYSxDQUFDO0VBQ3hEUixHQUFHLENBQUNTLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDZCxPQUFPLENBQUNlLFdBQVcsQ0FBQyxFQUFFYixVQUFVLENBQUNjLGdCQUFnQixDQUFDO0VBQy9FWCxHQUFHLENBQUNZLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDakIsT0FBTyxDQUFDZSxXQUFXLENBQUMsRUFBRWIsVUFBVSxDQUFDZ0IsZ0JBQWdCLENBQUM7QUFFcEYsQ0FBQyJ9","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","getAttendances","getAttendance","post","verifyToken","createAttendance","put","updateAttendance"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/routes/","sources":["attendance.routes.js"],"sourcesContent":["/**\r\n * This code is the routes for the attendance controller.\r\n * The routes are:\r\n\r\nGET /api/attendance\r\nGET /api/attendance/:id\r\nPOST /api/attendance\r\nPUT /api/attendance/:id\r\n */\r\n\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/attendance.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.get(\"/api/attendance/\", controller.getAttendances);\r\n  app.get(\"/api/attendance/:id\", controller.getAttendance);\r\n  app.post(\"/api/attendance\", [authJwt.verifyToken], controller.createAttendance);\r\n  app.put(\"/api/attendance/:id\", [authJwt.verifyToken], controller.updateAttendance);\r\n\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,sCAAsC,CAAC;AAElEE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,kBAAkB,EAAET,UAAU,CAACU,cAAc,CAAC;EACtDP,GAAG,CAACM,GAAG,CAAC,qBAAqB,EAAET,UAAU,CAACW,aAAa,CAAC;EACxDR,GAAG,CAACS,IAAI,CAAC,iBAAiB,EAAE,CAACd,OAAO,CAACe,WAAW,CAAC,EAAEb,UAAU,CAACc,gBAAgB,CAAC;EAC/EX,GAAG,CAACY,GAAG,CAAC,qBAAqB,EAAE,CAACjB,OAAO,CAACe,WAAW,CAAC,EAAEb,UAAU,CAACgB,gBAAgB,CAAC;AAEpF,CAAC"}},"mtime":1697752512319},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/attendance.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is creating an attendance model, which requires a user_id, session_id, and attendance_start.\r\n * It then saves this model to the database.\r\n * There are also functions to get all attendances or a specific attendance, as well as to update an attendance.\r\n */\nconst db = require(\"../../../models\");\nconst Attendance = db.attendance;\nexports.createAttendance = (req, res) => {\n  const attendance = new Attendance({\n    user_id: req.body.user_id,\n    session_id: req.body.session_id,\n    attendance_start: req.body.attendance_start\n  });\n  attendance.save((err, attendance) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n  });\n};\nexports.getAttendances = (req, res) => {\n  Attendance.find().exec((err, attendances) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!attendances) {\n      return res.status(404).send({\n        message: \"Attendances Not found.\"\n      });\n    }\n    res.status(200).send(attendances);\n  });\n};\nexports.getAttendance = (req, res) => {\n  Attendance.find().exec((err, attendances) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!attendances) {\n      return res.status(404).send({\n        message: \"Attendance Not found.\"\n      });\n    }\n    res.status(200).send(attendances);\n  });\n};\nexports.updateAttendance = (req, res) => {\n  const attendance_updates = {\n    ...req.body\n  };\n  Attendance.findOneAndUpdate({\n    _id: req.params.id\n  }, attendance_updates, {\n    new: true\n  }).exec((err, attendance) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!attendance) {\n      return res.status(404).send({\n        message: \"Attendance Not found.\"\n      });\n    }\n    res.status(200).send(attendance);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJBdHRlbmRhbmNlIiwiYXR0ZW5kYW5jZSIsImV4cG9ydHMiLCJjcmVhdGVBdHRlbmRhbmNlIiwicmVxIiwicmVzIiwidXNlcl9pZCIsImJvZHkiLCJzZXNzaW9uX2lkIiwiYXR0ZW5kYW5jZV9zdGFydCIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImdldEF0dGVuZGFuY2VzIiwiZmluZCIsImV4ZWMiLCJhdHRlbmRhbmNlcyIsImdldEF0dGVuZGFuY2UiLCJ1cGRhdGVBdHRlbmRhbmNlIiwiYXR0ZW5kYW5jZV91cGRhdGVzIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsInBhcmFtcyIsImlkIiwibmV3Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL3NjaGVkdWxpbmcvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJhdHRlbmRhbmNlLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgY29kZSBpcyBjcmVhdGluZyBhbiBhdHRlbmRhbmNlIG1vZGVsLCB3aGljaCByZXF1aXJlcyBhIHVzZXJfaWQsIHNlc3Npb25faWQsIGFuZCBhdHRlbmRhbmNlX3N0YXJ0LlxyXG4gKiBJdCB0aGVuIHNhdmVzIHRoaXMgbW9kZWwgdG8gdGhlIGRhdGFiYXNlLlxyXG4gKiBUaGVyZSBhcmUgYWxzbyBmdW5jdGlvbnMgdG8gZ2V0IGFsbCBhdHRlbmRhbmNlcyBvciBhIHNwZWNpZmljIGF0dGVuZGFuY2UsIGFzIHdlbGwgYXMgdG8gdXBkYXRlIGFuIGF0dGVuZGFuY2UuXHJcbiAqL1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHNcIik7XHJcbmNvbnN0IEF0dGVuZGFuY2UgPSBkYi5hdHRlbmRhbmNlO1xyXG5cclxuZXhwb3J0cy5jcmVhdGVBdHRlbmRhbmNlID0gKHJlcSwgcmVzKSA9PiB7XHJcblx0Y29uc3QgYXR0ZW5kYW5jZSA9IG5ldyBBdHRlbmRhbmNlKHtcclxuXHRcdHVzZXJfaWQ6IHJlcS5ib2R5LnVzZXJfaWQsXHJcblx0XHRzZXNzaW9uX2lkOiByZXEuYm9keS5zZXNzaW9uX2lkLFxyXG5cdFx0YXR0ZW5kYW5jZV9zdGFydDogcmVxLmJvZHkuYXR0ZW5kYW5jZV9zdGFydCxcclxuXHR9KTtcclxuXHJcblx0YXR0ZW5kYW5jZS5zYXZlKChlcnIsIGF0dGVuZGFuY2UpID0+IHtcclxuXHRcdGlmIChlcnIpIHtcclxuXHRcdFx0cmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0QXR0ZW5kYW5jZXMgPSAocmVxLCByZXMpID0+IHtcclxuXHRBdHRlbmRhbmNlLmZpbmQoKVxyXG4gICAgLmV4ZWMoKGVyciwgYXR0ZW5kYW5jZXMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWF0dGVuZGFuY2VzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiQXR0ZW5kYW5jZXMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoYXR0ZW5kYW5jZXMpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldEF0dGVuZGFuY2UgPSAocmVxLCByZXMpID0+IHtcclxuICAgIEF0dGVuZGFuY2UuZmluZCgpXHJcbiAgICAuZXhlYygoZXJyLCBhdHRlbmRhbmNlcykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYXR0ZW5kYW5jZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJBdHRlbmRhbmNlIE5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGF0dGVuZGFuY2VzKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy51cGRhdGVBdHRlbmRhbmNlID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBhdHRlbmRhbmNlX3VwZGF0ZXMgPSB7XHJcbiAgICAgICAgLi4ucmVxLmJvZHlcclxuICAgIH07XHJcblxyXG4gICAgQXR0ZW5kYW5jZS5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIGF0dGVuZGFuY2VfdXBkYXRlcywgeyBuZXc6IHRydWUgfSlcclxuICAgICAgICAuZXhlYygoZXJyLCBhdHRlbmRhbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWF0dGVuZGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiQXR0ZW5kYW5jZSBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGF0dGVuZGFuY2UpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNyQyxNQUFNQyxVQUFVLEdBQUdGLEVBQUUsQ0FBQ0csVUFBVTtBQUVoQ0MsT0FBTyxDQUFDQyxnQkFBZ0IsR0FBRyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN4QyxNQUFNSixVQUFVLEdBQUcsSUFBSUQsVUFBVSxDQUFDO0lBQ2pDTSxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0csSUFBSSxDQUFDRCxPQUFPO0lBQ3pCRSxVQUFVLEVBQUVKLEdBQUcsQ0FBQ0csSUFBSSxDQUFDQyxVQUFVO0lBQy9CQyxnQkFBZ0IsRUFBRUwsR0FBRyxDQUFDRyxJQUFJLENBQUNFO0VBQzVCLENBQUMsQ0FBQztFQUVGUixVQUFVLENBQUNTLElBQUksQ0FBQyxDQUFDQyxHQUFHLEVBQUVWLFVBQVUsS0FBSztJQUNwQyxJQUFJVSxHQUFHLEVBQUU7TUFDUk4sR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUVIO01BQUksQ0FBQyxDQUFDO01BQ3RDO0lBQ0Q7RUFDRCxDQUFDLENBQUM7QUFDSCxDQUFDO0FBRURULE9BQU8sQ0FBQ2EsY0FBYyxHQUFHLENBQUNYLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDTCxVQUFVLENBQUNnQixJQUFJLENBQUMsQ0FBQyxDQUNiQyxJQUFJLENBQUMsQ0FBQ04sR0FBRyxFQUFFTyxXQUFXLEtBQUs7SUFDeEIsSUFBSVAsR0FBRyxFQUFFO01BQ0xOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFSDtNQUFJLENBQUMsQ0FBQztNQUN0QztJQUNKO0lBRUEsSUFBSSxDQUFDTyxXQUFXLEVBQUU7TUFDZCxPQUFPYixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUF5QixDQUFDLENBQUM7SUFDdEU7SUFFQVQsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0ssV0FBVyxDQUFDO0VBQ3JDLENBQUMsQ0FBQztBQUNOLENBQUM7QUFFRGhCLE9BQU8sQ0FBQ2lCLGFBQWEsR0FBRyxDQUFDZixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNsQ0wsVUFBVSxDQUFDZ0IsSUFBSSxDQUFDLENBQUMsQ0FDaEJDLElBQUksQ0FBQyxDQUFDTixHQUFHLEVBQUVPLFdBQVcsS0FBSztJQUN4QixJQUFJUCxHQUFHLEVBQUU7TUFDTE4sR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUVIO01BQUksQ0FBQyxDQUFDO01BQ3RDO0lBQ0o7SUFFQSxJQUFJLENBQUNPLFdBQVcsRUFBRTtNQUNkLE9BQU9iLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFO01BQXdCLENBQUMsQ0FBQztJQUNyRTtJQUVBVCxHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSyxXQUFXLENBQUM7RUFDckMsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVEaEIsT0FBTyxDQUFDa0IsZ0JBQWdCLEdBQUcsQ0FBQ2hCLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3JDLE1BQU1nQixrQkFBa0IsR0FBRztJQUN2QixHQUFHakIsR0FBRyxDQUFDRztFQUNYLENBQUM7RUFFRFAsVUFBVSxDQUFDc0IsZ0JBQWdCLENBQUM7SUFBRUMsR0FBRyxFQUFFbkIsR0FBRyxDQUFDb0IsTUFBTSxDQUFDQztFQUFHLENBQUMsRUFBRUosa0JBQWtCLEVBQUU7SUFBRUssR0FBRyxFQUFFO0VBQUssQ0FBQyxDQUFDLENBQ2pGVCxJQUFJLENBQUMsQ0FBQ04sR0FBRyxFQUFFVixVQUFVLEtBQUs7SUFDdkIsSUFBSVUsR0FBRyxFQUFFO01BQ0xOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsT0FBTyxFQUFFSDtNQUFJLENBQUMsQ0FBQztNQUN0QztJQUNKO0lBRUEsSUFBSSxDQUFDVixVQUFVLEVBQUU7TUFDYixPQUFPSSxHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLE9BQU8sRUFBRTtNQUF3QixDQUFDLENBQUM7SUFDckU7SUFFQVQsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ1osVUFBVSxDQUFDO0VBQ3BDLENBQUMsQ0FBQztBQUNWLENBQUMifQ==","map":{"version":3,"names":["db","require","Attendance","attendance","exports","createAttendance","req","res","user_id","body","session_id","attendance_start","save","err","status","send","message","getAttendances","find","exec","attendances","getAttendance","updateAttendance","attendance_updates","findOneAndUpdate","_id","params","id","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/scheduling/controllers/","sources":["attendance.controller.js"],"sourcesContent":["/**\r\n * This code is creating an attendance model, which requires a user_id, session_id, and attendance_start.\r\n * It then saves this model to the database.\r\n * There are also functions to get all attendances or a specific attendance, as well as to update an attendance.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst Attendance = db.attendance;\r\n\r\nexports.createAttendance = (req, res) => {\r\n\tconst attendance = new Attendance({\r\n\t\tuser_id: req.body.user_id,\r\n\t\tsession_id: req.body.session_id,\r\n\t\tattendance_start: req.body.attendance_start,\r\n\t});\r\n\r\n\tattendance.save((err, attendance) => {\r\n\t\tif (err) {\r\n\t\t\tres.status(500).send({ message: err });\r\n\t\t\treturn;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexports.getAttendances = (req, res) => {\r\n\tAttendance.find()\r\n    .exec((err, attendances) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!attendances) {\r\n            return res.status(404).send({ message: \"Attendances Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(attendances);\r\n    });\r\n};\r\n\r\nexports.getAttendance = (req, res) => {\r\n    Attendance.find()\r\n    .exec((err, attendances) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!attendances) {\r\n            return res.status(404).send({ message: \"Attendance Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(attendances);\r\n    });\r\n};\r\n\r\nexports.updateAttendance = (req, res) => {\r\n    const attendance_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    Attendance.findOneAndUpdate({ _id: req.params.id }, attendance_updates, { new: true })\r\n        .exec((err, attendance) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!attendance) {\r\n                return res.status(404).send({ message: \"Attendance Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(attendance);\r\n        });\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,MAAMA,EAAE,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AACrC,MAAMC,UAAU,GAAGF,EAAE,CAACG,UAAU;AAEhCC,OAAO,CAACC,gBAAgB,GAAG,CAACC,GAAG,EAAEC,GAAG,KAAK;EACxC,MAAMJ,UAAU,GAAG,IAAID,UAAU,CAAC;IACjCM,OAAO,EAAEF,GAAG,CAACG,IAAI,CAACD,OAAO;IACzBE,UAAU,EAAEJ,GAAG,CAACG,IAAI,CAACC,UAAU;IAC/BC,gBAAgB,EAAEL,GAAG,CAACG,IAAI,CAACE;EAC5B,CAAC,CAAC;EAEFR,UAAU,CAACS,IAAI,CAAC,CAACC,GAAG,EAAEV,UAAU,KAAK;IACpC,IAAIU,GAAG,EAAE;MACRN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACD;EACD,CAAC,CAAC;AACH,CAAC;AAEDT,OAAO,CAACa,cAAc,GAAG,CAACX,GAAG,EAAEC,GAAG,KAAK;EACtCL,UAAU,CAACgB,IAAI,CAAC,CAAC,CACbC,IAAI,CAAC,CAACN,GAAG,EAAEO,WAAW,KAAK;IACxB,IAAIP,GAAG,EAAE;MACLN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACJ;IAEA,IAAI,CAACO,WAAW,EAAE;MACd,OAAOb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAyB,CAAC,CAAC;IACtE;IAEAT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACK,WAAW,CAAC;EACrC,CAAC,CAAC;AACN,CAAC;AAEDhB,OAAO,CAACiB,aAAa,GAAG,CAACf,GAAG,EAAEC,GAAG,KAAK;EAClCL,UAAU,CAACgB,IAAI,CAAC,CAAC,CAChBC,IAAI,CAAC,CAACN,GAAG,EAAEO,WAAW,KAAK;IACxB,IAAIP,GAAG,EAAE;MACLN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACJ;IAEA,IAAI,CAACO,WAAW,EAAE;MACd,OAAOb,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAwB,CAAC,CAAC;IACrE;IAEAT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACK,WAAW,CAAC;EACrC,CAAC,CAAC;AACN,CAAC;AAEDhB,OAAO,CAACkB,gBAAgB,GAAG,CAAChB,GAAG,EAAEC,GAAG,KAAK;EACrC,MAAMgB,kBAAkB,GAAG;IACvB,GAAGjB,GAAG,CAACG;EACX,CAAC;EAEDP,UAAU,CAACsB,gBAAgB,CAAC;IAAEC,GAAG,EAAEnB,GAAG,CAACoB,MAAM,CAACC;EAAG,CAAC,EAAEJ,kBAAkB,EAAE;IAAEK,GAAG,EAAE;EAAK,CAAC,CAAC,CACjFT,IAAI,CAAC,CAACN,GAAG,EAAEV,UAAU,KAAK;IACvB,IAAIU,GAAG,EAAE;MACLN,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEH;MAAI,CAAC,CAAC;MACtC;IACJ;IAEA,IAAI,CAACV,UAAU,EAAE;MACb,OAAOI,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAwB,CAAC,CAAC;IACrE;IAEAT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACZ,UAAU,CAAC;EACpC,CAAC,CAAC;AACV,CAAC"}},"mtime":1697752512315},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/transaction.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// routes/transaction.routes.js\nconst controller = require(\"../controllers/transaction.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.post(\"/api/transaction\", controller.createTransaction);\n  app.get(\"/api/transaction\", controller.getTransactions);\n  app.get(\"/api/transaction/:id\", controller.getTransaction);\n  app.put(\"/api/transaction/:id\", controller.updateTransaction);\n  app.delete(\"/api/transaction/:id\", controller.deleteTransaction);\n  // Add other routes as needed\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb250cm9sbGVyIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcHAiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwicG9zdCIsImNyZWF0ZVRyYW5zYWN0aW9uIiwiZ2V0IiwiZ2V0VHJhbnNhY3Rpb25zIiwiZ2V0VHJhbnNhY3Rpb24iLCJwdXQiLCJ1cGRhdGVUcmFuc2FjdGlvbiIsImRlbGV0ZSIsImRlbGV0ZVRyYW5zYWN0aW9uIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL2Vjb21tZXJjZS9yb3V0ZXMvIiwic291cmNlcyI6WyJ0cmFuc2FjdGlvbi5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcm91dGVzL3RyYW5zYWN0aW9uLnJvdXRlcy5qc1xyXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL3RyYW5zYWN0aW9uLmNvbnRyb2xsZXJcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcHApIHtcclxuICBhcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgcmVzLmhlYWRlcihcclxuICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbiAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxyXG4gICAgKTtcclxuICAgIG5leHQoKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLnBvc3QoXCIvYXBpL3RyYW5zYWN0aW9uXCIsIGNvbnRyb2xsZXIuY3JlYXRlVHJhbnNhY3Rpb24pO1xyXG4gIGFwcC5nZXQoXCIvYXBpL3RyYW5zYWN0aW9uXCIsIGNvbnRyb2xsZXIuZ2V0VHJhbnNhY3Rpb25zKTtcclxuICBhcHAuZ2V0KFwiL2FwaS90cmFuc2FjdGlvbi86aWRcIiwgY29udHJvbGxlci5nZXRUcmFuc2FjdGlvbik7XHJcbiAgYXBwLnB1dChcIi9hcGkvdHJhbnNhY3Rpb24vOmlkXCIsIGNvbnRyb2xsZXIudXBkYXRlVHJhbnNhY3Rpb24pO1xyXG4gIGFwcC5kZWxldGUoXCIvYXBpL3RyYW5zYWN0aW9uLzppZFwiLCBjb250cm9sbGVyLmRlbGV0ZVRyYW5zYWN0aW9uKTtcclxuICAvLyBBZGQgb3RoZXIgcm91dGVzIGFzIG5lZWRlZFxyXG59O1xyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsdUNBQXVDLENBQUM7QUFFbkVDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQVVDLEdBQUcsRUFBRTtFQUM5QkEsR0FBRyxDQUFDQyxHQUFHLENBQUMsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtJQUNoQ0QsR0FBRyxDQUFDRSxNQUFNLENBQ1IsOEJBQThCLEVBQzlCLDhDQUNGLENBQUM7SUFDREQsSUFBSSxDQUFDLENBQUM7RUFDUixDQUFDLENBQUM7RUFFRkosR0FBRyxDQUFDTSxJQUFJLENBQUMsa0JBQWtCLEVBQUVWLFVBQVUsQ0FBQ1csaUJBQWlCLENBQUM7RUFDMURQLEdBQUcsQ0FBQ1EsR0FBRyxDQUFDLGtCQUFrQixFQUFFWixVQUFVLENBQUNhLGVBQWUsQ0FBQztFQUN2RFQsR0FBRyxDQUFDUSxHQUFHLENBQUMsc0JBQXNCLEVBQUVaLFVBQVUsQ0FBQ2MsY0FBYyxDQUFDO0VBQzFEVixHQUFHLENBQUNXLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRWYsVUFBVSxDQUFDZ0IsaUJBQWlCLENBQUM7RUFDN0RaLEdBQUcsQ0FBQ2EsTUFBTSxDQUFDLHNCQUFzQixFQUFFakIsVUFBVSxDQUFDa0IsaUJBQWlCLENBQUM7RUFDaEU7QUFDRixDQUFDIn0=","map":{"version":3,"names":["controller","require","module","exports","app","use","req","res","next","header","post","createTransaction","get","getTransactions","getTransaction","put","updateTransaction","delete","deleteTransaction"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/","sources":["transaction.routes.js"],"sourcesContent":["// routes/transaction.routes.js\r\nconst controller = require(\"../controllers/transaction.controller\");\r\n\r\nmodule.exports = function (app) {\r\n  app.use(function (req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.post(\"/api/transaction\", controller.createTransaction);\r\n  app.get(\"/api/transaction\", controller.getTransactions);\r\n  app.get(\"/api/transaction/:id\", controller.getTransaction);\r\n  app.put(\"/api/transaction/:id\", controller.updateTransaction);\r\n  app.delete(\"/api/transaction/:id\", controller.deleteTransaction);\r\n  // Add other routes as needed\r\n};\r\n"],"mappings":"AAAA;AACA,MAAMA,UAAU,GAAGC,OAAO,CAAC,uCAAuC,CAAC;AAEnEC,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EAC9BA,GAAG,CAACC,GAAG,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAChCD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,IAAI,CAAC,kBAAkB,EAAEV,UAAU,CAACW,iBAAiB,CAAC;EAC1DP,GAAG,CAACQ,GAAG,CAAC,kBAAkB,EAAEZ,UAAU,CAACa,eAAe,CAAC;EACvDT,GAAG,CAACQ,GAAG,CAAC,sBAAsB,EAAEZ,UAAU,CAACc,cAAc,CAAC;EAC1DV,GAAG,CAACW,GAAG,CAAC,sBAAsB,EAAEf,UAAU,CAACgB,iBAAiB,CAAC;EAC7DZ,GAAG,CAACa,MAAM,CAAC,sBAAsB,EAAEjB,UAAU,CAACkB,iBAAiB,CAAC;EAChE;AACF,CAAC"}},"mtime":1701883708660},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/transaction.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// controllers/transaction.controller.js\nconst db = require(\"../../../models\");\nconst Transaction = db.transaction;\n\n// Create a new Transaction\nexports.createTransaction = (req, res) => {\n  const transaction = new Transaction({\n    ...req.body\n    // Add other fields as needed\n  });\n\n  transaction.save((err, transaction) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    res.status(200).send(transaction);\n  });\n};\n\n// Get all Transactions\nexports.getTransactions = (req, res) => {\n  Transaction.find().exec((err, transactions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!transactions) {\n      return res.status(404).send({\n        message: \"Transactions not found.\"\n      });\n    }\n    res.status(200).send(transactions);\n  });\n};\n\n// Get a specific Transaction by ID\nexports.getTransaction = (req, res) => {\n  Transaction.findById(req.params.id).exec((err, transaction) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!transaction) {\n      return res.status(404).send({\n        message: \"Transaction not found.\"\n      });\n    }\n    res.status(200).send(transaction);\n  });\n};\n\n// Update a Transaction by ID\nexports.updateTransaction = (req, res) => {\n  const transactionUpdates = {\n    ...req.body\n  };\n  Transaction.findOneAndUpdate({\n    _id: req.params.id\n  }, transactionUpdates, {\n    new: true\n  }).exec((err, transaction) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!transaction) {\n      return res.status(404).send({\n        message: \"Transaction not found.\"\n      });\n    }\n    res.status(200).send(transaction);\n  });\n};\n\n// Delete a Transaction by ID\nexports.deleteTransaction = (req, res) => {\n  Transaction.findOneAndDelete({\n    _id: req.params.id\n  }).exec((err, transaction) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!transaction) {\n      return res.status(404).send({\n        message: \"Transaction not found.\"\n      });\n    }\n    res.status(200).send(transaction);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uIiwiZXhwb3J0cyIsImNyZWF0ZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwiYm9keSIsInNhdmUiLCJlcnIiLCJzdGF0dXMiLCJzZW5kIiwibWVzc2FnZSIsImdldFRyYW5zYWN0aW9ucyIsImZpbmQiLCJleGVjIiwidHJhbnNhY3Rpb25zIiwiZ2V0VHJhbnNhY3Rpb24iLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwidXBkYXRlVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvblVwZGF0ZXMiLCJmaW5kT25lQW5kVXBkYXRlIiwiX2lkIiwibmV3IiwiZGVsZXRlVHJhbnNhY3Rpb24iLCJmaW5kT25lQW5kRGVsZXRlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL2Vjb21tZXJjZS9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInRyYW5zYWN0aW9uLmNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29udHJvbGxlcnMvdHJhbnNhY3Rpb24uY29udHJvbGxlci5qc1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHNcIik7XHJcbmNvbnN0IFRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb247XHJcblxyXG4vLyBDcmVhdGUgYSBuZXcgVHJhbnNhY3Rpb25cclxuZXhwb3J0cy5jcmVhdGVUcmFuc2FjdGlvbiA9IChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHtcclxuICAgIC4uLnJlcS5ib2R5XHJcbiAgICAvLyBBZGQgb3RoZXIgZmllbGRzIGFzIG5lZWRlZFxyXG4gIH0pO1xyXG5cclxuICB0cmFuc2FjdGlvbi5zYXZlKChlcnIsIHRyYW5zYWN0aW9uKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh0cmFuc2FjdGlvbik7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vLyBHZXQgYWxsIFRyYW5zYWN0aW9uc1xyXG5leHBvcnRzLmdldFRyYW5zYWN0aW9ucyA9IChyZXEsIHJlcykgPT4ge1xyXG4gIFRyYW5zYWN0aW9uLmZpbmQoKVxyXG4gICAgLmV4ZWMoKGVyciwgdHJhbnNhY3Rpb25zKSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJUcmFuc2FjdGlvbnMgbm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh0cmFuc2FjdGlvbnMpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyBHZXQgYSBzcGVjaWZpYyBUcmFuc2FjdGlvbiBieSBJRFxyXG5leHBvcnRzLmdldFRyYW5zYWN0aW9uID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgVHJhbnNhY3Rpb24uZmluZEJ5SWQocmVxLnBhcmFtcy5pZClcclxuICAgIC5leGVjKChlcnIsIHRyYW5zYWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlRyYW5zYWN0aW9uIG5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQodHJhbnNhY3Rpb24pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyBVcGRhdGUgYSBUcmFuc2FjdGlvbiBieSBJRFxyXG5leHBvcnRzLnVwZGF0ZVRyYW5zYWN0aW9uID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgdHJhbnNhY3Rpb25VcGRhdGVzID0ge1xyXG4gICAgLi4ucmVxLmJvZHlcclxuICB9O1xyXG5cclxuICBUcmFuc2FjdGlvbi5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIHRyYW5zYWN0aW9uVXBkYXRlcywgeyBuZXc6IHRydWUgfSlcclxuICAgIC5leGVjKChlcnIsIHRyYW5zYWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiBcIlRyYW5zYWN0aW9uIG5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQodHJhbnNhY3Rpb24pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyBEZWxldGUgYSBUcmFuc2FjdGlvbiBieSBJRFxyXG5leHBvcnRzLmRlbGV0ZVRyYW5zYWN0aW9uID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgVHJhbnNhY3Rpb24uZmluZE9uZUFuZERlbGV0ZSh7IF9pZDogcmVxLnBhcmFtcy5pZCB9KVxyXG4gICAgLmV4ZWMoKGVyciwgdHJhbnNhY3Rpb24pID0+IHtcclxuICAgICAgaWYgKGVycikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiVHJhbnNhY3Rpb24gbm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh0cmFuc2FjdGlvbik7XHJcbiAgICB9KTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3JDLE1BQU1DLFdBQVcsR0FBR0YsRUFBRSxDQUFDRyxXQUFXOztBQUVsQztBQUNBQyxPQUFPLENBQUNDLGlCQUFpQixHQUFHLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3hDLE1BQU1KLFdBQVcsR0FBRyxJQUFJRCxXQUFXLENBQUM7SUFDbEMsR0FBR0ksR0FBRyxDQUFDRTtJQUNQO0VBQ0YsQ0FBQyxDQUFDOztFQUVGTCxXQUFXLENBQUNNLElBQUksQ0FBQyxDQUFDQyxHQUFHLEVBQUVQLFdBQVcsS0FBSztJQUNyQyxJQUFJTyxHQUFHLEVBQUU7TUFDUEgsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxPQUFPLEVBQUVIO01BQUksQ0FBQyxDQUFDO01BQ3RDO0lBQ0Y7SUFDQUgsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ1QsV0FBVyxDQUFDO0VBQ25DLENBQUMsQ0FBQztBQUNKLENBQUM7O0FBRUQ7QUFDQUMsT0FBTyxDQUFDVSxlQUFlLEdBQUcsQ0FBQ1IsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdENMLFdBQVcsQ0FBQ2EsSUFBSSxDQUFDLENBQUMsQ0FDZkMsSUFBSSxDQUFDLENBQUNOLEdBQUcsRUFBRU8sWUFBWSxLQUFL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","map":{"version":3,"names":["db","require","Transaction","transaction","exports","createTransaction","req","res","body","save","err","status","send","message","getTransactions","find","exec","transactions","getTransaction","findById","params","id","updateTransaction","transactionUpdates","findOneAndUpdate","_id","new","deleteTransaction","findOneAndDelete"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/","sources":["transaction.controller.js"],"sourcesContent":["// controllers/transaction.controller.js\r\nconst db = require(\"../../../models\");\r\nconst Transaction = db.transaction;\r\n\r\n// Create a new Transaction\r\nexports.createTransaction = (req, res) => {\r\n  const transaction = new Transaction({\r\n    ...req.body\r\n    // Add other fields as needed\r\n  });\r\n\r\n  transaction.save((err, transaction) => {\r\n    if (err) {\r\n      res.status(500).send({ message: err });\r\n      return;\r\n    }\r\n    res.status(200).send(transaction);\r\n  });\r\n};\r\n\r\n// Get all Transactions\r\nexports.getTransactions = (req, res) => {\r\n  Transaction.find()\r\n    .exec((err, transactions) => {\r\n      if (err) {\r\n        res.status(500).send({ message: err });\r\n        return;\r\n      }\r\n\r\n      if (!transactions) {\r\n        return res.status(404).send({ message: \"Transactions not found.\" });\r\n      }\r\n\r\n      res.status(200).send(transactions);\r\n    });\r\n};\r\n\r\n// Get a specific Transaction by ID\r\nexports.getTransaction = (req, res) => {\r\n  Transaction.findById(req.params.id)\r\n    .exec((err, transaction) => {\r\n      if (err) {\r\n        res.status(500).send({ message: err });\r\n        return;\r\n      }\r\n\r\n      if (!transaction) {\r\n        return res.status(404).send({ message: \"Transaction not found.\" });\r\n      }\r\n\r\n      res.status(200).send(transaction);\r\n    });\r\n};\r\n\r\n// Update a Transaction by ID\r\nexports.updateTransaction = (req, res) => {\r\n  const transactionUpdates = {\r\n    ...req.body\r\n  };\r\n\r\n  Transaction.findOneAndUpdate({ _id: req.params.id }, transactionUpdates, { new: true })\r\n    .exec((err, transaction) => {\r\n      if (err) {\r\n        res.status(500).send({ message: err });\r\n        return;\r\n      }\r\n\r\n      if (!transaction) {\r\n        return res.status(404).send({ message: \"Transaction not found.\" });\r\n      }\r\n\r\n      res.status(200).send(transaction);\r\n    });\r\n};\r\n\r\n// Delete a Transaction by ID\r\nexports.deleteTransaction = (req, res) => {\r\n  Transaction.findOneAndDelete({ _id: req.params.id })\r\n    .exec((err, transaction) => {\r\n      if (err) {\r\n        res.status(500).send({ message: err });\r\n        return;\r\n      }\r\n\r\n      if (!transaction) {\r\n        return res.status(404).send({ message: \"Transaction not found.\" });\r\n      }\r\n\r\n      res.status(200).send(transaction);\r\n    });\r\n};\r\n"],"mappings":"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"}},"mtime":1701964816082},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/product_permissions.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the product permissions routes.\r\n * There are different routes for getting product permissions depending on whether the user is a superUser or not, and for creating and updating product permissions.\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/product_permissions.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/product_permissions/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getProductPermissions);\n  app.get(\"/api/product_permissions/for-site\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getProductPermissionsForSite);\n  app.get(\"/api/product_permissions/for-user\", [authJwt.verifyToken], controller.getProductPermissionsForUser);\n  app.post(\"/api/product_permissions\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createProductPermissions);\n  app.put(\"/api/product_permissions/:id\", [authJwt.verifyToken], controller.updateProductPermissions);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTdXBlclVzZXIiLCJnZXRQcm9kdWN0UGVybWlzc2lvbnMiLCJnZXRQcm9kdWN0UGVybWlzc2lvbnNGb3JTaXRlIiwiZ2V0UHJvZHVjdFBlcm1pc3Npb25zRm9yVXNlciIsInBvc3QiLCJpc1NpdGVBZG1pbiIsImNyZWF0ZVByb2R1Y3RQZXJtaXNzaW9ucyIsInB1dCIsInVwZGF0ZVByb2R1Y3RQZXJtaXNzaW9ucyJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9lY29tbWVyY2Uvcm91dGVzLyIsInNvdXJjZXMiOlsicHJvZHVjdF9wZXJtaXNzaW9ucy5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgY29kZSBpcyB0aGUgcHJvZHVjdCBwZXJtaXNzaW9ucyByb3V0ZXMuXHJcbiAqIFRoZXJlIGFyZSBkaWZmZXJlbnQgcm91dGVzIGZvciBnZXR0aW5nIHByb2R1Y3QgcGVybWlzc2lvbnMgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHVzZXIgaXMgYSBzdXBlclVzZXIgb3Igbm90LCBhbmQgZm9yIGNyZWF0aW5nIGFuZCB1cGRhdGluZyBwcm9kdWN0IHBlcm1pc3Npb25zLlxyXG4gKi9cclxuY29uc3QgeyBhdXRoSnd0IH0gPSByZXF1aXJlKFwiLi4vLi4vLi4vbWlkZGxld2FyZXNcIik7XHJcbmNvbnN0IGNvbnRyb2xsZXIgPSByZXF1aXJlKFwiLi4vY29udHJvbGxlcnMvcHJvZHVjdF9wZXJtaXNzaW9ucy5jb250cm9sbGVyXCIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcHApIHtcclxuICBhcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICByZXMuaGVhZGVyKFxyXG4gICAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcclxuICAgICAgXCJ4LWFjY2Vzcy10b2tlbiwgT3JpZ2luLCBDb250ZW50LVR5cGUsIEFjY2VwdFwiXHJcbiAgICApO1xyXG4gICAgbmV4dCgpO1xyXG4gIH0pO1xyXG5cclxuICBhcHAuZ2V0KFwiL2FwaS9wcm9kdWN0X3Blcm1pc3Npb25zL1wiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc1N1cGVyVXNlcl0sIGNvbnRyb2xsZXIuZ2V0UHJvZHVjdFBlcm1pc3Npb25zKTtcclxuICBhcHAuZ2V0KFwiL2FwaS9wcm9kdWN0X3Blcm1pc3Npb25zL2Zvci1zaXRlXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU3VwZXJVc2VyXSwgY29udHJvbGxlci5nZXRQcm9kdWN0UGVybWlzc2lvbnNGb3JTaXRlKTtcclxuICBhcHAuZ2V0KFwiL2FwaS9wcm9kdWN0X3Blcm1pc3Npb25zL2Zvci11c2VyXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuXSwgY29udHJvbGxlci5nZXRQcm9kdWN0UGVybWlzc2lvbnNGb3JVc2VyKTtcclxuICBhcHAucG9zdChcIi9hcGkvcHJvZHVjdF9wZXJtaXNzaW9uc1wiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbiwgYXV0aEp3dC5pc1NpdGVBZG1pbl0sIGNvbnRyb2xsZXIuY3JlYXRlUHJvZHVjdFBlcm1pc3Npb25zKTtcclxuICBhcHAucHV0KFwiL2FwaS9wcm9kdWN0X3Blcm1pc3Npb25zLzppZFwiLCBbYXV0aEp3dC52ZXJpZnlUb2tlbl0sIGNvbnRyb2xsZXIudXBkYXRlUHJvZHVjdFBlcm1pc3Npb25zKTtcclxuXHJcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07RUFBRUE7QUFBUSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNuRCxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQywrQ0FBK0MsQ0FBQztBQUUzRUUsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBU0MsR0FBRyxFQUFFO0VBQzdCQSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxVQUFTQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0lBQy9CRCxHQUFHLENBQUNFLE1BQU0sQ0FDUiw4QkFBOEIsRUFDOUIsOENBQ0YsQ0FBQztJQUNERCxJQUFJLENBQUMsQ0FBQztFQUNSLENBQUMsQ0FBQztFQUVGSixHQUFHLENBQUNNLEdBQUcsQ0FBQywyQkFBMkIsRUFBRSxDQUFDWCxPQUFPLENBQUNZLFdBQVcsRUFBRVosT0FBTyxDQUFDYSxXQUFXLENBQUMsRUFBRVgsVUFBVSxDQUFDWSxxQkFBcUIsQ0FBQztFQUNsSFQsR0FBRyxDQUFDTSxHQUFHLENBQUMsbUNBQW1DLEVBQUUsQ0FBQ1gsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2EsV0FBVyxDQUFDLEVBQUVYLFVBQVUsQ0FBQ2EsNEJBQTRCLENBQUM7RUFDaklWLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLG1DQUFtQyxFQUFFLENBQUNYLE9BQU8sQ0FBQ1ksV0FBVyxDQUFDLEVBQUVWLFVBQVUsQ0FBQ2MsNEJBQTRCLENBQUM7RUFDNUdYLEdBQUcsQ0FBQ1ksSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUNqQixPQUFPLENBQUNZLFdBQVcsRUFBRVosT0FBTyxDQUFDa0IsV0FBVyxDQUFDLEVBQUVoQixVQUFVLENBQUNpQix3QkFBd0IsQ0FBQztFQUNySGQsR0FBRyxDQUFDZSxHQUFHLENBQUMsOEJBQThCLEVBQUUsQ0FBQ3BCLE9BQU8sQ0FBQ1ksV0FBVyxDQUFDLEVBQUVWLFVBQVUsQ0FBQ21CLHdCQUF3QixDQUFDO0FBRXJHLENBQUMifQ==","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSuperUser","getProductPermissions","getProductPermissionsForSite","getProductPermissionsForUser","post","isSiteAdmin","createProductPermissions","put","updateProductPermissions"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/","sources":["product_permissions.routes.js"],"sourcesContent":["/**\r\n * This code is the product permissions routes.\r\n * There are different routes for getting product permissions depending on whether the user is a superUser or not, and for creating and updating product permissions.\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/product_permissions.controller\");\r\n\r\nmodule.exports = function(app) {\r\n  app.use(function(req, res, next) {\r\n    res.header(\r\n      \"Access-Control-Allow-Headers\",\r\n      \"x-access-token, Origin, Content-Type, Accept\"\r\n    );\r\n    next();\r\n  });\r\n\r\n  app.get(\"/api/product_permissions/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getProductPermissions);\r\n  app.get(\"/api/product_permissions/for-site\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getProductPermissionsForSite);\r\n  app.get(\"/api/product_permissions/for-user\", [authJwt.verifyToken], controller.getProductPermissionsForUser);\r\n  app.post(\"/api/product_permissions\", [authJwt.verifyToken, authJwt.isSiteAdmin], controller.createProductPermissions);\r\n  app.put(\"/api/product_permissions/:id\", [authJwt.verifyToken], controller.updateProductPermissions);\r\n\r\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,+CAA+C,CAAC;AAE3EE,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC7BA,GAAG,CAACC,GAAG,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC/BD,GAAG,CAACE,MAAM,CACR,8BAA8B,EAC9B,8CACF,CAAC;IACDD,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,2BAA2B,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,qBAAqB,CAAC;EAClHT,GAAG,CAACM,GAAG,CAAC,mCAAmC,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACa,4BAA4B,CAAC;EACjIV,GAAG,CAACM,GAAG,CAAC,mCAAmC,EAAE,CAACX,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACc,4BAA4B,CAAC;EAC5GX,GAAG,CAACY,IAAI,CAAC,0BAA0B,EAAE,CAACjB,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACkB,WAAW,CAAC,EAAEhB,UAAU,CAACiB,wBAAwB,CAAC;EACrHd,GAAG,CAACe,GAAG,CAAC,8BAA8B,EAAE,CAACpB,OAAO,CAACY,WAAW,CAAC,EAAEV,UAAU,CAACmB,wBAAwB,CAAC;AAErG,CAAC"}},"mtime":1697752512311},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/product_permissions.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code exports functions that allow for the creation, retrieval, and updating of product permissions.\r\n * Product permissions specify which users have access to which products.\r\n */\nconst db = require(\"../../../models\");\nconst siteHelper = require(\"../../../helper/site\");\nconst ProductPermissions = db.product_permissions;\nconst Site = db.site;\nexports.createProductPermissions = (req, res) => {\n  const product_permissions = new ProductPermissions({\n    user_id: req.body.user_id,\n    product_id: req.body.product_id,\n    permissions: req.body.permissions\n  });\n  product_permissions.save((err, product_permission) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    res.status(200).send(product_permission);\n  });\n};\nexports.getProductPermissions = (req, res) => {\n  ProductPermissions.find().exec((err, product_permissions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!product_permissions) {\n      return res.status(404).send({\n        message: \"ProductPermissions Not found.\"\n      });\n    }\n    res.status(200).send(product_permissions);\n  });\n};\nexports.getProductPermissionsForSite = (req, res) => {\n  const site_name = siteHelper.getSiteName(req);\n  Site.findOne({\n    domain: site_name\n  }).exec((err, site) => {\n    if (err || !site) {\n      return res.status(404).send({\n        message: \"Site not found.\"\n      });\n    }\n    ProductPermissions.find({\n      site_id: site._id\n    }).exec((err, product_permissions) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      if (!product_permissions) {\n        return res.status(404).send({\n          message: \"ProductPermissions Not found.\"\n        });\n      }\n      res.status(200).send(product_permissions);\n    });\n  });\n};\nexports.getProductPermissionsForUser = (req, res) => {\n  ProductPermissions.find({\n    user_id: req.userId\n  }).exec((err, product_permissions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!product_permissions) {\n      return res.status(404).send({\n        message: \"ProductPermissions Not found.\"\n      });\n    }\n    res.status(200).send(product_permissions);\n  });\n};\nexports.updateProductPermissions = (req, res) => {\n  const product_permissions_updates = {\n    ...req.body\n  };\n  ProductPermissions.findOneAndUpdate({\n    _id: req.params.id\n  }, product_permissions_updates, {\n    new: true\n  }).exec((err, product_permissions) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!product_permissions) {\n      return res.status(404).send({\n        message: \"ProductPermissions Not found.\"\n      });\n    }\n    res.status(200).send(product_permissions);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJzaXRlSGVscGVyIiwiUHJvZHVjdFBlcm1pc3Npb25zIiwicHJvZHVjdF9wZXJtaXNzaW9ucyIsIlNpdGUiLCJzaXRlIiwiZXhwb3J0cyIsImNyZWF0ZVByb2R1Y3RQZXJtaXNzaW9ucyIsInJlcSIsInJlcyIsInVzZXJfaWQiLCJib2R5IiwicHJvZHVjdF9pZCIsInBlcm1pc3Npb25zIiwic2F2ZSIsImVyciIsInByb2R1Y3RfcGVybWlzc2lvbiIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwiZ2V0UHJvZHVjdFBlcm1pc3Npb25zIiwiZmluZCIsImV4ZWMiLCJnZXRQcm9kdWN0UGVybWlzc2lvbnNGb3JTaXRlIiwic2l0ZV9uYW1lIiwiZ2V0U2l0ZU5hbWUiLCJmaW5kT25lIiwiZG9tYWluIiwic2l0ZV9pZCIsIl9pZCIsImdldFByb2R1Y3RQZXJtaXNzaW9uc0ZvclVzZXIiLCJ1c2VySWQiLCJ1cGRhdGVQcm9kdWN0UGVybWlzc2lvbnMiLCJwcm9kdWN0X3Blcm1pc3Npb25zX3VwZGF0ZXMiLCJmaW5kT25lQW5kVXBkYXRlIiwicGFyYW1zIiwiaWQiLCJuZXciXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvZWNvbW1lcmNlL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsicHJvZHVjdF9wZXJtaXNzaW9ucy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGlzIGNvZGUgZXhwb3J0cyBmdW5jdGlvbnMgdGhhdCBhbGxvdyBmb3IgdGhlIGNyZWF0aW9uLCByZXRyaWV2YWwsIGFuZCB1cGRhdGluZyBvZiBwcm9kdWN0IHBlcm1pc3Npb25zLlxyXG4gKiBQcm9kdWN0IHBlcm1pc3Npb25zIHNwZWNpZnkgd2hpY2ggdXNlcnMgaGF2ZSBhY2Nlc3MgdG8gd2hpY2ggcHJvZHVjdHMuXHJcbiAqL1xyXG5jb25zdCBkYiA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHNcIik7XHJcbmNvbnN0IHNpdGVIZWxwZXIgPSByZXF1aXJlKFwiLi4vLi4vLi4vaGVscGVyL3NpdGVcIik7XHJcblxyXG5jb25zdCBQcm9kdWN0UGVybWlzc2lvbnMgPSBkYi5wcm9kdWN0X3Blcm1pc3Npb25zO1xyXG5jb25zdCBTaXRlID0gZGIuc2l0ZTtcclxuZXhwb3J0cy5jcmVhdGVQcm9kdWN0UGVybWlzc2lvbnMgPSAocmVxLCByZXMpID0+IHtcclxuXHRjb25zdCBwcm9kdWN0X3Blcm1pc3Npb25zID0gbmV3IFByb2R1Y3RQZXJtaXNzaW9ucyh7XHJcblx0XHR1c2VyX2lkOiByZXEuYm9keS51c2VyX2lkLFxyXG5cdFx0cHJvZHVjdF9pZDogcmVxLmJvZHkucHJvZHVjdF9pZCxcclxuXHRcdHBlcm1pc3Npb25zOiByZXEuYm9keS5wZXJtaXNzaW9ucyxcclxuXHR9KTtcclxuXHJcblx0cHJvZHVjdF9wZXJtaXNzaW9ucy5zYXZlKChlcnIsIHByb2R1Y3RfcGVybWlzc2lvbikgPT4ge1xyXG5cdFx0aWYgKGVycikge1xyXG5cdFx0XHRyZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHByb2R1Y3RfcGVybWlzc2lvbik7XHJcblx0fSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFByb2R1Y3RQZXJtaXNzaW9ucyA9IChyZXEsIHJlcykgPT4ge1xyXG5cdFByb2R1Y3RQZXJtaXNzaW9ucy5maW5kKClcclxuICAgIC5leGVjKChlcnIsIHByb2R1Y3RfcGVybWlzc2lvbnMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXByb2R1Y3RfcGVybWlzc2lvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQcm9kdWN0UGVybWlzc2lvbnMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocHJvZHVjdF9wZXJtaXNzaW9ucyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0UHJvZHVjdFBlcm1pc3Npb25zRm9yU2l0ZSA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2l0ZV9uYW1lID0gc2l0ZUhlbHBlci5nZXRTaXRlTmFtZShyZXEpO1xyXG5cclxuICAgIFNpdGUuZmluZE9uZSh7IGRvbWFpbjogc2l0ZV9uYW1lIH0pLmV4ZWMoKGVyciwgc2l0ZSkgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgIXNpdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTaXRlIG5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICB9XHJcblx0UHJvZHVjdFBlcm1pc3Npb25zLmZpbmQoe3NpdGVfaWQ6IHNpdGUuX2lkfSlcclxuICAgIC5leGVjKChlcnIsIHByb2R1Y3RfcGVybWlzc2lvbnMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXByb2R1Y3RfcGVybWlzc2lvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQcm9kdWN0UGVybWlzc2lvbnMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocHJvZHVjdF9wZXJtaXNzaW9ucyk7XHJcbiAgICB9KTtcclxufSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFByb2R1Y3RQZXJtaXNzaW9uc0ZvclVzZXIgPSAocmVxLCByZXMpID0+IHtcclxuXHRQcm9kdWN0UGVybWlzc2lvbnMuZmluZCh7IHVzZXJfaWQ6IHJlcS51c2VySWQgfSlcclxuICAgIC5leGVjKChlcnIsIHByb2R1Y3RfcGVybWlzc2lvbnMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXByb2R1Y3RfcGVybWlzc2lvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQcm9kdWN0UGVybWlzc2lvbnMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocHJvZHVjdF9wZXJtaXNzaW9ucyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMudXBkYXRlUHJvZHVjdFBlcm1pc3Npb25zID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBwcm9kdWN0X3Blcm1pc3Npb25zX3VwZGF0ZXMgPSB7XHJcbiAgICAgICAgLi4ucmVxLmJvZHlcclxuICAgIH07XHJcblxyXG4gICAgUHJvZHVjdFBlcm1pc3Npb25zLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgcHJvZHVjdF9wZXJtaXNzaW9uc191cGRhdGVzLCB7IG5ldzogdHJ1ZSB9KVxyXG4gICAgICAgIC5leGVjKChlcnIsIHByb2R1Y3RfcGVybWlzc2lvbnMpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghcHJvZHVjdF9wZXJtaXNzaW9ucykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQcm9kdWN0UGVybWlzc2lvbnMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChwcm9kdWN0X3Blcm1pc3Npb25zKTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDckMsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFFbEQsTUFBTUUsa0JBQWtCLEdBQUdILEVBQUUsQ0FBQ0ksbUJBQW1CO0FBQ2pELE1BQU1DLElBQUksR0FBR0wsRUFBRSxDQUFDTSxJQUFJO0FBQ3BCQyxPQUFPLENBQUNDLHdCQUF3QixHQUFHLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2hELE1BQU1OLG1CQUFtQixHQUFHLElBQUlELGtCQUFrQixDQUFDO0lBQ2xEUSxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0csSUFBSSxDQUFDRCxPQUFPO0lBQ3pCRSxVQUFVLEVBQUVKLEdBQUcsQ0FBQ0csSUFBSSxDQUFDQyxVQUFVO0lBQy9CQyxXQUFXLEVBQUVMLEdBQUcsQ0FBQ0csSUFBSSxDQUFDRTtFQUN2QixDQUFDLENBQUM7RUFFRlYsbUJBQW1CLENBQUNXLElBQUksQ0FBQyxDQUFDQyxHQUFHLEVBQUVDLGtCQUFrQixLQUFLO0lBQ3JELElBQUlELEdBQUcsRUFBRTtNQUNSTixHQUFHLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FB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","map":{"version":3,"names":["db","require","siteHelper","ProductPermissions","product_permissions","Site","site","exports","createProductPermissions","req","res","user_id","body","product_id","permissions","save","err","product_permission","status","send","message","getProductPermissions","find","exec","getProductPermissionsForSite","site_name","getSiteName","findOne","domain","site_id","_id","getProductPermissionsForUser","userId","updateProductPermissions","product_permissions_updates","findOneAndUpdate","params","id","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/","sources":["product_permissions.controller.js"],"sourcesContent":["/**\r\n * This code exports functions that allow for the creation, retrieval, and updating of product permissions.\r\n * Product permissions specify which users have access to which products.\r\n */\r\nconst db = require(\"../../../models\");\r\nconst siteHelper = require(\"../../../helper/site\");\r\n\r\nconst ProductPermissions = db.product_permissions;\r\nconst Site = db.site;\r\nexports.createProductPermissions = (req, res) => {\r\n\tconst product_permissions = new ProductPermissions({\r\n\t\tuser_id: req.body.user_id,\r\n\t\tproduct_id: req.body.product_id,\r\n\t\tpermissions: req.body.permissions,\r\n\t});\r\n\r\n\tproduct_permissions.save((err, product_permission) => {\r\n\t\tif (err) {\r\n\t\t\tres.status(500).send({ message: err });\r\n\t\t\treturn;\r\n\t\t}\r\n        res.status(200).send(product_permission);\r\n\t});\r\n};\r\n\r\nexports.getProductPermissions = (req, res) => {\r\n\tProductPermissions.find()\r\n    .exec((err, product_permissions) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!product_permissions) {\r\n            return res.status(404).send({ message: \"ProductPermissions Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(product_permissions);\r\n    });\r\n};\r\n\r\nexports.getProductPermissionsForSite = (req, res) => {\r\n    const site_name = siteHelper.getSiteName(req);\r\n\r\n    Site.findOne({ domain: site_name }).exec((err, site) => {\r\n        if (err || !site) {\r\n            return res.status(404).send({ message: \"Site not found.\" });\r\n        }\r\n\tProductPermissions.find({site_id: site._id})\r\n    .exec((err, product_permissions) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!product_permissions) {\r\n            return res.status(404).send({ message: \"ProductPermissions Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(product_permissions);\r\n    });\r\n});\r\n};\r\n\r\nexports.getProductPermissionsForUser = (req, res) => {\r\n\tProductPermissions.find({ user_id: req.userId })\r\n    .exec((err, product_permissions) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!product_permissions) {\r\n            return res.status(404).send({ message: \"ProductPermissions Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(product_permissions);\r\n    });\r\n};\r\n\r\nexports.updateProductPermissions = (req, res) => {\r\n    const product_permissions_updates = {\r\n        ...req.body\r\n    };\r\n\r\n    ProductPermissions.findOneAndUpdate({ _id: req.params.id }, product_permissions_updates, { new: true })\r\n        .exec((err, product_permissions) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!product_permissions) {\r\n                return res.status(404).send({ message: \"ProductPermissions Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(product_permissions);\r\n        });\r\n};\r\n\r\n\r\n"],"mappings":"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"}},"mtime":1697752512307},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/product.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is the routes for the products.\r\n * The first route is for getting all the products, the second route is for getting products for the site, the third route is for creating a product, and the fourth route is for updating a product.\r\n */\nconst {\n  authJwt\n} = require(\"../../../middlewares\");\nconst controller = require(\"../controllers/product.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.get(\"/api/product/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getProducts);\n  app.get(\"/api/product/for-site\", controller.getProductsForSite);\n  app.post(\"/api/product/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.createProduct);\n  app.put(\"/api/product/:id\", [authJwt.verifyToken, authJwt.isSuperUser], controller.updateProduct);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoSnd0IiwicmVxdWlyZSIsImNvbnRyb2xsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlciIsImdldCIsInZlcmlmeVRva2VuIiwiaXNTdXBlclVzZXIiLCJnZXRQcm9kdWN0cyIsImdldFByb2R1Y3RzRm9yU2l0ZSIsInBvc3QiLCJjcmVhdGVQcm9kdWN0IiwicHV0IiwidXBkYXRlUHJvZHVjdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9lY29tbWVyY2Uvcm91dGVzLyIsInNvdXJjZXMiOlsicHJvZHVjdC5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgY29kZSBpcyB0aGUgcm91dGVzIGZvciB0aGUgcHJvZHVjdHMuXHJcbiAqIFRoZSBmaXJzdCByb3V0ZSBpcyBmb3IgZ2V0dGluZyBhbGwgdGhlIHByb2R1Y3RzLCB0aGUgc2Vjb25kIHJvdXRlIGlzIGZvciBnZXR0aW5nIHByb2R1Y3RzIGZvciB0aGUgc2l0ZSwgdGhlIHRoaXJkIHJvdXRlIGlzIGZvciBjcmVhdGluZyBhIHByb2R1Y3QsIGFuZCB0aGUgZm91cnRoIHJvdXRlIGlzIGZvciB1cGRhdGluZyBhIHByb2R1Y3QuXHJcbiAqL1xyXG5jb25zdCB7IGF1dGhKd3QgfSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9taWRkbGV3YXJlc1wiKTtcclxuY29uc3QgY29udHJvbGxlciA9IHJlcXVpcmUoXCIuLi9jb250cm9sbGVycy9wcm9kdWN0LmNvbnRyb2xsZXJcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcHApIHtcclxuICAgIGFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICAgICAgcmVzLmhlYWRlcihcclxuICAgICAgICAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbiAgICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW4sIE9yaWdpbiwgQ29udGVudC1UeXBlLCBBY2NlcHRcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbmV4dCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwLmdldChcIi9hcGkvcHJvZHVjdC9cIiwgW2F1dGhKd3QudmVyaWZ5VG9rZW4sIGF1dGhKd3QuaXNTdXBlclVzZXJdLCBjb250cm9sbGVyLmdldFByb2R1Y3RzKTtcclxuICAgIGFwcC5nZXQoXCIvYXBpL3Byb2R1Y3QvZm9yLXNpdGVcIiwgY29udHJvbGxlci5nZXRQcm9kdWN0c0ZvclNpdGUpO1xyXG4gICAgYXBwLnBvc3QoXCIvYXBpL3Byb2R1Y3QvXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU3VwZXJVc2VyXSwgY29udHJvbGxlci5jcmVhdGVQcm9kdWN0KTtcclxuICAgIGFwcC5wdXQoXCIvYXBpL3Byb2R1Y3QvOmlkXCIsIFthdXRoSnd0LnZlcmlmeVRva2VuLCBhdXRoSnd0LmlzU3VwZXJVc2VyXSwgY29udHJvbGxlci51cGRhdGVQcm9kdWN0KTtcclxuXHJcblxyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07RUFBRUE7QUFBUSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNuRCxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQztBQUUvREUsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBVUMsR0FBRyxFQUFFO0VBQzVCQSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0lBQzlCRCxHQUFHLENBQUNFLE1BQU0sQ0FDTiw4QkFBOEIsRUFDOUIsOENBQ0osQ0FBQztJQUNERCxJQUFJLENBQUMsQ0FBQztFQUNWLENBQUMsQ0FBQztFQUVGSixHQUFHLENBQUNNLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQ1gsT0FBTyxDQUFDWSxXQUFXLEVBQUVaLE9BQU8sQ0FBQ2EsV0FBVyxDQUFDLEVBQUVYLFVBQVUsQ0FBQ1ksV0FBVyxDQUFDO0VBQzVGVCxHQUFHLENBQUNNLEdBQUcsQ0FBQyx1QkFBdUIsRUFBRVQsVUFBVSxDQUFDYSxrQkFBa0IsQ0FBQztFQUMvRFYsR0FBRyxDQUFDVyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUNoQixPQUFPLENBQUNZLFdBQVcsRUFBRVosT0FBTyxDQUFDYSxXQUFXLENBQUMsRUFBRVgsVUFBVSxDQUFDZSxhQUFhLENBQUM7RUFDL0ZaLEdBQUcsQ0FBQ2EsR0FBRyxDQUFDLGtCQUFrQixFQUFFLENBQUNsQixPQUFPLENBQUNZLFdBQVcsRUFBRVosT0FBTyxDQUFDYSxXQUFXLENBQUMsRUFBRVgsVUFBVSxDQUFDaUIsYUFBYSxDQUFDO0FBR3JHLENBQUMifQ==","map":{"version":3,"names":["authJwt","require","controller","module","exports","app","use","req","res","next","header","get","verifyToken","isSuperUser","getProducts","getProductsForSite","post","createProduct","put","updateProduct"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/routes/","sources":["product.routes.js"],"sourcesContent":["/**\r\n * This code is the routes for the products.\r\n * The first route is for getting all the products, the second route is for getting products for the site, the third route is for creating a product, and the fourth route is for updating a product.\r\n */\r\nconst { authJwt } = require(\"../../../middlewares\");\r\nconst controller = require(\"../controllers/product.controller\");\r\n\r\nmodule.exports = function (app) {\r\n    app.use(function (req, res, next) {\r\n        res.header(\r\n            \"Access-Control-Allow-Headers\",\r\n            \"x-access-token, Origin, Content-Type, Accept\"\r\n        );\r\n        next();\r\n    });\r\n\r\n    app.get(\"/api/product/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.getProducts);\r\n    app.get(\"/api/product/for-site\", controller.getProductsForSite);\r\n    app.post(\"/api/product/\", [authJwt.verifyToken, authJwt.isSuperUser], controller.createProduct);\r\n    app.put(\"/api/product/:id\", [authJwt.verifyToken, authJwt.isSuperUser], controller.updateProduct);\r\n\r\n\r\n}"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAM;EAAEA;AAAQ,CAAC,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACnD,MAAMC,UAAU,GAAGD,OAAO,CAAC,mCAAmC,CAAC;AAE/DE,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EAC5BA,GAAG,CAACC,GAAG,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9BD,GAAG,CAACE,MAAM,CACN,8BAA8B,EAC9B,8CACJ,CAAC;IACDD,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;EAEFJ,GAAG,CAACM,GAAG,CAAC,eAAe,EAAE,CAACX,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACY,WAAW,CAAC;EAC5FT,GAAG,CAACM,GAAG,CAAC,uBAAuB,EAAET,UAAU,CAACa,kBAAkB,CAAC;EAC/DV,GAAG,CAACW,IAAI,CAAC,eAAe,EAAE,CAAChB,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACe,aAAa,CAAC;EAC/FZ,GAAG,CAACa,GAAG,CAAC,kBAAkB,EAAE,CAAClB,OAAO,CAACY,WAAW,EAAEZ,OAAO,CAACa,WAAW,CAAC,EAAEX,UAAU,CAACiB,aAAa,CAAC;AAGrG,CAAC"}},"mtime":1698526495345},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/product.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"/**\r\n * This code is creating a new product, with the title, description, product image, and published status coming from the req.body.\r\n * It is also creating a new product_permissions entry, with the user_id and product_id coming from req.body and the permissions set to \"owner\".\r\n */\n\nconst db = require(\"../../../models\");\nconst siteHelper = require(\"../../../helper/site\");\nconst Site_Product_Availability = db.site_product_availability;\nconst Product_Permissions = db.product_permissions;\nconst Site = db.site;\nconst Product = db.product;\nexports.createProduct = (req, res) => {\n  const site_name = siteHelper.getSiteName(req);\n  Site.findOne({\n    domain: site_name\n  }).exec((err, site) => {\n    const product = new Product({\n      ...req.body,\n      published: false\n    });\n    product.save((err, product) => {\n      if (err) {\n        res.status(500).send({\n          message: err\n        });\n        return;\n      }\n      const site_product_availability = new Site_Product_Availability({\n        site_id: site._id,\n        product_id: product.id\n      });\n      site_product_availability.save((err, site) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        const product_permissions = new Product_Permissions({\n          user_id: req.body.user_id,\n          product_id: product._id,\n          permissions: \"owner\"\n        });\n        product_permissions.save((err, product_permission) => {\n          if (err) {\n            res.status(500).send({\n              message: err\n            });\n            return;\n          }\n          res.status(200).send(product);\n        });\n      });\n    });\n  });\n};\nexports.getProducts = async (req, res) => {\n  Product.find().exec((err, products) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!products) {\n      return res.status(404).send({\n        message: \"Products Not found.\"\n      });\n    }\n    res.status(200).send(products);\n  });\n};\nexports.getProductsForSite = async (req, res) => {\n  const site_name = siteHelper.getSiteName(req);\n  Site.findOne({\n    domain: site_name\n  }).exec((err, site) => {\n    if (err || !site) {\n      return res.status(404).send({\n        message: \"Site not found.\"\n      });\n    }\n    Site_Product_Availability.find({\n      site_id: site._id\n    }).select('product_id -_id').exec((err, site_product_availability) => {\n      Product.find().exec((err, products) => {\n        if (err) {\n          res.status(500).send({\n            message: err\n          });\n          return;\n        }\n        products = siteHelper.filterFromList(products, site_product_availability, 'product_id');\n        if (!products) {\n          return res.status(404).send({\n            message: \"Products Not found.\"\n          });\n        }\n        res.status(200).send(products);\n      });\n    });\n  });\n};\nexports.updateProduct = (req, res) => {\n  const product_updates = {\n    title: req.body.title,\n    description: req.body.description,\n    product_image: req.body.product_image,\n    published: req.body.published\n  };\n  Product.findOneAndUpdate({\n    _id: req.params.id\n  }, product_updates, {\n    new: true\n  }).exec((err, product) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!product) {\n      return res.status(404).send({\n        message: \"Product Not found.\"\n      });\n    }\n    res.status(200).send(product);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJzaXRlSGVscGVyIiwiU2l0ZV9Qcm9kdWN0X0F2YWlsYWJpbGl0eSIsInNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkiLCJQcm9kdWN0X1Blcm1pc3Npb25zIiwicHJvZHVjdF9wZXJtaXNzaW9ucyIsIlNpdGUiLCJzaXRlIiwiUHJvZHVjdCIsInByb2R1Y3QiLCJleHBvcnRzIiwiY3JlYXRlUHJvZHVjdCIsInJlcSIsInJlcyIsInNpdGVfbmFtZSIsImdldFNpdGVOYW1lIiwiZmluZE9uZSIsImRvbWFpbiIsImV4ZWMiLCJlcnIiLCJib2R5IiwicHVibGlzaGVkIiwic2F2ZSIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwic2l0ZV9pZCIsIl9pZCIsInByb2R1Y3RfaWQiLCJpZCIsInVzZXJfaWQiLCJwZXJtaXNzaW9ucyIsInByb2R1Y3RfcGVybWlzc2lvbiIsImdldFByb2R1Y3RzIiwiZmluZCIsInByb2R1Y3RzIiwiZ2V0UHJvZHVjdHNGb3JTaXRlIiwic2VsZWN0IiwiZmlsdGVyRnJvbUxpc3QiLCJ1cGRhdGVQcm9kdWN0IiwicHJvZHVjdF91cGRhdGVzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInByb2R1Y3RfaW1hZ2UiLCJmaW5kT25lQW5kVXBkYXRlIiwicGFyYW1zIiwibmV3Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9qb3NocG9tcy9Eb2N1bWVudHMvcHJvamVjdF9maXJlZmx5L2JhY2stZW5kL3BhY2thZ2VzL2Vjb21tZXJjZS9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInByb2R1Y3QuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhpcyBjb2RlIGlzIGNyZWF0aW5nIGEgbmV3IHByb2R1Y3QsIHdpdGggdGhlIHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJvZHVjdCBpbWFnZSwgYW5kIHB1Ymxpc2hlZCBzdGF0dXMgY29taW5nIGZyb20gdGhlIHJlcS5ib2R5LlxyXG4gKiBJdCBpcyBhbHNvIGNyZWF0aW5nIGEgbmV3IHByb2R1Y3RfcGVybWlzc2lvbnMgZW50cnksIHdpdGggdGhlIHVzZXJfaWQgYW5kIHByb2R1Y3RfaWQgY29taW5nIGZyb20gcmVxLmJvZHkgYW5kIHRoZSBwZXJtaXNzaW9ucyBzZXQgdG8gXCJvd25lclwiLlxyXG4gKi9cclxuXHJcbmNvbnN0IGRiID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVsc1wiKTtcclxuY29uc3Qgc2l0ZUhlbHBlciA9IHJlcXVpcmUoXCIuLi8uLi8uLi9oZWxwZXIvc2l0ZVwiKTtcclxuY29uc3QgU2l0ZV9Qcm9kdWN0X0F2YWlsYWJpbGl0eSA9IGRiLnNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHk7XHJcbmNvbnN0IFByb2R1Y3RfUGVybWlzc2lvbnMgPSBkYi5wcm9kdWN0X3Blcm1pc3Npb25zO1xyXG5jb25zdCBTaXRlID0gZGIuc2l0ZTtcclxuY29uc3QgUHJvZHVjdCA9IGRiLnByb2R1Y3Q7XHJcblxyXG5leHBvcnRzLmNyZWF0ZVByb2R1Y3QgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNpdGVfbmFtZSA9IHNpdGVIZWxwZXIuZ2V0U2l0ZU5hbWUocmVxKTtcclxuXHJcbiAgICBTaXRlLmZpbmRPbmUoeyBkb21haW46IHNpdGVfbmFtZSB9KS5leGVjKChlcnIsIHNpdGUpID0+IHtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcclxuICAgICAgICAgICAgLi4ucmVxLmJvZHksXHJcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcHJvZHVjdC5zYXZlKChlcnIsIHByb2R1Y3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNpdGVfcHJvZHVjdF9hdmFpbGFiaWxpdHkgPSBuZXcgU2l0ZV9Qcm9kdWN0X0F2YWlsYWJpbGl0eSh7XHJcbiAgICAgICAgICAgICAgICBzaXRlX2lkOiBzaXRlLl9pZCxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3QuaWRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5LnNhdmUoKGVyciwgc2l0ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9kdWN0X3Blcm1pc3Npb25zID0gbmV3IFByb2R1Y3RfUGVybWlzc2lvbnMoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHJlcS5ib2R5LnVzZXJfaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdC5faWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IFwib3duZXJcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdF9wZXJtaXNzaW9ucy5zYXZlKChlcnIsIHByb2R1Y3RfcGVybWlzc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHByb2R1Y3QpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFByb2R1Y3RzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBQcm9kdWN0LmZpbmQoKVxyXG4gICAgLmV4ZWMoKGVyciwgcHJvZHVjdHMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiUHJvZHVjdHMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocHJvZHVjdHMpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLmdldFByb2R1Y3RzRm9yU2l0ZSA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc2l0ZV9uYW1lID0gc2l0ZUhlbHBlci5nZXRTaXRlTmFtZShyZXEpO1xyXG5cclxuICAgIFNpdGUuZmluZE9uZSh7IGRvbWFpbjogc2l0ZV9uYW1lIH0pLmV4ZWMoKGVyciwgc2l0ZSkgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgIXNpdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJTaXRlIG5vdCBmb3VuZC5cIiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgU2l0ZV9Qcm9kdWN0X0F2YWlsYWJpbGl0eS5maW5kKHsgc2l0ZV9pZDogc2l0ZS5faWQgfSlcclxuICAgICAgICAgICAgLnNlbGVjdCgncHJvZHVjdF9pZCAtX2lkJylcclxuICAgICAgICAgICAgLmV4ZWMoKGVyciwgc2l0ZV9wcm9kdWN0X2F2YWlsYWJpbGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgUHJvZHVjdC5maW5kKCkuZXhlYygoZXJyLCBwcm9kdWN0cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHMgPSBzaXRlSGVscGVyLmZpbHRlckZyb21MaXN0KHByb2R1Y3RzLCBzaXRlX3Byb2R1Y3RfYXZhaWxhYmlsaXR5LCAncHJvZHVjdF9pZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2R1Y3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiUHJvZHVjdHMgTm90IGZvdW5kLlwiIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocHJvZHVjdHMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnRzLnVwZGF0ZVByb2R1Y3QgPSAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHByb2R1Y3RfdXBkYXRlcyA9IHtcclxuICAgICAgICB0aXRsZTogcmVxLmJvZHkudGl0bGUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHJlcS5ib2R5LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgIHByb2R1Y3RfaW1hZ2U6IHJlcS5ib2R5LnByb2R1Y3RfaW1hZ2UsXHJcbiAgICAgICAgcHVibGlzaGVkOiByZXEuYm9keS5wdWJsaXNoZWRcclxuICAgIH07XHJcblxyXG4gICAgUHJvZHVjdC5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0sIHByb2R1Y3RfdXBkYXRlcywgeyBuZXc6IHRydWUgfSlcclxuICAgICAgICAuZXhlYygoZXJyLCBwcm9kdWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXByb2R1Y3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6IFwiUHJvZHVjdCBOb3QgZm91bmQuXCIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHByb2R1Y3QpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUNyQyxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNsRCxNQUFNRSx5QkFBeUIsR0FBR0gsRUFBRSxDQUFDSSx5QkFBeUI7QUFDOUQsTUFBTUMsbUJBQW1CLEdBQUdMLEVBQUUsQ0FBQ00sbUJBQW1CO0FBQ2xELE1BQU1DLElBQUksR0FBR1AsRUFBRSxDQUFDUSxJQUFJO0FBQ3BCLE1BQU1DLE9BQU8sR0FBR1QsRUFBRSxDQUFDVSxPQUFPO0FBRTFCQyxPQUFPLENBQUNDLGFBQWEsR0FBRyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsS0FB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","map":{"version":3,"names":["db","require","siteHelper","Site_Product_Availability","site_product_availability","Product_Permissions","product_permissions","Site","site","Product","product","exports","createProduct","req","res","site_name","getSiteName","findOne","domain","exec","err","body","published","save","status","send","message","site_id","_id","product_id","id","user_id","permissions","product_permission","getProducts","find","products","getProductsForSite","select","filterFromList","updateProduct","product_updates","title","description","product_image","findOneAndUpdate","params","new"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/ecommerce/controllers/","sources":["product.controller.js"],"sourcesContent":["/**\r\n * This code is creating a new product, with the title, description, product image, and published status coming from the req.body.\r\n * It is also creating a new product_permissions entry, with the user_id and product_id coming from req.body and the permissions set to \"owner\".\r\n */\r\n\r\nconst db = require(\"../../../models\");\r\nconst siteHelper = require(\"../../../helper/site\");\r\nconst Site_Product_Availability = db.site_product_availability;\r\nconst Product_Permissions = db.product_permissions;\r\nconst Site = db.site;\r\nconst Product = db.product;\r\n\r\nexports.createProduct = (req, res) => {\r\n    const site_name = siteHelper.getSiteName(req);\r\n\r\n    Site.findOne({ domain: site_name }).exec((err, site) => {\r\n\r\n        const product = new Product({\r\n            ...req.body,\r\n            published: false\r\n        });\r\n\r\n        product.save((err, product) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            const site_product_availability = new Site_Product_Availability({\r\n                site_id: site._id,\r\n                product_id: product.id\r\n            });\r\n\r\n            site_product_availability.save((err, site) => {\r\n                if (err) {\r\n                    res.status(500).send({ message: err });\r\n                    return;\r\n                }\r\n\r\n                const product_permissions = new Product_Permissions({\r\n                    user_id: req.body.user_id,\r\n                    product_id: product._id,\r\n                    permissions: \"owner\"\r\n                });\r\n\r\n                product_permissions.save((err, product_permission) => {\r\n                    if (err) {\r\n                        res.status(500).send({ message: err });\r\n                        return;\r\n                    }\r\n\r\n                    res.status(200).send(product);\r\n                });\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\nexports.getProducts = async (req, res) => {\r\n    Product.find()\r\n    .exec((err, products) => {\r\n        if (err) {\r\n            res.status(500).send({ message: err });\r\n            return;\r\n        }\r\n\r\n        if (!products) {\r\n            return res.status(404).send({ message: \"Products Not found.\" });\r\n        }\r\n\r\n        res.status(200).send(products);\r\n    });\r\n};\r\n\r\nexports.getProductsForSite = async (req, res) => {\r\n    const site_name = siteHelper.getSiteName(req);\r\n\r\n    Site.findOne({ domain: site_name }).exec((err, site) => {\r\n        if (err || !site) {\r\n            return res.status(404).send({ message: \"Site not found.\" });\r\n        }\r\n        Site_Product_Availability.find({ site_id: site._id })\r\n            .select('product_id -_id')\r\n            .exec((err, site_product_availability) => {\r\n                Product.find().exec((err, products) => {\r\n                    if (err) {\r\n                        res.status(500).send({ message: err });\r\n                        return;\r\n                    }\r\n                    \r\n                    products = siteHelper.filterFromList(products, site_product_availability, 'product_id');\r\n\r\n                    if (!products) {\r\n                        return res.status(404).send({ message: \"Products Not found.\" });\r\n                    }\r\n\r\n                    res.status(200).send(products);\r\n                });\r\n            });\r\n    });\r\n};\r\n\r\nexports.updateProduct = (req, res) => {\r\n    const product_updates = {\r\n        title: req.body.title,\r\n        description: req.body.description,\r\n        product_image: req.body.product_image,\r\n        published: req.body.published\r\n    };\r\n\r\n    Product.findOneAndUpdate({ _id: req.params.id }, product_updates, { new: true })\r\n        .exec((err, product) => {\r\n            if (err) {\r\n                res.status(500).send({ message: err });\r\n                return;\r\n            }\r\n\r\n            if (!product) {\r\n                return res.status(404).send({ message: \"Product Not found.\" });\r\n            }\r\n\r\n            res.status(200).send(product);\r\n        });\r\n};\r\n\r\n"],"mappings":"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"}},"mtime":1701964785830},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/routes/page.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// routes/page.routes.js\nconst controller = require(\"../controllers/page.controller\");\nmodule.exports = function (app) {\n  app.use(function (req, res, next) {\n    res.header(\"Access-Control-Allow-Headers\", \"x-access-token, Origin, Content-Type, Accept\");\n    next();\n  });\n  app.post(\"/api/page\", controller.createPage);\n  app.get(\"/api/page\", controller.getPages);\n  app.get(\"/api/page/:id\", controller.getPage);\n  app.put(\"/api/page/:id\", controller.updatePage);\n  app.delete(\"/api/page/:id\", controller.deletePage);\n  // Add other routes as needed\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb250cm9sbGVyIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcHAiLCJ1c2UiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwicG9zdCIsImNyZWF0ZVBhZ2UiLCJnZXQiLCJnZXRQYWdlcyIsImdldFBhZ2UiLCJwdXQiLCJ1cGRhdGVQYWdlIiwiZGVsZXRlIiwiZGVsZXRlUGFnZSJdLCJzb3VyY2VSb290IjoiL2hvbWUvam9zaHBvbXMvRG9jdW1lbnRzL3Byb2plY3RfZmlyZWZseS9iYWNrLWVuZC9wYWNrYWdlcy9zaXRlX2J1aWxkZXIvcm91dGVzLyIsInNvdXJjZXMiOlsicGFnZS5yb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcm91dGVzL3BhZ2Uucm91dGVzLmpzXG5jb25zdCBjb250cm9sbGVyID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL3BhZ2UuY29udHJvbGxlclwiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwKSB7XG4gICAgYXBwLnVzZShmdW5jdGlvbiAocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgcmVzLmhlYWRlcihcbiAgICAgICAgICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLFxuICAgICAgICAgICAgXCJ4LWFjY2Vzcy10b2tlbiwgT3JpZ2luLCBDb250ZW50LVR5cGUsIEFjY2VwdFwiXG4gICAgICAgICk7XG4gICAgICAgIG5leHQoKTtcbiAgICB9KTtcblxuICAgIGFwcC5wb3N0KFwiL2FwaS9wYWdlXCIsIGNvbnRyb2xsZXIuY3JlYXRlUGFnZSk7XG4gICAgYXBwLmdldChcIi9hcGkvcGFnZVwiLCBjb250cm9sbGVyLmdldFBhZ2VzKTtcbiAgICBhcHAuZ2V0KFwiL2FwaS9wYWdlLzppZFwiLCBjb250cm9sbGVyLmdldFBhZ2UpO1xuICAgIGFwcC5wdXQoXCIvYXBpL3BhZ2UvOmlkXCIsIGNvbnRyb2xsZXIudXBkYXRlUGFnZSk7XG4gICAgYXBwLmRlbGV0ZShcIi9hcGkvcGFnZS86aWRcIiwgY29udHJvbGxlci5kZWxldGVQYWdlKTtcbiAgICAvLyBBZGQgb3RoZXIgcm91dGVzIGFzIG5lZWRlZFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQztBQUU1REMsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBVUMsR0FBRyxFQUFFO0VBQzVCQSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFO0lBQzlCRCxHQUFHLENBQUNFLE1BQU0sQ0FDTiw4QkFBOEIsRUFDOUIsOENBQ0osQ0FBQztJQUNERCxJQUFJLENBQUMsQ0FBQztFQUNWLENBQUMsQ0FBQztFQUVGSixHQUFHLENBQUNNLElBQUksQ0FBQyxXQUFXLEVBQUVWLFVBQVUsQ0FBQ1csVUFBVSxDQUFDO0VBQzVDUCxHQUFHLENBQUNRLEdBQUcsQ0FBQyxXQUFXLEVBQUVaLFVBQVUsQ0FBQ2EsUUFBUSxDQUFDO0VBQ3pDVCxHQUFHLENBQUNRLEdBQUcsQ0FBQyxlQUFlLEVBQUVaLFVBQVUsQ0FBQ2MsT0FBTyxDQUFDO0VBQzVDVixHQUFHLENBQUNXLEdBQUcsQ0FBQyxlQUFlLEVBQUVmLFVBQVUsQ0FBQ2dCLFVBQVUsQ0FBQztFQUMvQ1osR0FBRyxDQUFDYSxNQUFNLENBQUMsZUFBZSxFQUFFakIsVUFBVSxDQUFDa0IsVUFBVSxDQUFDO0VBQ2xEO0FBQ0osQ0FBQyJ9","map":{"version":3,"names":["controller","require","module","exports","app","use","req","res","next","header","post","createPage","get","getPages","getPage","put","updatePage","delete","deletePage"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/routes/","sources":["page.routes.js"],"sourcesContent":["// routes/page.routes.js\nconst controller = require(\"../controllers/page.controller\");\n\nmodule.exports = function (app) {\n    app.use(function (req, res, next) {\n        res.header(\n            \"Access-Control-Allow-Headers\",\n            \"x-access-token, Origin, Content-Type, Accept\"\n        );\n        next();\n    });\n\n    app.post(\"/api/page\", controller.createPage);\n    app.get(\"/api/page\", controller.getPages);\n    app.get(\"/api/page/:id\", controller.getPage);\n    app.put(\"/api/page/:id\", controller.updatePage);\n    app.delete(\"/api/page/:id\", controller.deletePage);\n    // Add other routes as needed\n};\n"],"mappings":"AAAA;AACA,MAAMA,UAAU,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AAE5DC,MAAM,CAACC,OAAO,GAAG,UAAUC,GAAG,EAAE;EAC5BA,GAAG,CAACC,GAAG,CAAC,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9BD,GAAG,CAACE,MAAM,CACN,8BAA8B,EAC9B,8CACJ,CAAC;IACDD,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;EAEFJ,GAAG,CAACM,IAAI,CAAC,WAAW,EAAEV,UAAU,CAACW,UAAU,CAAC;EAC5CP,GAAG,CAACQ,GAAG,CAAC,WAAW,EAAEZ,UAAU,CAACa,QAAQ,CAAC;EACzCT,GAAG,CAACQ,GAAG,CAAC,eAAe,EAAEZ,UAAU,CAACc,OAAO,CAAC;EAC5CV,GAAG,CAACW,GAAG,CAAC,eAAe,EAAEf,UAAU,CAACgB,UAAU,CAAC;EAC/CZ,GAAG,CAACa,MAAM,CAAC,eAAe,EAAEjB,UAAU,CAACkB,UAAU,CAAC;EAClD;AACJ,CAAC"}},"mtime":1701883763456},"{\"assumptions\":{},\"sourceRoot\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"filename\":\"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/controllers/page.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"local\",\"root\":\"/home/joshpoms/Documents/project_firefly/back-end\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.23.2:local":{"value":{"code":"// controllers/page.controller.js\nconst db = require(\"../../../models\");\nconst Page = db.page;\n\n// Create a new Page\nexports.createPage = (req, res) => {\n  console.log(req);\n  const page = new Page({\n    ...req.body.data\n    // Add other fields as needed\n  });\n\n  page.save((err, page) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    res.status(200).send(page);\n  });\n};\n\n// Get all Pages\nexports.getPages = (req, res) => {\n  Page.find().exec((err, pages) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    console.log(pages);\n    if (!pages) {\n      return res.status(404).send({\n        message: \"Pages not found.\"\n      });\n    }\n    res.status(200).send(pages);\n  });\n};\n\n// Get a specific Page by ID\nexports.getPage = (req, res) => {\n  Page.findById(req.params.id).exec((err, page) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!page) {\n      return res.status(404).send({\n        message: \"Page not found.\"\n      });\n    }\n    res.status(200).send(page);\n  });\n};\n\n// Update a Page by ID\nexports.updatePage = (req, res) => {\n  const pageUpdates = {\n    ...req.body\n  };\n  Page.findOneAndUpdate({\n    _id: req.params.id\n  }, pageUpdates, {\n    new: true\n  }).exec((err, page) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!page) {\n      return res.status(404).send({\n        message: \"Page not found.\"\n      });\n    }\n    res.status(200).send(page);\n  });\n};\n\n// Delete a Page by ID\nexports.deletePage = (req, res) => {\n  Page.findOneAndDelete({\n    _id: req.params.id\n  }).exec((err, page) => {\n    if (err) {\n      res.status(500).send({\n        message: err\n      });\n      return;\n    }\n    if (!page) {\n      return res.status(404).send({\n        message: \"Page not found.\"\n      });\n    }\n    res.status(200).send(page);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJQYWdlIiwicGFnZSIsImV4cG9ydHMiLCJjcmVhdGVQYWdlIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJkYXRhIiwic2F2ZSIsImVyciIsInN0YXR1cyIsInNlbmQiLCJtZXNzYWdlIiwiZ2V0UGFnZXMiLCJmaW5kIiwiZXhlYyIsInBhZ2VzIiwiZ2V0UGFnZSIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJ1cGRhdGVQYWdlIiwicGFnZVVwZGF0ZXMiLCJmaW5kT25lQW5kVXBkYXRlIiwiX2lkIiwibmV3IiwiZGVsZXRlUGFnZSIsImZpbmRPbmVBbmREZWxldGUiXSwic291cmNlUm9vdCI6Ii9ob21lL2pvc2hwb21zL0RvY3VtZW50cy9wcm9qZWN0X2ZpcmVmbHkvYmFjay1lbmQvcGFja2FnZXMvc2l0ZV9idWlsZGVyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsicGFnZS5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnRyb2xsZXJzL3BhZ2UuY29udHJvbGxlci5qc1xuY29uc3QgZGIgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzXCIpO1xuY29uc3QgUGFnZSA9IGRiLnBhZ2U7XG5cbi8vIENyZWF0ZSBhIG5ldyBQYWdlXG5leHBvcnRzLmNyZWF0ZVBhZ2UgPSAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2cocmVxKTtcbiAgY29uc3QgcGFnZSA9IG5ldyBQYWdlKHtcbiAgICAuLi5yZXEuYm9keS5kYXRhXG4gICAgLy8gQWRkIG90aGVyIGZpZWxkcyBhcyBuZWVkZWRcbiAgfSk7XG5cbiAgcGFnZS5zYXZlKChlcnIsIHBhZ2UpID0+IHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzLnN0YXR1cygyMDApLnNlbmQocGFnZSk7XG4gIH0pO1xufTtcblxuLy8gR2V0IGFsbCBQYWdlc1xuZXhwb3J0cy5nZXRQYWdlcyA9IChyZXEsIHJlcykgPT4ge1xuICBQYWdlLmZpbmQoKVxuICAgIC5leGVjKChlcnIsIHBhZ2VzKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKHBhZ2VzKTtcbiAgICAgIGlmICghcGFnZXMpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQYWdlcyBub3QgZm91bmQuXCIgfSk7XG4gICAgICB9XG5cbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHBhZ2VzKTtcbiAgICB9KTtcbn07XG5cbi8vIEdldCBhIHNwZWNpZmljIFBhZ2UgYnkgSURcbmV4cG9ydHMuZ2V0UGFnZSA9IChyZXEsIHJlcykgPT4ge1xuICBQYWdlLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpXG4gICAgLmV4ZWMoKGVyciwgcGFnZSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQYWdlIG5vdCBmb3VuZC5cIiB9KTtcbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocGFnZSk7XG4gICAgfSk7XG59O1xuXG4vLyBVcGRhdGUgYSBQYWdlIGJ5IElEXG5leHBvcnRzLnVwZGF0ZVBhZ2UgPSAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgcGFnZVVwZGF0ZXMgPSB7XG4gICAgLi4ucmVxLmJvZHlcbiAgfTtcblxuICBQYWdlLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5wYXJhbXMuaWQgfSwgcGFnZVVwZGF0ZXMsIHsgbmV3OiB0cnVlIH0pXG4gICAgLmV4ZWMoKGVyciwgcGFnZSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQYWdlIG5vdCBmb3VuZC5cIiB9KTtcbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocGFnZSk7XG4gICAgfSk7XG59O1xuXG4vLyBEZWxldGUgYSBQYWdlIGJ5IElEXG5leHBvcnRzLmRlbGV0ZVBhZ2UgPSAocmVxLCByZXMpID0+IHtcbiAgUGFnZS5maW5kT25lQW5kRGVsZXRlKHsgX2lkOiByZXEucGFyYW1zLmlkIH0pXG4gICAgLmV4ZWMoKGVyciwgcGFnZSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyciB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogXCJQYWdlIG5vdCBmb3VuZC5cIiB9KTtcbiAgICAgIH1cblxuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocGFnZSk7XG4gICAgfSk7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3JDLE1BQU1DLElBQUksR0FBR0YsRUFBRSxDQUFDRyxJQUFJOztBQUVwQjtBQUNBQyxPQUFPLENBQUNDLFVBQVUsR0FBRyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNqQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNILEdBQUcs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","map":{"version":3,"names":["db","require","Page","page","exports","createPage","req","res","console","log","body","data","save","err","status","send","message","getPages","find","exec","pages","getPage","findById","params","id","updatePage","pageUpdates","findOneAndUpdate","_id","new","deletePage","findOneAndDelete"],"sourceRoot":"/home/joshpoms/Documents/project_firefly/back-end/packages/site_builder/controllers/","sources":["page.controller.js"],"sourcesContent":["// controllers/page.controller.js\nconst db = require(\"../../../models\");\nconst Page = db.page;\n\n// Create a new Page\nexports.createPage = (req, res) => {\n  console.log(req);\n  const page = new Page({\n    ...req.body.data\n    // Add other fields as needed\n  });\n\n  page.save((err, page) => {\n    if (err) {\n      res.status(500).send({ message: err });\n      return;\n    }\n    res.status(200).send(page);\n  });\n};\n\n// Get all Pages\nexports.getPages = (req, res) => {\n  Page.find()\n    .exec((err, pages) => {\n      if (err) {\n        res.status(500).send({ message: err });\n        return;\n      }\n\n      console.log(pages);\n      if (!pages) {\n        return res.status(404).send({ message: \"Pages not found.\" });\n      }\n\n      res.status(200).send(pages);\n    });\n};\n\n// Get a specific Page by ID\nexports.getPage = (req, res) => {\n  Page.findById(req.params.id)\n    .exec((err, page) => {\n      if (err) {\n        res.status(500).send({ message: err });\n        return;\n      }\n\n      if (!page) {\n        return res.status(404).send({ message: \"Page not found.\" });\n      }\n\n      res.status(200).send(page);\n    });\n};\n\n// Update a Page by ID\nexports.updatePage = (req, res) => {\n  const pageUpdates = {\n    ...req.body\n  };\n\n  Page.findOneAndUpdate({ _id: req.params.id }, pageUpdates, { new: true })\n    .exec((err, page) => {\n      if (err) {\n        res.status(500).send({ message: err });\n        return;\n      }\n\n      if (!page) {\n        return res.status(404).send({ message: \"Page not found.\" });\n      }\n\n      res.status(200).send(page);\n    });\n};\n\n// Delete a Page by ID\nexports.deletePage = (req, res) => {\n  Page.findOneAndDelete({ _id: req.params.id })\n    .exec((err, page) => {\n      if (err) {\n        res.status(500).send({ message: err });\n        return;\n      }\n\n      if (!page) {\n        return res.status(404).send({ message: \"Page not found.\" });\n      }\n\n      res.status(200).send(page);\n    });\n};\n"],"mappings":"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"}},"mtime":1704386322807}}